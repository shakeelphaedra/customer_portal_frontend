[{"C:\\Data\\django\\customer_portal\\frontend\\src\\index.tsx":"1","C:\\Data\\django\\customer_portal\\frontend\\src\\reportWebVitals.ts":"2","C:\\Data\\django\\customer_portal\\frontend\\src\\App.tsx":"3","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\Login.tsx":"4","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\CreateAccount.tsx":"5","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\ChangePassword.tsx":"6","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\Forget.tsx":"7","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\ResetPassword.tsx":"8","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\header\\Home.tsx":"9","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\header\\Header.tsx":"10","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\KeyAuditConfirmation\\KeyAuditConfirmation.tsx":"11","C:\\Data\\django\\customer_portal\\frontend\\src\\api\\api.tsx":"12","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Dashboard.tsx":"13","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Sidebarr.tsx":"14","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\CompanyDetails.tsx":"15","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AuditReport.tsx":"16","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\UserInformation.tsx":"17","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeys.tsx":"18","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ManageUser.tsx":"19","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\EditUserInformation.tsx":"20","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Quotations.tsx":"21","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysGroup.tsx":"22","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AddNewUser.tsx":"23","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AuditKeys.tsx":"24","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ServiceRequest.tsx":"25","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\SystemNumber.tsx":"26","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\CompanyDetailsSummary.tsx":"27","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\NotFound.tsx":"28","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysDetails.tsx":"29","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Accounting.tsx":"30","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysGroupDetails.tsx":"31","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ServiceRequestDetails.tsx":"32","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\KeyRequest.tsx":"33","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AccountingDetails.tsx":"34","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\QuotationDetails.tsx":"35","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Payement\\Payment.tsx":"36"},{"size":557,"mtime":1615795197783,"results":"37","hashOfConfig":"38"},{"size":440,"mtime":1615795197786,"results":"39","hashOfConfig":"38"},{"size":2677,"mtime":1627297165809,"results":"40","hashOfConfig":"38"},{"size":10661,"mtime":1627572609092,"results":"41","hashOfConfig":"38"},{"size":9645,"mtime":1629712340692,"results":"42","hashOfConfig":"38"},{"size":6905,"mtime":1615795197697,"results":"43","hashOfConfig":"38"},{"size":4351,"mtime":1615799871990,"results":"44","hashOfConfig":"38"},{"size":3939,"mtime":1615795197718,"results":"45","hashOfConfig":"38"},{"size":248,"mtime":1615795197588,"results":"46","hashOfConfig":"38"},{"size":2409,"mtime":1626698704641,"results":"47","hashOfConfig":"38"},{"size":4278,"mtime":1627385801425,"results":"48","hashOfConfig":"38"},{"size":1635,"mtime":1617708845718,"results":"49","hashOfConfig":"38"},{"size":2962,"mtime":1626179561828,"results":"50","hashOfConfig":"38"},{"size":6542,"mtime":1626683466823,"results":"51","hashOfConfig":"38"},{"size":10926,"mtime":1626436038141,"results":"52","hashOfConfig":"38"},{"size":11411,"mtime":1626444134362,"results":"53","hashOfConfig":"38"},{"size":2410,"mtime":1615795197775,"results":"54","hashOfConfig":"38"},{"size":22543,"mtime":1626444985474,"results":"55","hashOfConfig":"38"},{"size":23172,"mtime":1627460721636,"results":"56","hashOfConfig":"38"},{"size":2731,"mtime":1615795197760,"results":"57","hashOfConfig":"38"},{"size":11909,"mtime":1627297175970,"results":"58","hashOfConfig":"38"},{"size":23219,"mtime":1627297175980,"results":"59","hashOfConfig":"38"},{"size":14965,"mtime":1627452009309,"results":"60","hashOfConfig":"38"},{"size":16863,"mtime":1626680847389,"results":"61","hashOfConfig":"38"},{"size":14527,"mtime":1626444178926,"results":"62","hashOfConfig":"38"},{"size":7856,"mtime":1626444075740,"results":"63","hashOfConfig":"38"},{"size":1824,"mtime":1615795197758,"results":"64","hashOfConfig":"38"},{"size":205,"mtime":1615795197582,"results":"65","hashOfConfig":"38"},{"size":12070,"mtime":1626443801504,"results":"66","hashOfConfig":"38"},{"size":36071,"mtime":1626431116697,"results":"67","hashOfConfig":"38"},{"size":3181,"mtime":1626445255055,"results":"68","hashOfConfig":"38"},{"size":11224,"mtime":1626433109309,"results":"69","hashOfConfig":"38"},{"size":23236,"mtime":1617267892385,"results":"70","hashOfConfig":"38"},{"size":11741,"mtime":1626431150319,"results":"71","hashOfConfig":"38"},{"size":11961,"mtime":1626431710909,"results":"72","hashOfConfig":"38"},{"size":18269,"mtime":1623767493873,"results":"73","hashOfConfig":"38"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},"tpkqto",{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"76"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"76"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"87","messages":"88","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"76"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"76"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99","usedDeprecatedRules":"76"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"76"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"76"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"76"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"76"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"76"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"76"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"76"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"76"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"76"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"133","usedDeprecatedRules":"76"},{"filePath":"134","messages":"135","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"136","usedDeprecatedRules":"76"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"139","usedDeprecatedRules":"76"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"142","usedDeprecatedRules":"76"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"76"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"148","messages":"149","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"150","messages":"151","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"152","usedDeprecatedRules":"76"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"155","usedDeprecatedRules":"76"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"158","usedDeprecatedRules":"76"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"161","usedDeprecatedRules":"76"},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"166","usedDeprecatedRules":"76"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"169","usedDeprecatedRules":"76"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"172","usedDeprecatedRules":"76"},"C:\\Data\\django\\customer_portal\\frontend\\src\\index.tsx",[],["173","174"],"C:\\Data\\django\\customer_portal\\frontend\\src\\reportWebVitals.ts",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\App.tsx",["175","176","177","178","179","180","181","182","183","184"],"import './App.css';\r\nimport Footer from './component/footer/Footer';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport logolocks from './component/icons/logolocks1.png';\r\nimport heart from './component/icons/heart.svg';\r\nimport lock from './component/icons/lock.2a916e83.webp';\r\nimport door from './component/icons/door.a7527e00.webp';\r\nimport key from './component/icons/key.png';\r\nimport { Redirect, Route, useHistory } from \"react-router\";\r\nimport CreateAccount from './component/login/CreateAccount';\r\nimport Login from './component/login/Login';\r\nimport Home from './component/header/Home';\r\nimport Forget from './component/login/Forget';\r\nimport ChangePassword from './component/login/ChangePassword';\r\nimport ResetPassword from './component/login/ResetPassword';\r\nimport NotFound from './component/NotFound';\r\nimport { useEffect, useState } from 'react';\r\nimport KeyAuditConfirmation from './component/KeyAuditConfirmation/KeyAuditConfirmation';\r\nimport Header from './component/header/Header';\r\n\r\nrequire('dotenv').config()\r\nfunction App(props:any) {\r\n  const history = useHistory();\r\n  const [acces, setAccess] = useState(\"\");\r\n  const [username, setUsername] = useState<any>(\"\");\r\n  useEffect(()=>{\r\n    let token:any = localStorage.getItem('refresh_token'); \r\n    let user:any = localStorage.getItem('username'); \r\n    setAccess(token);\r\n    setUsername(user);\r\n     console.log(window);\r\n  },[])\r\n\r\n  const icon = () =>{\r\n    history.push('/home/companydetails');\r\n  }\r\n  const login = () =>{\r\n    history.push('/');\r\n  }\r\n  const logout =()=> {\r\n    try {\r\n        setAccess(\"\");\r\n        setUsername(\"\");\r\n        localStorage.removeItem('refresh_token');\r\n        localStorage.removeItem('username');\r\n        history.push('/');\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n};\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"main-page\">\r\n        <Header acces={acces} username={username} logout={logout}/>\r\n              <Route exact path=\"/\" component={Login} />\r\n              <Route exact path=\"/KeyAudit/:id\" component={KeyAuditConfirmation} />\r\n              <Route path=\"/home\" component={Home} />\r\n              <Route path=\"/createaccount\" component={CreateAccount} />\r\n              <Route path='/forgot' component={Forget}/>\r\n              <Route path='/changepassword' component={ChangePassword}/>\r\n              <Route path='/resetpassword' component={ResetPassword}/>\r\n        \r\n        <footer className=\"footer\">\r\n          <h6>Â© 2020 Calgary Lock & Safe. All Rights Reserved. Some logos are copyright of their respective holders. Some images courtesy of Freepik.com.</h6>\r\n        </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\Login.tsx",["185","186","187","188","189","190","191","192","193"],"import React, { useEffect, useState} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axiosInstance from '../../api/api';\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\nimport './Login.css';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport info from '../icons/info.svg';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\n\r\nconst validEmailRegex = RegExp(\r\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\r\n  );\r\n\r\n  const override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:35%;\r\n  margin-left:-15%;\r\n`;\r\n  \r\n\r\nlet Login=()=> {\r\n    let history = useHistory()\r\n    const mytoast:any = useRef(null);\r\n    const recaptchaRef:any = useRef(null);\r\n\r\n    const initialFormData = Object.freeze({\r\n\t\temail: '',\r\n        password: '',\r\n    });\r\n    const [formData, setFormData] = useState<any>(initialFormData);\r\n    const [errorEmail, setErrorEmail] = useState('');\r\n    const [errorPassword, setErrorPassword] = useState('');\r\n    let [loading, setLoading] = useState<any>(false);\r\n    const [remember, setRemember] = useState<any>(false);\r\n    const [ableToSubmit, setAbleToSubmit] = useState<any>(false);\r\n    \r\n    const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n        setFormData({...formData,[name]:value});\r\n    };\r\n    \r\n    useEffect(()=>{\r\n        if(localStorage.getItem('email')!==''){\r\n        setFormData({...formData, email: localStorage.getItem('email'), password : localStorage.getItem('password')});\r\n        }\r\n    },[]) \r\n\r\n    const formValidation = () =>{\r\n        let errorEmail = '';\r\n        let errorPassword = '';\r\n        let isValid = true;\r\n\r\n         if(formData.email === ''){\r\n            errorEmail = '* Please enter a email address';\r\n            isValid = false;\r\n         }else\r\n         if(!validEmailRegex.test(formData.email)){\r\n            errorEmail = '* Please enter a valid email address';\r\n            isValid = false ;\r\n        }\r\n            \r\n        let lowerCaseLetters = /[a-z]/g;\r\n        let upperCaseLetters = /[A-Z]/g;\r\n        let numbers = /[0-9]/g;\r\n        let specialcharacter = /[!@#\\$%\\^&\\*]/g;\r\n        if(formData.password === ''){\r\n            errorPassword = '* Please enter a password';\r\n            isValid = false;\r\n        }\r\n        setErrorEmail(errorEmail);\r\n        setErrorPassword(errorPassword);\r\n        return isValid\r\n    }\r\n    const handleVerifyRecaptch = (e: any) => {\r\n        var recaptchaValue = recaptchaRef.current.getValue();\r\n        if(recaptchaValue){\r\n            setAbleToSubmit(true)\r\n        }\r\n    }\r\n    const handleExpireRecaptcha = () => {\r\n        setAbleToSubmit(false)\r\n    }\r\n\r\n    const handleSubmit = (e:any) => {\r\n        e.preventDefault();\r\n        var recaptchaValue = recaptchaRef.current.getValue();\r\n        if(recaptchaValue != \"\"){\r\n            let isValid = formValidation();\r\n            if(isValid){\r\n                axiosInstance\r\n                .post(`/api/customer/login/`, {\r\n                    email: formData.email,\r\n                    password: formData.password,\r\n                })\r\n                .then((res) => {\r\n                    if(remember===true){\r\n                        localStorage.setItem('email', formData.email );\r\n                        localStorage.setItem('password', formData.password );\r\n                        localStorage.setItem('remember', remember);\r\n                    }   else if(remember===false){\r\n                        localStorage.removeItem('email');\r\n                        localStorage.removeItem('password');\r\n                        localStorage.removeItem('remember');\r\n                    }\r\n\r\n                    if(res.data.is_active)\r\n                    {  \r\n                        console.log(res.data);\r\n                        localStorage.setItem('email', res.data.email);\r\n                        localStorage.setItem('phone', res.data.phone);\r\n                        localStorage.setItem('access_token', res.data.access);\r\n                        localStorage.setItem('refresh_token', res.data.refresh);\r\n                        localStorage.setItem('username', res.data.username);\r\n                        localStorage.setItem('invoice', res.data.user_access.inv_statements);\r\n                        localStorage.setItem('quotes', res.data.user_access.quotes);\r\n                        localStorage.setItem('service_request', res.data.user_access.service_request);\r\n                        localStorage.setItem('key_finder', res.data.user_access.key_finder);\r\n                        localStorage.setItem('audit', res.data.user_access.audit);\r\n                        localStorage.setItem('user_type', res.data.user_type);\r\n                        axiosInstance.defaults.headers['Authorization'] =\r\n                            'JWT ' + localStorage.getItem('access_token');\r\n                        setLoading(false);\r\n                        if(res.data.user_type===\"primary\"){\r\n                            if(res.data.user_access.inv_statements || res.data.user_access.quotes){\r\n                                history.push(\"/home/accounting\");\r\n                            }else {\r\n                                history.push(\"/home/companydetails\");\r\n                            }\r\n                            \r\n                        }else if(res.data.user_type==='additional'){\r\n                            if(res.data.last_login==null){\r\n                                history.push(\"/changepassword\");\r\n                            }else {\r\n                                if(res.data.user_access.inv_statements || res.data.user_access.quotes){\r\n                                    history.push(\"/home/accounting\");\r\n                                }else {\r\n                                    history.push(\"/home/companydetails\");\r\n                                }\r\n                            }\r\n                        }\r\n                    }else {\r\n                        mytoast.current.show({severity: 'error', detail: 'You are Disabled from primary user'});\r\n                    }\r\n                })\r\n                .catch((error)=>{\r\n                    mytoast.current.show({severity: 'error', detail: 'Wrong email or password'});\r\n                    setLoading(false);\r\n                })\r\n                setLoading(true);\r\n\r\n            }\r\n        }\r\n         \r\n    }\r\n\r\n    function reset() {\r\n        history.push(`/forgot`);\r\n    }\r\n    function login() {\r\n        history.push(`/createaccount`);\r\n    }\r\n      return (\r\n          <>\r\n        <div>\r\n        {\r\n            loading ? <div className='overlay-box1' style={{margin:0}}>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n         </div> :''\r\n        }\r\n        <Toast ref={mytoast} />\r\n        <ReactTooltip id=\"required\"effect=\"solid\" place=\"bottom\" >\r\n           \"Password should be minimum 8 characters with atleast one uppercase, one lowercase, one special character and one numeric value\"\r\n        </ReactTooltip>\r\n        </div>\r\n        <div className=\"overview\">\r\n            \r\n            <div className=\"d-flex justify-content-center own-login-container\">\r\n            \r\n            <form onSubmit={handleSubmit} style={{marginTop:\"4.375rem\"}} noValidate>\r\n                <div>\r\n                  <label style={{fontSize:\"1.875rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Welcome</label>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <input name=\"email\" style={{width:\"22.063rem\",height:\"2.5rem\"}} type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Email ID\" value={formData.email} onChange={handleInputChange}  required/>\r\n                    <span className=\"errorMessage\">{errorEmail}</span>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"row\" style={{marginLeft:\"0px\"}}>\r\n                        <input name=\"password\"  style={{width:\"22.063rem\",height:\"2.5rem\",paddingRight:'35px'}} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" value={formData.password} onChange={handleInputChange} required/>\r\n                        <img alt=\"info\" data-for=\"required\" data-tip=\"required\" style={{cursor:\"pointer\", width:'1.25rem',padding:'0px',marginLeft:'-1.875rem'}} src={info}/>\r\n                    </div>\r\n                    <span className=\"errorMessage\">{errorPassword}</span>\r\n                </div>\r\n                <div style={{display:\"flex\"}} >\r\n                    <div className=\"form-group\">\r\n                        <div className=\"form-check\">\r\n                            <input style={{height:\"1.125rem\",width:\"1.125rem\",marginLeft:\"-2.5rem\" ,cursor:'pointer'}} className=\"form-check-input\" name='remember' type=\"checkbox\" id=\"gridCheck\" checked={remember} onChange={(e)=>{setRemember(e.target.checked)}}/>\r\n                            <label style={{marginLeft:\"-0.625rem\",paddingTop:'0.125rem',cursor:'pointer'}}  className=\"form-check-label\" htmlFor=\"gridCheck\">\r\n                                Remember me\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                       <label className=\"create\" onClick={reset} style={{marginLeft:\"5.625rem\"}}>\r\n                            Reset Password ?\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <button style={{width:\"22.063rem\",height:\"2.5rem\",backgroundColor:\"#009ED6\"}} className=\"btn btn-primary\" type=\"submit\" disabled={!ableToSubmit}>Login</button>\r\n                </div>\r\n                <ReCAPTCHA\r\n                    onChange={handleVerifyRecaptch}\r\n                    ref={recaptchaRef}\r\n                    sitekey={process.env.REACT_APP_RECAPTCHA_SITE_KEY || \"\"}\r\n                    onExpired={()=>{handleExpireRecaptcha()}}\r\n                />\r\n                <div>\r\n                    <label className=\"create mt-2\" onClick={login} style={{fontSize:\"1rem\",color:\"#009ED6\",fontWeight:\"bold\"}}>\r\n                       Create Account \r\n                    </label>\r\n                </div>\r\n            </form>\r\n            \r\n            </div>\r\n            </div> \r\n            </>\r\n      );\r\n    }\r\n\r\nexport default Login;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\CreateAccount.tsx",["194","195","196","197","198"],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\ChangePassword.tsx",["199","200","201"],"import { useState } from 'react';\r\nimport axiosInstance from '../../api/api';\r\nimport './Login.css';\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport { useHistory } from 'react-router';\r\nimport info from '../icons/info.svg';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:35%;\r\n  margin-left:-15%;\r\n`;\r\n\r\nlet Login=()=> {\r\n    let history = useHistory();\r\n    const toast:any = useRef(null);\r\n\r\n    const initialFormData = Object.freeze({\r\n\t\toldpassword: '',\r\n        newpassword: ''\r\n    });\r\n    const [formData, setFormData] = useState(initialFormData);\r\n    let [loading, setLoading] = useState<any>(false);\r\n    const [success, setSuccess] = useState<any>(false);\r\n\r\n    const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n        setFormData({...formData,[name]:value});\r\n    };\r\n\r\n    const formValidation= () =>{\r\n        let isValid = true;\r\n        const node = toast.current;\r\n        let numbers = /[0-9]/g;\r\n        let lowerCaseLetters = /[a-z]/g;\r\n        let upperCaseLetters = /[A-Z]/g;\r\n        let specialcharacter = /[!+@#\\$%\\^&\\*]/g;\r\n        if(formData.oldpassword === '' || formData.newpassword === ''){\r\n            if(node){\r\n            node.show({severity: 'error', detail: \"Please Enter all fields\"});\r\n            }\r\n            isValid = false ;\r\n        }else if(!(formData.oldpassword.trim().length >= 8 && formData.oldpassword.match(numbers) && formData.oldpassword.match(lowerCaseLetters) && formData.oldpassword.match(upperCaseLetters) && formData.oldpassword.match(specialcharacter))){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter a valid old password format\"});\r\n                }\r\n            isValid = false;\r\n        }else if(!(formData.newpassword.trim().length >= 8 && formData.newpassword.match(numbers) && formData.newpassword.match(lowerCaseLetters) && formData.newpassword.match(upperCaseLetters) && formData.newpassword.match(specialcharacter))){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter a valid new password format\"});\r\n                }\r\n            isValid = false;\r\n        }\r\n        return isValid\r\n    }\r\n\r\n  \r\n    const handleSubmit = (e:any) => {\r\n        e.preventDefault();\r\n        let isValid = formValidation();\r\n        if(isValid){\r\n        setLoading(true);\r\n        try{\r\n        axiosInstance\r\n\t\t\t.patch(`/api/customer/change/password/`, {\r\n\t\t\t\told_password: formData.oldpassword,\r\n\t\t\t\tpassword: formData.newpassword,\r\n            },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n                setLoading(false);\r\n                if(res.data.status===200){\r\n                    toast.current.show({severity: 'success', detail: 'Password Changed'});\r\n                    setSuccess(true);\r\n                }else\r\n                    if(res.data.status===406){\r\n                        toast.current.show({severity: 'error', detail: \"Password should be minimum 8 characters with one upper,one special character, one lower case and one numeric value\"});\r\n                    }else if(res.data.status===400){\r\n                        toast.current.show({severity: 'error', detail: \"New password should not be the same as old password\"});\r\n                    }else{\r\n                        toast.current.show({severity: 'error', detail: \"Old password is Wrong\"});\r\n                    } \r\n                setFormData({...formData, oldpassword:'', newpassword:''});\r\n                  \r\n               })\r\n               .catch((err)=>{\r\n                setLoading(false);\r\n                toast.current.show({severity: 'error', detail: \"Something went Wrong\"});\r\n               })\r\n        }catch(error){\r\n            setLoading(false);\r\n            toast.current.show({severity: 'error', detail: \"Something went Wrong\"});\r\n            throw error;\r\n        }\r\n    }\r\n    }\r\n    const passSuccess = () =>{\r\n        history.push('/');\r\n    }\r\n       \r\n      return (\r\n        <div >\r\n            <Toast ref={toast} />\r\n            {\r\n                loading ? <div className='overlay-box1' style={{margin:0}}>\r\n                <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n             </div> : ''\r\n            }\r\n            <ReactTooltip id=\"required\"effect=\"solid\" place=\"bottom\" >\r\n           \"Password should be minimum 8 characters with atleast one uppercase, one lowercase, one special character and one numeric value\"\r\n        </ReactTooltip>\r\n            {success ? <div className=\"d-flex justify-content-center own-change-container\">\r\n                <div style={{marginTop:'15rem'}}>\r\n                <p style={{fontSize:'1.25rem'}}>Password changed Successfully!</p>\r\n                <button type=\"submit\" onClick={passSuccess} className='btn btn-primary'>Go to login page </button>\r\n                </div>\r\n            </div>\r\n            :\r\n            <div className=\"d-flex justify-content-center own-change-container\">\r\n            <form onSubmit={handleSubmit} style={{marginTop:\"6.375rem\"}}> \r\n                <div>\r\n                  <label style={{fontSize:\"1.875rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Change Password</label>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <input name=\"oldpassword\" style={{width:\"22.063rem\",height:\"2.5rem\"}} type=\"password\" value={formData.oldpassword} className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Old Password*\" onChange={handleInputChange}/>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                <div className=\"row\" style={{marginLeft:\"0px\"}}>\r\n                    <input name=\"newpassword\" style={{width:\"22.063rem\",height:\"2.5rem\",paddingRight:'2.2rem'}} type=\"password\" value={formData.newpassword} className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"New Password*\" onChange={handleInputChange}/>\r\n                    <img alt=\"info\" data-for=\"required\" data-tip=\"required\" style={{cursor:\"pointer\", width:'1.25rem',padding:'0px',marginLeft:'-1.875rem'}} src={info}/>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <button style={{width:\"22.063rem\",height:\"2.5rem\",backgroundColor:\"#009ED6\"}} className=\"btn btn-primary\" type=\"submit\">Change</button>\r\n                </div>\r\n            </form>\r\n            </div>\r\n            }\r\n            \r\n            </div> \r\n      );\r\n    }\r\n\r\nexport default Login;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\Forget.tsx",["202"],"import { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {baseURL} from '../../api/api';\r\nimport axiosInstance from '../../api/api';\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst validEmailRegex = RegExp(\r\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\r\n  );\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\nlet Forget = () =>{\r\n    let history = useHistory();\r\n    const toast:any = useRef(null);\r\n    const initialFormData = Object.freeze({\r\n\t\temail: '',\r\n    });\r\n    const [formData, setFormData] = useState(initialFormData);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n        setFormData({...formData,[name]:value});\r\n    };\r\n\r\n    const formValidation = () =>{\r\n        let isValid = true;\r\n        if(formData.email === ''){\r\n                toast.current.show({severity: 'error', detail: \"Please enter a email address\"});\r\n            isValid = false;\r\n         }else\r\n         if(!validEmailRegex.test(formData.email)){\r\n            toast.current.show({severity: 'error', detail: \"Please enter a valid email address\"});\r\n            isValid = false ;\r\n        }\r\n        return isValid\r\n    }\r\n\r\n    const handleSubmit = (e:any) => {\r\n        e.preventDefault();\r\n        let isValid = formValidation();\r\n        if(isValid){\r\n        setLoading(true);\r\n        try{\r\n            axiosInstance\r\n\t\t\t.post(`/api/customer/reset/password/`, {\r\n\t\t\t\temail: formData.email,\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n                setLoading(false);\r\n                if(res.data.status === 200){\r\n                toast.current.show({severity: 'success', detail: 'Mail sent'});\r\n                 setFormData({...formData, email:'' });\r\n               }else {\r\n                toast.current.show({severity: 'error', detail: 'The Email address is not registered to an account'});\r\n               }\r\n            })\r\n            .catch((error)=>{\r\n                toast.current.show({severity: 'error', detail: 'Error'});\r\n                setLoading(false);\r\n            })\r\n        }catch(error){\r\n            throw error;\r\n        }\r\n    }\r\n    }\r\n\r\n    function login() {\r\n        history.push(`/`);\r\n       }\r\n    return(\r\n        <>\r\n         <div >\r\n         {\r\n            loading ? <div className='overlay-box1' style={{margin:0}}>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n         </div> :''\r\n        }\r\n         <Toast ref={toast} />\r\n            <div className=\"d-flex justify-content-center own-login-container\">\r\n            <form onSubmit={handleSubmit}  style={{marginTop:\"100px\"}}> \r\n                <div>\r\n                  <label style={{fontSize:\"1.875rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Forgot your Password?</label>\r\n                </div>\r\n                <div>\r\n                  <label style={{fontSize:\"1.125rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Confirm your email and we'll send the Instructions</label>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"col\">\r\n                        <input  name=\"email\" style={{width:\"22rem\",height:\"2.5rem\",marginLeft:'.5rem'}} className=\"form-control\"  placeholder=\"Email ID *\" value={formData.email} onChange={handleInputChange}/>\r\n                    </div><br></br>\r\n                    <div className=\"col\">\r\n                        <button style={{width:\"22rem\",height:\"2.5rem\",backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}} className=\"btn btn-primary\" type=\"submit\">Reset Password</button>\r\n                    </div>\r\n                </div>\r\n                <div > \r\n                    <label className=\"create mt-2 text-center\" onClick={login}  style={{fontSize:\"1rem\",color:\"#009ED6\",fontWeight:\"bold\"}}>\r\n                       Login \r\n                    </label>\r\n                </div>\r\n            </form>\r\n            </div>\r\n            </div> \r\n        </>\r\n    )\r\n}\r\nexport default Forget;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\login\\ResetPassword.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\header\\Home.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\header\\Header.tsx",["203","204","205","206","207","208","209","210"],"import React, {useState, useEffect} from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { Redirect, Route, useHistory } from \"react-router\";\r\n\r\n/* import { Route, Switch } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Redirect, Route, useHistory } from \"react-router\";\r\n\r\nimport Home from './Home';\r\nimport Services from './Servics';\r\nimport Product from './Product';\r\nimport Industries from './Industries';\r\nimport News from './News';\r\nimport About from './About';\r\nimport ContactUs from './ContactUs'; */\r\nimport './Header.css';\r\nimport logolocks from '../icons/logo.png';\r\nimport axiosInstance from '../../api/api';\r\n\r\nfunction Header(props:any) {\r\n    const [acces, setAccess] = useState(\"\");\r\n    const [username, setUsername] = useState<any>(\"\");\r\n    React.useEffect(() => {\r\n        setUsername(props.username)\r\n        setAccess(props.access)\r\n      }, []);\r\n    \r\n const history = useHistory();\r\n    \r\n    const icon = () =>{\r\n        history.push('/home/companydetails');\r\n    }\r\n    const login = () =>{\r\n        history.push('/');\r\n    }\r\n      return (\r\n        <header className=\"header\">\r\n            <nav className=\"navbar navbar-expand-lg navbar-light bg-light p-0\">\r\n                <a className=\"navbar-brand mr-0\" href=\"#\">\r\n                    <img style={{float:'left',cursor:'pointer'}} alt=\"locks\" src={logolocks}  onClick={localStorage.getItem(\"access_token\")? icon : login} width=\"200\"/>\r\n                </a>\r\n                {\r\n                    acces ? <ul className=\"navbar-nav ml-auto\">\r\n                    <li className=\"nav-item dropdown\">\r\n                        <a className=\"nav-link dropdown-toggle userInfo\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                            <span className=\"d-md-inline-block d-none\">Welcome</span> <strong>{username}</strong>\r\n                            <span className=\"userImg\"></span>\r\n                        </a>\r\n                        <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                            <a className=\"dropdown-item\" href=\"#\" onClick={props.logout}>LOGOUT</a>\r\n                        </div>\r\n                    </li>\r\n                </ul> : ''\r\n                }\r\n                \r\n            </nav>\r\n        </header>\r\n      )\r\n  }\r\n\r\nexport default Header;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\KeyAuditConfirmation\\KeyAuditConfirmation.tsx",["211","212","213","214","215","216"],"import React from 'react';\r\nimport {\r\n    Redirect,\r\n  } from \"react-router-dom\";\r\n  import { Toast } from 'primereact/toast';\r\n\r\nimport '../login/Login.css'\r\nimport axiosInstance , {baseURL} from '../../api/api';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n    data: any;\r\n    loading: boolean;\r\n\r\n}\r\nclass KeyAuditConfirmation extends React.Component<{},Props> {\r\n  mytoast: React.RefObject<any>;\r\n    constructor(props:Props){\r\n        super(props);\r\n        this.mytoast = React.createRef();\r\n        this.state={\r\n            loading: false,\r\n            data: []\r\n        }\r\n    }\r\n\r\n    componentDidMount = async ()=>{\r\n        this.setState({loading: true})\r\n        var props: any = this.props\r\n        var id = props.match.params.id;\r\n        this.getDetails(id)\r\n    }\r\n\r\n    confirmKey = async(id: any) => {\r\n        var props: any = this.props\r\n        var key_id = props.match.params.id;\r\n        const api = `/api/kdfinder/audit_report/${key_id}/confirm/${id}`;\r\n        let response = await axiosInstance.post(api , { headers: {'Content-Type': 'application/json',} } );\r\n        if(response.data.success){\r\n            var props: any = this.props\r\n            var id = props.match.params.id;\r\n            this.getDetails(id)\r\n        }\r\n    }\r\n\r\n    rejectKey = async(id: any) => {\r\n        var props: any = this.props\r\n        var key_id = props.match.params.id;\r\n        const api = `/api/kdfinder/audit_report/${key_id}/reject/${id}`;\r\n        let response = await axiosInstance.post(api , { headers: {'Content-Type': 'application/json',} } );\r\n        if(response.data.success){\r\n            var props: any = this.props\r\n            var id = props.match.params.id;\r\n            this.getDetails(id)\r\n        }\r\n    }\r\n\r\n    getDetails = (id: any) =>{\r\n        const api = `/api/kdfinder/audit_report/${id}`;\r\n        axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } ).then((response: any) => {\r\n            if(response.data.success){\r\n                this.setState({data: response.data.data, loading: false})\r\n            }else{\r\n                window.location.href = \"/\"\r\n            }\r\n        }).catch(ee => {\r\n            window.location.href = \"/\"\r\n        });\r\n        \r\n    }\r\n\r\n    render(){\r\n        console.log(\"key_audit_info\");\r\n        return(\r\n            <div>\r\n            {\r\n                this.state.loading ? <div className='overlay-box1'  style={{margin:0}}>\r\n                <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n             </div> :''\r\n            }\r\n            <Toast ref={this.mytoast} />\r\n\r\n            <div className=\"d-flex justify-content-center own-login-container align-items-center\">\r\n            \r\n            <table className=\"table\" style={{border :'2px solid #12739A',width:'70%'}} >\r\n            <thead style={{background: 'rgb(18, 115, 154)',color: 'white'}}>\r\n              <tr>\r\n                <th>Key ID Stamp</th>\r\n                <th>Phone </th>\r\n                <th>Email ID </th>\r\n                <th>Issue Date</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody >\r\n            {this.state.data.map((item: any,i: any)=>{\r\n             return(\r\n              <tr key={i}>\r\n                <td>{item.key_id +\" - \"+ item.sequence}</td>\r\n                <td>\r\n                    {item.phone}\r\n                </td>\r\n                <td>\r\n                    {item.email}\r\n                </td>\r\n                <td>\r\n                    {item.date_issued}</td>\r\n                <td>\r\n                    <button className=\"btn btn-success\" onClick={() => this.confirmKey(item.id)}>Confirm</button>\r\n                    <button className=\"btn btn-danger ml-2\" onClick={() => this.rejectKey(item.id)}>Reject</button>\r\n                </td>\r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          \r\n                </div>\r\n        </div>\r\n   \r\n        );\r\n    }\r\n}\r\n\r\nexport default KeyAuditConfirmation;","C:\\Data\\django\\customer_portal\\frontend\\src\\api\\api.tsx",["217"],"import axios from 'axios';\r\nimport env from 'react-dotenv';\r\n\r\nexport const baseURL = process.env.REACT_APP_API_URL;\r\n\r\n\r\n  const axiosInstance = axios.create({\r\n    baseURL: baseURL,\r\n    timeout: 100000,\r\n    headers: {\r\n      Authorization: localStorage.getItem('access_token')\r\n        ? 'Bearer ' + localStorage.getItem('access_token')\r\n        : null,\r\n      'Content-Type': 'application/json',\r\n      accept: 'application/json',\r\n    }, \r\n  });\r\n\r\n\r\n\r\n  axiosInstance.interceptors.request.use(\r\n\tasync (config) => {\r\n\t  const token = localStorage.getItem(\"access_token\")\r\n\t  config.headers = {\r\n\t\tAuthorization: token ? `Bearer ${token}` : null,\r\n\t\tAccept: \"application/json\",\r\n\t\t\"Content-Type\": \"application/json\",\r\n\t  };\r\n\t  return config;\r\n\t},\r\n\t(error) => {\r\n\t  Promise.reject(error);\r\n\t}\r\n  );\r\n\r\n  const refreshAccessToken = async () => {\r\n\tconst token = localStorage.getItem(\"refresh_token\");\r\n\tconst res = await axiosInstance.post(\r\n\t  `${baseURL}/api/token/refresh/`, { refresh: token }\r\n\t);\r\n\treturn res.data.access;\r\n  };\r\n\r\n  axiosInstance.interceptors.response.use(\r\n\t(response) => {\r\n\t\treturn response;\r\n\t  },\r\n\t  async function (error) {\r\n\t\tconst originalRequest = error.config;\r\n\t\tif (error.response?.status === 401 && !originalRequest._retry) {\r\n\t\t  originalRequest._retry = true;\r\n\t\t  const access_token = await refreshAccessToken();\r\n\t\t  localStorage.setItem(\"access_token\", access_token);\r\n\t\t  axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + access_token;\r\n\t\t  return axiosInstance(originalRequest);\r\n\t\t}\r\n\t\treturn Promise.reject(error);\r\n\t  }); \r\n\r\n   \r\n \r\n\r\n\r\n  export default axiosInstance;\r\n","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Dashboard.tsx",["218","219"],"import React from \"react\";\r\nimport { Container, Row} from \"react-bootstrap\";\r\nimport { withRouter } from \"react-router\";\r\nimport Sidebarr from \"./Sidebarr\";\r\nimport './Sidebarr.css'\r\nimport { Route, Switch } from \"react-router\";\r\nimport AuditReport from \"./AuditReport\";\r\nimport CompanyDetails from \"./CompanyDetails\";\r\nimport ManageUser from \"./ManageUser\";\r\nimport UserInformation from \"./UserInformation\";\r\nimport ViewKeys from \"./ViewKeys\";\r\nimport ViewKeysGroup from \"./ViewKeysGroup\";\r\nimport EditUserInformation from \"./EditUserInformation\";\r\nimport ViewKeysD from \"./ViewKeysDetails\";\r\nimport AuditKeys from \"./AuditKeys\";\r\nimport AddNewUser from \"./AddNewUser\";\r\nimport Accounting from \"./Accounting\";\r\nimport Quotations from \"./Quotations\";\r\nimport ServiceRequest from \"./ServiceRequest\";\r\nimport CompanyDetailsSummary from \"./CompanyDetailsSummary\";\r\nimport SystemNumber from \"./SystemNumber\";\r\nimport NotFound from \"../NotFound\";\r\n\r\nconst Dash = () => {\r\n    return (\r\n        <>\t\t\r\n        <section className=\"mainblock\">\r\n            <Sidebarr />\r\n\r\n\t\t\t<section className=\"overview\">\r\n\t\t\t\t<div className=\"container-fluid\">\r\n                                <Switch>\r\n                                    <Route path='/home/companydetails' component={CompanyDetails} />\r\n                                    <Route path='/home/userinformation' component={UserInformation} />\r\n                                    <Route path='/home/accounting' component={Accounting} />\r\n                                    <Route path='/home/estimations' component={Quotations} />\r\n                                    <Route path='/home/servicerequest' component={ServiceRequest} />\r\n                                    <Route path='/home/viewkeys' component={ViewKeys} />\r\n                                    <Route path='/home/viewkeysgroup' component={ViewKeysGroup} />\r\n                                    <Route path='/home/auditkeys' component={AuditKeys} />\r\n                                    <Route path='/home/auditreport' component={AuditReport} />\r\n                                    <Route path='/home/manageuser' component={ManageUser} />\r\n                                    <Route path='/home/edituserinformation' component={EditUserInformation} />\r\n                                    <Route path='/home/viewkey-details' component={ViewKeysD} />\r\n                                    <Route path='/home/addnewuser' component={AddNewUser} />\r\n                                    <Route path='/home/companydetailssummary' component={CompanyDetailsSummary} />\r\n                                    <Route path='/home/systemnumber' component={SystemNumber} />\r\n                                    <Route path='*' component={NotFound} />\r\n                                </Switch>\r\n                        </div>\r\n                    </section>\r\n            </section>\r\n        </>\r\n    );\r\n};\r\nconst Dashboard = withRouter(Dash);\r\nexport default Dashboard;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Sidebarr.tsx",["220","221","222","223","224","225","226","227","228","229","230","231","232","233"],"import React, { useEffect, useState } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Nav} from \"react-bootstrap\";\r\nimport './Sidebarr.css';\r\nimport accounting from '../icons/invoice.svg';\r\nimport estimates from '../icons/estimates.svg';\r\nimport service from '../icons/repairing-service.svg';\r\nimport manageUser from '../icons/profile.svg';\r\nimport manager from '../icons/manager.svg';\r\nimport audit from '../icons/shopping-list.svg';\r\nimport keys from '../icons/keys.svg';\r\nimport company from '../icons/location.svg';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport logouticon from '../icons/log-out.svg';\r\n\r\nlet Sidebarr =()=> {\r\n    const history = useHistory();\r\n    const [username, setUsername] = useState<any>('');\r\n    const [active, setActive] = useState<any>(false);\r\n    \r\n    useEffect(()=>{\r\n        let username = localStorage.getItem('username');\r\n        setUsername(username);\r\n    },[]);\r\n\r\n    let checkActive = () => {\r\n      setActive(!active)\r\n    }\r\n\r\n    const changepassword = () =>{\r\n        history.push('/changepassword');\r\n    }\r\n    \r\n      return (\r\n        <section className=\"sidebar-left-main\">\r\n          <div className=\"sidebar-left\">\r\n            <a href=\"#\" className=\"action-btn\">\r\n              <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></a>\r\n            <ul>\r\n              <li className={\"\" + ((window.location.pathname===\"/home/accounting\")? \"active\" : \"\")}>\r\n                { (localStorage.getItem('invoice')=== 'false' || localStorage.getItem('quotes')=== 'false')   ? <a href=\"#\" ><img className='sideicons' alt=\"sidebar\" src={accounting}/>\r\n                      Pay Bills</a> : <NavLink  to=\"/home/accounting\" ><img className='mr-3' alt=\"sidebar\" src={accounting}/>\r\n                      Pay Bills</NavLink>}\r\n              </li>\r\n              <li className={\"\" + ((window.location.pathname===\"/home/estimations\")? \"active\" : \"\")}>\r\n              { (localStorage.getItem('invoice')=== 'false' || localStorage.getItem('quotes')=== 'false')   ? <a href=\"#\" ><img className='sideicons' alt=\"sidebar\" src={estimates}/>\r\n                      Estimations</a> : <NavLink  to=\"/home/estimations\" ><img className='mr-3' alt=\"sidebar\" src={estimates}/>\r\n                      Estimations</NavLink>}\r\n              </li>\r\n              <li className={\"\" + ((window.location.pathname===\"/home/servicerequest\")? \"active\" : \"\")}>\r\n                <NavLink  to=\"/home/servicerequest\"><img className='mr-3' alt=\"sidebar\" src={service}/>\r\n                      Request Service</NavLink>\r\n              </li>\r\n              <li onClick={checkActive} className={\"inner \" + (([\"/home/viewkeys\",\"/home/viewkeysgroup\",\"/home/auditkeys\"].includes(window.location.pathname)||active===true) ? \"active\" : \"\")}>\r\n                { localStorage.getItem('key_finder')=== 'true'?\r\n                  <>\r\n                    <a className=\"has-content\" href=\"#\" ><img className=\"mr-3\" src={keys}/>\r\n                      Manage Keys\r\n                    </a>\r\n \r\n                    <ul >\r\n                      <li className={\"\" + ((window.location.pathname===\"/home/viewkeys\")? \"active\" : \"\")}>\r\n                        <NavLink  to=\"/home/viewkeys\"><img className='mr-3' alt=\"sidebar\" src={keys}/>\r\n                          Manage Keys\r\n                        </NavLink>\r\n                      </li>\r\n                      <li className={\"\" + ((window.location.pathname===\"/home/viewkeysgroup\")? \"active\" : \"\")}>\r\n                        <NavLink to=\"/home/viewkeysgroup\"><img className='mr-3' alt=\"sidebar\" src={keys}/>\r\n                          Manage Keys Group\r\n                        </NavLink>\r\n                      </li>\r\n                      <li className={\"\" + ((window.location.pathname===\"/home/auditkeys\")? \"active\" : \"\")}>\r\n                        <NavLink  to=\"/home/auditkeys\">\r\n                          Audit Keys<span className=\"text-danger text-bold ml-2\">NEW</span>\r\n                        </NavLink>\r\n                      </li>\r\n                    </ul>\r\n                  </> : <>\r\n                    <a className=\"has-content\" href=\"#\"><img className='mr-3' alt=\"sidebar\" src={keys}/>\r\n                      Manage Keys\r\n                    </a>\r\n                    <ul className=\"inner\">\r\n                      <li>\r\n                        <a  href=\"#\"><img className='mr-3' alt=\"sidebar\" src={keys}/>\r\n                          Manage Keys\r\n                        </a>\r\n                      </li>\r\n                      <li>\r\n                        <a href=\"#\"><img className='mr-3' alt=\"sidebar\" src={keys}/>\r\n                          Manage Keys Group\r\n                        </a>\r\n                      </li>\r\n                      <li>\r\n                        <a  href=\"#\">\r\n                          Audit Keys<span className=\"text-danger text-bold ml-2\">NEW</span>\r\n                        </a>\r\n                      </li>\r\n                    </ul>\r\n                  </>\r\n                  }\r\n             </li>\r\n              <li className={\"\" + ((window.location.pathname===\"/home/auditreport\")? \"active\" : \"\")}>\r\n              { localStorage.getItem('audit')=== 'true'? <NavLink  to=\"/home/auditreport\"><img className='mr-3' alt=\"sidebar\" src={audit}/>\r\n                    Audit Trail</NavLink> : <a href=\"#\" style={{cursor:'not-allowed'}}><img className='sideicons' alt=\"sidebar\" src={audit}/>\r\n                    Audit Trail</a>}\r\n              </li>\r\n              <li className={\"\" + ((window.location.pathname===\"/home/companydetails\")? \"active\" : \"\")}> \r\n                 <NavLink   to=\"/home/companydetails\" ><img className='mr-3' alt=\"sidebar\" src={company}/>                \r\n                    Company Locations</NavLink>\r\n              </li>\r\n             \r\n           <li className={\"\" + ((window.location.pathname===\"/home/manageuser\")? \"active\" : \"\")}>\r\n              <NavLink  to=\"/home/manageuser\"><img className='mr-3' alt=\"sidebar\" src={manageUser}/>\r\n                    Manage Users</NavLink>\r\n              </li>\r\n           <li className={\"\" + ((window.location.pathname===\"/home/systemnumber\")? \"active\" : \"\")}>\r\n              { (localStorage.getItem('user_type')=== 'primary') ? <NavLink  to=\"/home/systemnumber\"><img className='mr-3' alt=\"sidebar\" src={manager}/>\r\n                    System Number</NavLink> : ''}\r\n            </li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"overly\"></div>\r\n\t\t  \t</section>\r\n      );\r\n    }\r\n  \r\n\r\n\r\nexport default Sidebarr;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\CompanyDetails.tsx",["234","235","236","237","238","239"],"import React, {useRef} from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './CompanyDetails.css';\r\nimport { useEffect } from 'react';\r\nimport axiosInstance from '../../api/api'\r\nimport { useState } from 'react';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport cancel from '../icons/cancel.svg';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport Modal from 'react-modal';\r\nimport { Toast } from 'primereact/toast';\r\nimport edit from '../icons/edit.svg';\r\nimport { Formik } from 'formik';\r\n\r\nconst customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      width                 : '32.25rem',\r\n    }\r\n  };\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\nlet CompanyDetails=()=> {\r\n  //let history = useHistory();\r\n  const initialFormData = Object.freeze({\r\n    offset: 0,\r\n    perPage: 10,\r\n    totalRecords: 0,\r\n    pageCount:0\r\n\r\n});\r\n  const [formData, setFormData]:any = useState(initialFormData);\r\n  const [data, setData] = useState([]);\r\n  const [tableData, setTableData] = useState([]);\r\n  const [loading, setLoading] = useState<any>(false);\r\n  const [cus_no, setCus_no] = useState<any>('');\r\n  const [last_name, setLast_name] = useState<any>('');\r\n  const [modalIsOpen, setmodalIsOpen] = useState<any>(false);\r\n  const [editLocation, seteditLocation] = useState<any>({});\r\n  const myToast: any = useRef(null);\r\n  const fetchDataAsync = async () => {\r\n    try {\r\n        setLoading(true);\r\n        const api = '/api/customer/company/details/';\r\n        let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n        setData(response.data.data);\r\n        let slice = response.data.data.slice(formData.offset, formData.offset + formData.perPage);\r\n        setFormData({...formData, pageCount: Math.ceil(response.data.data.length / formData.perPage), totalRecords: response.data.data.length});\r\n        setTableData(slice);\r\n        setCus_no(response.data.cus_no);\r\n        setLast_name(response.data.last_name);\r\n        if(!(data===null)){\r\n            setLoading(false);\r\n          }\r\n        return data;\r\n    }catch(error){\r\n        setLoading(false);\r\n        throw error;\r\n    }\r\n  }   ;\r\n\r\n  useEffect(() =>{\r\n     fetchDataAsync()\r\n  },[]);\r\n\r\n  const updateLocation =   (location: any, address: any) => {\r\n    const api = '/api/customer/company/update_details/'+editLocation.customer_no+'/'+editLocation.location_no;\r\n    let data= {location: location, address: address}\r\n    let response = axiosInstance.post(api,data).then((res: any) => {\r\n      if(res.error){\r\n        showToast('error', \"Error Message\",\"Location has not been updated\");\r\n        return 0\r\n      }\r\n      showToast('success', \"Success Message\",\"Location has been updated\");\r\n      fetchDataAsync();\r\n    }).catch(err => {\r\n      showToast('error', \"Error Message\",\"Location has not been updated\");\r\n    })\r\n    setmodalIsOpen(false);\r\n  }\r\n\r\n  const showToast = (severityValue: any, summaryValue: any, detailValue: any) => {   \r\n    myToast.current.show({severity: severityValue, summary: summaryValue, detail: detailValue});   \r\n  }\r\n\r\n  \r\n  const renderModal = () =>{ \r\n    return(\r\n        <>\r\n        <div style={{overflow:'hidden'}}>\r\n        <div style={{textAlign:'right'}} >\r\n           <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={closeModal} src={cancel}/>\r\n        </div>\r\n        <Formik\r\n          initialValues={{ location: editLocation.location, address: editLocation.address }}\r\n          validate={values => {\r\n            var errors: any = {}\r\n            if (!values.location) {\r\n              errors['location'] = 'Required';\r\n            }\r\n            if (!values.address) {\r\n              errors['address'] = 'Required';\r\n            }\r\n            return errors;\r\n          }}\r\n          onSubmit={(values, { setSubmitting }) => {\r\n            updateLocation(values.location, values.address)\r\n            setSubmitting(false);\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            isSubmitting,\r\n            /* and other goodies */\r\n          }) => (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label>Location</label>\r\n                <input type=\"location\" name=\"location\" \r\n                    className=\"form-control\"\r\n                    placeholder=\"Enter location\"\r\n                    onChange={handleChange}\r\n                    value={values.location}\r\n                  />\r\n                <small id=\"locationHelp\" className=\"form-text text-muted text-danger\">{errors.location}</small>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Address</label>\r\n                <input type=\"address\" name=\"address\" \r\n                    className=\"form-control\"\r\n                    placeholder=\"Enter address\"\r\n                    onChange={handleChange}\r\n                    value={values.address}\r\n                  />\r\n                <small id=\"addressHelp\" className=\"form-text text-muted text-danger\">{errors.address}</small>\r\n              </div>\r\n              <button type=\"submit\" className=\"btn btn-primary w-100\" disabled={errors.address != undefined || errors.location != undefined}>\r\n                Submit \r\n              </button>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n        </div>\r\n        </>\r\n    )\r\n  }\r\n\r\n  const noPermission = () =>{\r\n    showToast('error','Error Message',`You don't have permission`);\r\n  }\r\n\r\n  const location = (id: any) => {\r\n    var result  = tableData.filter(function(o: any){return o.location_no == id;} );\r\n    var foundLoc = result? result[0] : null\r\n    seteditLocation(foundLoc)\r\n    setmodalIsOpen(true)\r\n  }\r\n\r\n  \r\n  const closeModal = () =>{\r\n    setmodalIsOpen(false)\r\n  }\r\n\r\n  const onPageChange = (event:any) => {\r\n    let offset = event.first;\r\n    let perPage = event.rows;\r\n    setFormData({...formData , offset:offset, perPage:perPage})\r\n    let slice = data.slice(offset, offset + perPage);\r\n    setTableData(slice);\r\n}\r\n \r\n      return (\r\n        <>\r\n         <div>\r\n               {loading ?<div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div> : ''}\r\n                <Modal style={customStyles} isOpen={modalIsOpen} onRequestClose={closeModal}>{renderModal()}</Modal>\r\n                <Toast ref={myToast} /> \r\n                <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Company Locations</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>{last_name}</h6>\r\n                                        <h6>{cus_no}</h6>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n    \r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Locations\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 estimates-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      \r\n                                      <th scope=\"col\">Location Name</th>\r\n                                        <th scope=\"col\" className=\"text-center\">Address</th>\r\n                                        <th scope=\"col\" className=\"text-right pr-4\">Actions</th>\r\n                                        </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {tableData.map((item: any,i: any)=>{\r\n                                    return(\r\n                                        <>\r\n                                    <tr key={i}>\r\n                                    <td>{item.location}</td>\r\n                                    <td className=\"text-center\">{item.address}</td>\r\n                                    <td className=\"text-right general-btn\"  >\r\n                                        <button className=\"btn blue-btn\"  \r\n                                        onClick={(localStorage.getItem('service_request')=== 'true')? ()=>location(item.location_no) : noPermission}\r\n                                        >Update</button>\r\n                                    </td>\r\n                                    </tr>\r\n                                    \r\n                                    </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              <Paginator first={formData.offset} rows={formData.perPage} totalRecords={formData.totalRecords} rowsPerPageOptions={[10,20,30]} \r\n                                  template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                                  onPageChange={onPageChange}></Paginator>\r\n                                    \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n      );\r\n    }\r\n\r\nexport default CompanyDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AuditReport.tsx",["240"],"import React from 'react';\r\nimport './CompanyDetails.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axiosInstance from '../../api/api';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport { Calendar } from 'primereact/calendar';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport { Toast } from 'primereact/toast';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  data:any;\r\n  first_name:any;\r\n  last_name:any;\r\n  start_date:any;\r\n  end_date:any;\r\n  [key :string]:any;\r\n  currentPage:any;\r\n  rows:any;\r\n  first:any;\r\n  totalRecords:any;\r\n  loading : boolean;\r\n}\r\ninterface JQuery {\r\n  DataTable():void;\r\n}\r\nclass AuditReport extends React.Component<{},Props,JQuery> {\r\n  toast: React.RefObject<any>;\r\n\r\n   constructor(props:Props){\r\n     super(props);\r\n     this.toast = React.createRef();\r\n     this.state={\r\n       data:[],\r\n       first_name:\"\",\r\n       last_name:\"\",\r\n       start_date:\"\",\r\n       end_date:\"\",\r\n\r\n       currentPage: null,\r\n       totalPages: null,\r\n       rows:10,\r\n       totalRecords: null,\r\n       first: null,\r\n       loading : false,\r\n     }\r\n     \r\n   }\r\n\r\n   fetchedData = async(offset:any,limit:any) => {\r\n     this.setState({first_name:\"\",\r\n     last_name:\"\",\r\n     start_date:\"\",\r\n     end_date:\"\",});\r\n    try {\r\n      this.setState({loading : true});\r\n      const api = `/api/customer/audit/?limit=${limit}&offset=${offset}`;\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n      this.setState({data:response.data.results});\r\n\r\n      if(!(this.state.data === null))\r\n        {\r\n            this.setState({loading : false});\r\n            \r\n        }\r\n      \r\n      this.setState({totalRecords:response.data.count});\r\n      this.setState({totalPages: Math.ceil(response.data.count/this.state.limit)})\r\n      return this.state.data;\r\n  }catch(error){\r\n    this.setState({loading : false});\r\n      throw error;\r\n  }\r\n\r\n   }\r\n\r\n  componentDidMount= async()=>{\r\n    this.fetchedData(null,null);\r\n  }\r\n\r\n    handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n      let name = e.target.name;\r\n\r\n    let value = e.target.value;\r\n    this.setState({[name]:value});\r\n    \r\n};\r\n\r\n formValidation = () =>{\r\n  let isValid = true;\r\n    if(this.state.first_name === '' && this.state.last_name === '' && this.state.start_date === '' && this.state.end_date===''){\r\n      this.toast.current.show({severity: 'error',  detail: \"Please Enter the fields\"});\r\n    }else if(!(this.state.first_name === '')){\r\n       if(this.state.last_name===''){\r\n        this.toast.current.show({severity: 'error',  detail: \"Enter last name\"});\r\n        isValid = false;\r\n       }\r\n   }else if(!(this.state.last_name === '')){\r\n          if(this.state.first_name===''){\r\n            this.toast.current.show({severity: 'error',  detail: \"Enter first name\"});\r\n            isValid = false;\r\n          }\r\n      \r\n   }else if(!(this.state.start_date=== '')){\r\n        if(this.state.end_date===''){\r\n          this.toast.current.show({severity: 'error',  detail: \"Please enter Last Date\"});\r\n          isValid = false ;\r\n        }\r\n  }else if(!(this.state.end_date==='')){\r\n         if(this.state.start_date===''){\r\n          this.toast.current.show({severity: 'error',  detail: \"Please enter Start Date\"});\r\n          isValid = false ;\r\n         }\r\n  }\r\n  return isValid\r\n}\r\n\r\n   handleSubmit = async() => {\r\n    let isValid = this.formValidation();\r\n        if(isValid){\r\n    try {\r\n      this.setState({loading : true});\r\n      const api = `/api/customer/audit/?first_name=${this.state.first_name}&last_name=${this.state.last_name}&start_date=${this.state.start_date}&end_date=${this.state.end_date}`;\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n      if(response.data.count=== 0){\r\n        this.setState({loading : false});\r\n        this.toast.current.show({severity: 'error',  detail: \"No data found\"});\r\n        this.setState({data:response.data.results});\r\n      }else if(response.data.status===400){\r\n        this.setState({loading : false});\r\n        this.toast.current.show({severity: 'error',  detail: \"User does not exist\"});\r\n      }else if(!(response.data.results===0)){\r\n        this.setState({loading : false});\r\n        this.toast.current.show({severity: 'success',  detail: \"Successfully Searched\"});\r\n        this.setState({data:response.data.results});\r\n        this.setState({totalRecords:response.data.count});\r\n      }\r\n      \r\n      return this.state.data;\r\n  }catch(error){\r\n      this.setState({loading : false});\r\n      this.toast.current.show({severity: 'error',  detail: \"Status 500\"});\r\n      throw error;\r\n  }\r\n  }\r\n  }\r\n\r\n\r\n  onPageChange = (event:any) => {\r\n    this.setState({first:event.first,rows:event.rows});\r\n    this.fetchedData(event.first,event.rows);\r\n}\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <>\r\n        <div>\r\n          {this.state.loading ? <div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div>:''}\r\n        <Toast ref={this.toast} />\r\n        <section className=\"overview\">\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12\">\r\n                        <h6 className=\"over-text\">Audit Trail</h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section className=\"filter-pannel\">\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12\">\r\n                        <div className=\"filter-pannel-inner  justify-content-between flex-wrap\">\r\n                            <form>\r\n                                <div className=\"form-row\">\r\n                                    <div className=\"form-group col-md-4\">\r\n                                        <label>Search By First Name</label>\r\n                                        <input type=\"text\" className=\"form-control\"\r\n                                         value={this.state.first_name} onChange={this.handleInputChange}\r\n                                          id=\"inputEmail4\" name=\"first_name\" placeholder=\"Enter First Name\" />\r\n                                    </div>\r\n                                    <div className=\"form-group col-md-4\">\r\n                                        <label >Search By Last Name</label>\r\n                                        <input type=\"text \" className=\"form-control\" id=\"inputPassword4\"\r\n                                            placeholder=\"Enter Last Name\"\r\n                                            name=\"last_name\"\r\n                                            value={this.state.last_name} onChange={this.handleInputChange} />\r\n                                    </div>\r\n                                    <div className=\"form-group col-md-2\">\r\n                                        <label >Start Date</label>\r\n                                        <input type=\"date\" className=\"form-control\" id=\"inputPassword4\"\r\n                                         value={this.state.start_date} onChange={(e:any) => {\r\n                                           this.setState({start_date:new Date(e.target.value).toLocaleDateString(\"fr-CA\")})}}\r\n                                            placeholder=\"Password\" />\r\n                                    </div>\r\n                                    <div className=\"form-group col-md-2\">\r\n                                        <label >End Date</label>\r\n                                        <input type=\"date\"\r\n                                        value={this.state.end_date} onChange={(e:any) => this.setState({end_date:new Date(e.target.value).toLocaleDateString(\"fr-CA\")})}\r\n                                         className=\"form-control\" id=\"inputPassword4\"\r\n                                            placeholder=\"Password\"/>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                            <div className=\"filter-pannel-btn d-flex justify-content-end flex-wrap\">\r\n                                <button className=\"btn\" onClick={()=> this.fetchedData(null,null)} >Reset</button>\r\n                                <button className=\"btn ml-2\" onClick={this.handleSubmit}>Search</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </section>\r\n         \r\n        <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Audit trails\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 estimates-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                    <tr >\r\n                                      <th>User Name</th>\r\n                                      <th>Modified Date</th>\r\n                                      <th>Action Performed By User</th>\r\n                                    </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {this.state.data.map((item: any,i: any)=>{\r\n                                      let date = new Date(item.date).toLocaleDateString(\"fr-CA\")\r\n                                    \r\n                                    return(\r\n                                        <>\r\n                                    <tr key={i}>\r\n                                    <td>{item.username}</td>\r\n                                    <td>{date}</td>\r\n                                    <td>{item.modifications}</td>\r\n                                  </tr>\r\n                                    </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                            \r\n                        <Paginator className=\"paginator\" first={this.state.first} rows={this.state.rows} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10, 20, 30]} \r\n                                template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \" \r\n                                onPageChange={this.onPageChange}  ></Paginator>      \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>           \r\n            \r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AuditReport;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\UserInformation.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeys.tsx",["241","242","243","244","245","246","247","248","249","250"],"import React from 'react';\r\nimport ViewKeysDetails from './ViewKeysDetails';\r\nimport image from '../icons/pdf-1.svg';\r\nimport csv from '../icons/csv.svg';\r\nimport schedule from '../icons/schedule.svg';\r\nimport warning from '../icons/warning.svg';\r\nimport brokenkey from '../icons/BrokenKey.svg';\r\nimport questionmark from '../icons/questionmark.svg';\r\nimport csv1 from '../icons/csv1.svg';\r\nimport shopping from '../icons/shoppingcart.svg';\r\nimport axiosInstance , {baseURL} from '../../api/api';\r\nimport  jsPDF from \"jspdf\";\r\nimport 'jspdf-autotable';\r\nimport cancel from '../icons/cancel.svg';\r\nimport { autoTable } from 'jspdf-autotable';\r\nimport { CSVLink } from \"react-csv\";\r\nimport { Paginator } from 'primereact/paginator';\r\nimport Select from \"react-select\";\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Modal from 'react-modal';\r\nimport KeyRequest from './KeyRequest';\r\nimport { Toast } from 'primereact/toast';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  edit:boolean;\r\n  data:any;\r\n  view:any;\r\n  currentuser:any;\r\n  showDetails: any;\r\n  requestedItem: any;\r\n  isSelected:any;\r\n  file:any;\r\n  files:any;\r\n  limit:any;\r\n  offset:any;\r\n  totalRecords:any;\r\n  loading : boolean;\r\n  modalIsOpen : boolean;\r\n  door_compromised:any;\r\n  currentItem: any;\r\n  csvTable:any;\r\n}\r\n\r\nclass ViewKeys extends React.Component<{},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n  constructor(props:Props){\r\n    super(props);\r\n    this.toast = React.createRef();\r\n\r\n    this.state={\r\n      showDetails: false,\r\n      requestedItem: '',\r\n      edit:false,\r\n      data:[],\r\n      view:[],\r\n      csvTable:[],\r\n      currentuser:[],\r\n      isSelected: '',\r\n      file:[] as any,\r\n      files:[] as any,\r\n      loading : false,\r\n      modalIsOpen:false,\r\n      door_compromised:'',\r\n      currentItem: '',\r\n      limit:10,\r\n      offset: null,\r\n      totalRecords:null\r\n    }}\r\n    \r\n    customStyles = {\r\n      content : {\r\n        top                   : '50%',\r\n        left                  : '50%',\r\n        right                 : 'auto',\r\n        bottom                : 'auto',\r\n        marginRight           : '-20%',\r\n        transform             : 'translate(-50%, -50%)',\r\n        width                 : '50rem',\r\n        height                : '37.5rem'\r\n      }\r\n    };\r\n\r\n    /* exportPDF = async() => {\r\n\r\n      try {\r\n        this.setState({loading : true});\r\n        const api = `kdfinder/keys/all/?file_number=${this.state.isSelected}`;\r\n        let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n      const unit = \"pt\";\r\n      const size = \"A4\"; // Use A1, A2, A3 or A4\r\n      const orientation = \"portrait\"; // portrait or landscape\r\n      const marginLeft = 40;\r\n      const doc = new jsPDF(orientation, unit, size);\r\n      doc.setFontSize(15);\r\n  \r\n      const title = \"View Keys\";\r\n      const headers = [[\"Key ID Stamp\", \"Key Description\",\"QTY Cut\"]];\r\n      const data = response.data.data.map((item:any)=> [item.key_id, item.key_description,item.quantity]);\r\n  \r\n      let content = {\r\n        startY: 50,\r\n        head: headers,\r\n        body: data\r\n      };\r\n      doc.text(title, marginLeft, 40);\r\n      (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n      doc.save(\"report.pdf\");\r\n      this.setState({loading : false});\r\n    }catch(error){\r\n      this.setState({loading : false});\r\n        throw error;\r\n    }\r\n    }; */\r\n\r\n\r\n    /* exportPDFsequence = (sequence:any) => {\r\n      const unit = \"pt\";\r\n      const size = \"A4\"; // Use A1, A2, A3 or A4\r\n      const orientation = \"portrait\"; // portrait or landscape\r\n      const marginLeft = 40;\r\n      const doc = new jsPDF(orientation, unit, size);\r\n      doc.setFontSize(15);\r\n  \r\n      const title = \"View Keys\";\r\n      const headers = [[\"Key ID Stamp\", \"Tenant\",\"First/Last Name\",\"Phone\",\"Email ID\",\"Issue Date\"]];\r\n      const data = sequence.map((item:any)=> [item.key_id, item.tenant_location, item.key_holder, item.phone, item.email, item.date_issued]);\r\n  \r\n      let content = {\r\n        startY: 50,\r\n        head: headers,\r\n        body: data\r\n      };\r\n      doc.text(title, marginLeft, 40);\r\n      (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n      doc.save(\"sequence.pdf\");\r\n    }; */\r\n    fetchedData= async(offset:any,limit:any,fn:any) => {\r\n      try {\r\n        this.setState({loading : true});\r\n        const api = `/api/kdfinder/keys/?file_number=${fn}&limit=${limit}&offset=${offset}`;\r\n        let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n        this.setState({data:response.data.results.data.map((obj:any)=>{\r\n          return({...obj, showDetails: false\r\n          })\r\n        })});\r\n        if(!(this.state.data.length === 0))\r\n                {\r\n                    this.setState({loading : false});\r\n                }else {\r\n                  this.setState({loading : false});\r\n                  this.toast.current.show({severity: 'error',  detail: 'No record found'});\r\n                }\r\n        this.setState({currentuser:response.data.results.current_user});\r\n        this.setState({totalRecords:response.data.count});\r\n        this.setState({files: response.data.results.file_numbers })\r\n        this.setState({file:response.data.results.file_numbers.map((item: any)=>{ \r\n          return (\r\n          { label: item.file_number + \" \" +(item.location ? item.location : ''),  value: item.id}\r\n          )\r\n        })});\r\n        if(this.state.isSelected===''){\r\n        }\r\n        return this.state.data;\r\n    }catch(error){\r\n      this.setState({loading : false});\r\n        throw error;\r\n    }\r\n    }\r\n\r\n    \r\n\r\n  componentDidMount = () =>{\r\n       this.fetchedData(null,null,'all');\r\n    }\r\n\r\n  details=(item:any,id1:any)=> {\r\n    //this.setState({loading:true});\r\n    const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n      if(i===id1){\r\n        obj.showDetails = true;\r\n      }else{\r\n        obj.showDetails = false;\r\n      }\r\n      return {...obj}\r\n      });\r\n   this.setState({data:updatedData});\r\n   this.setState({edit:true});\r\n   this.setState({view:item.sequence, currentItem: item});\r\n   this.setState({door_compromised: item.door_compromised});\r\n  }\r\n\r\n  colourStyles ={\r\n    option: (provided:any) => ({\r\n      ...provided,\r\n      backgroundColor: this.state.isSelected ? 'white' : 'white',\r\n      cursor: 'pointer',\r\n      color: this.state.isSelected ? 'black' : 'black',\r\n      \"&:hover\": {\r\n        backgroundColor: \"#ccc\"\r\n      }\r\n    }),\r\n    control: (styles:any) => ({\r\n      ...styles,\r\n      cursor: 'pointer',\r\n      \r\n    }),\r\n  }\r\n   \r\n  handleChange = (e:any) => {\r\n    var item = this.state.files.find((i: any)=> i.id == e.target.value)\r\n    this.fetchedData(null,null,item.file_number);\r\n    this.setState({isSelected:item});\r\n  }\r\n\r\n  cancel(id:any) {\r\n    const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n        if(i===id){\r\n          obj.showDetails = false;\r\n        }\r\n        return {...obj}\r\n    })\r\n    this.setState({data: updatedData,edit:false});\r\n    this.fetchedData(null,null,'all');\r\n   }\r\n\r\n   load = ()=>{\r\n    this.setState({loading:false});\r\n   }\r\n   \r\n   loadc = ()=>{\r\n    this.setState({loading:true});\r\n   }\r\n  renderEditForm=(show:any,id:any)=>{\r\n    if(show){\r\n      return(\r\n        <>\r\n          <tr style={{height:\"0px\"}}>\r\n              <td colSpan={4} className=\"p-0 m-0\">\r\n              <div className=\"accordian\"> \r\n                    <div className=\"col-12\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Key Holder Informations</p>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                    <span className=\"detail-created\" onClick={()=>this.cancel(id)} >Close</span>\r\n                                </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ViewKeysDetails loadc={this.loadc} load={this.load} viewdata={this.state.view}/>\r\n              </td>\r\n          </tr>\r\n       </>\r\n      )\r\n    }\r\n  }   \r\n\r\n  renderEdit=()=>{\r\n    if(this.state.edit){\r\n      return(\r\n        <>\r\n       <div className=\"row\">\r\n          <div className=\"col-2\" >\r\n\r\n            </div>\r\n\r\n            <div className=\"col-10\">\r\n              <button style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\", height:\"3.875rem\",width:\"9.063rem\"}}  type=\"button\" className=\"btn btn-outline-info\"><img style={{marginTop:\"0.438rem\",marginRight:\"0.5rem\",width:'32%'}} alt=\"schedule\" src={schedule}/>Schedule<span style={{marginTop:\"-1.125rem\",marginRight:\"-2.25rem\",display:\"block\"}}> Service</span></button>\r\n              <a style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\",height:\"3.875rem\",width:\"10.25rem\"}} \r\n                    className=\"btn btn-outline-success\">\r\n                    <img style={{marginTop:\"0.438rem\",marginRight:\"0.5rem\",marginLeft:\"-.25rem\",width:'20%'}} alt=\"csv\" src={csv}/>\r\n                    Export System <span style={{marginTop:\"-1.125rem\",marginRight:\"2.25rem\",display:\"block\"}}>CSV </span>\r\n              </a>\r\n              <a  style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\",marginRight:\"-3.125rem\",height:\"3.875rem\",width:\"11.813rem\"}} type=\"button\" className=\"btn btn-outline-danger\"><img style={{marginTop:\"0.438rem\",marginRight:\"1px\",marginLeft:\"-1px\",width:'17%'}} alt=\"pdf\" src={image}/> Download System<span style={{marginTop:\"-1.125rem\",marginRight:\"3.875rem\",display:\"block\"}}> PDF</span></a>                   \r\n            </div>\r\n          <div className=\"col-md-12 aling-items-end justify-content-end d-flex mt-2\">\r\n            {this.renderkeys()}\r\n          </div>\r\n        </div>\r\n       </>\r\n      )\r\n    }else{\r\n      return(\r\n        <>\r\n        <div className=\"row\">\r\n          <div className=\"col-2\">\r\n\r\n          </div>\r\n          <div className=\"col-10\">\r\n              <button style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\", height:\"3.875rem\",width:\"9.063rem\"}}  type=\"button\" className=\"btn btn-outline-info\"><img style={{marginTop:\"0.438rem\",marginRight:\"0.5rem\",width:'32%'}} alt=\"schedule\" src={schedule}/>Schedule<span style={{marginTop:\"-1.125rem\",marginRight:\"-2.25rem\",display:\"block\"}}> Service</span></button>\r\n              <a href={`${baseURL}/api/kdfinder/csv/key-qty/${this.state.currentuser.id}/${this.state.isSelected.file_number}/`} style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\",height:\"3.875rem\",width:\"10.25rem\"}} \r\n                    className=\"btn btn-outline-success\">\r\n                    <img style={{marginTop:\"0.438rem\",marginRight:\"0.5rem\",marginLeft:\"-.25rem\",width:'20%'}} alt=\"csv\" src={csv}/>\r\n                    Export System <span style={{marginTop:\"-1.125rem\",marginRight:\"2.25rem\",display:\"block\"}}>CSV </span>\r\n              </a>\r\n              <a href={`${baseURL}/api/kdfinder/pdf/key-qty/${this.state.currentuser.id}/${this.state.isSelected.file_number}/`} style={{marginTop:\"1.25rem\",marginLeft:\"0.938rem\",marginRight:\"-3.125rem\",height:\"3.875rem\",width:\"11.813rem\"}} type=\"button\" className=\"btn btn-outline-danger\"><img style={{marginTop:\"0.438rem\",marginRight:\"1px\",marginLeft:\"-1px\",width:'17%'}} alt=\"pdf\" src={image}/> Download System<span style={{marginTop:\"-1.125rem\",marginRight:\"3.875rem\",display:\"block\"}}> PDF</span></a>                   \r\n            \r\n          </div>\r\n          <div className=\"col-12 aling-items-end justify-content-end d-flex mt-2\" >\r\n            <div className=\"col-\"></div>\r\n            <div className=\"col-4\">\r\n                <Select\r\n                    values={this.state.isSelected.file_number}\r\n                    onChange={this.handleChange }\r\n                    className=\"dropdown\"\r\n                    options={this.state.file}\r\n                    placeholder={this.state.isSelected.system_name}\r\n                    styles={this.colourStyles}\r\n                    isSearchable\r\n                />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </>\r\n      )\r\n    }\r\n  }   \r\n\r\n  \r\n\r\n  renderkeys=()=>{\r\n    if(this.state.edit){\r\n      return(\r\n        <>\r\n       <div className=\"p-0\">\r\n              <img alt=\"broken\" style={{width:'1rem'}} src={brokenkey}/><span style={{marginLeft:\"0.75rem\",color:\"#0D93C9\"}}>Broken key</span>\r\n              <img alt=\"questionmark\" style={{marginLeft:\"1rem\",width:'0.6rem'}} src={questionmark}/><span style={{marginLeft:\"0.75rem\",marginRight:\"2.5rem\",color:\"#FF6B6B\"}}>Key Lost</span>\r\n        </div>\r\n       </>\r\n      )\r\n    }else{\r\n      return(\r\n        <>\r\n        </>\r\n      )\r\n    }\r\n  }   \r\n\r\n  modal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n  }\r\n\r\n  addToast=(mes:any)=>{\r\n    this.toast.current.show({severity: 'success', detail: mes});\r\n  }\r\n  changeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n  }\r\n\r\n  renderModal = () =>{\r\n    return( \r\n      <>\r\n      <div style={{textAlign:'right'}}>\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n                </div>\r\n    <KeyRequest modal={this.modal}  addtoast={this.addToast} keyCode={this.state.requestedItem ? this.state.requestedItem.key_id : \"\"} />\r\n    </>\r\n    )\r\n  }\r\n\r\n  request = (item: any) => {\r\n    debugger\r\n    this.setState({modalIsOpen:true , requestedItem: item});\r\n  }\r\n\r\n  onPageChange = (event:any) => {\r\n\r\n    this.setState({offset:event.first,limit:event.rows});\r\n    this.fetchedData(event.first,event.rows,this.state.isSelected.file_number);\r\n}\r\n\r\ncloseModal = () =>{\r\n  this.setState({modalIsOpen:false});\r\n}\r\n  \r\n  \r\n  render(){\r\n    \r\n  const lastLoginDate  = this.state.currentuser.last_login? new Date(this.state.currentuser.last_login).toLocaleDateString(): '';\r\n  const lastUpdatedDate = this.state.currentuser.last_modified? new Date(this.state.currentuser.last_modified).toLocaleDateString(): \"\";\r\n\r\n      return (\r\n        <>\r\n          <div>\r\n          {\r\n            this.state.loading  ? <div className='overlay-box1'>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n        </div> :''\r\n          }\r\n          <Toast ref={this.toast} />\r\n                <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n        <section className=\"overview\">\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12\">\r\n                        <h6 className=\"over-text\">Manage Keys</h6>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <section className=\"filter-pannel\">\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12\">\r\n                        <div className=\"filter-pannel-inner \">\r\n                            <div className=\"filter-inner-header d-flex justify-content-between flex-wrap\">\r\n                                <div>\r\n                                    <h6>{this.state.currentuser.first_name} {this.state.currentuser.last_name}</h6>\r\n                                    <h6>Your last log in was on : {lastLoginDate}</h6>\r\n                                </div>\r\n                                <div className=\"form-group mb-2 w-40\">\r\n                                  <div className=\"d-flex\">\r\n                                    <div className=\"mr-4 mt-2 text-center\">\r\n                                    { \r\n                                      this.state.edit && this.state.door_compromised > 0 ?\r\n                                        <> <img className=\"mr-4\" style={{width: '30px', padding: 0,marginBottom: '4px'}} alt=\"warning\" src={warning}/><br></br><span style={{fontWeight: 900,\r\n                                          fontSize: '13px',\r\n                                          color: 'red'}}>{this.state.door_compromised} Door Compromised</span></>\r\n                                      : ''\r\n                                    }\r\n                                    </div>\r\n                                      <div>\r\n                                        <label >Filter By:</label>\r\n                                        <select className=\"form-control filter-form-control\"\r\n                                          onChange={this.handleChange} \r\n                                          id=\"exampleFormControlSelect1\">\r\n                                            {this.state.file.map((option: any)=>(\r\n                                              <option value={option.value} selected={this.state.isSelected == option.value}>{option.label}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                      </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                              <div className=\"col-md-6\">\r\n                                                      \r\n                                <div className=\"col-md-12 row d-flex mt-2\">\r\n                                  \r\n                                  {this.renderkeys()}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"col-md-6\">\r\n                              <div className=\"filter-pannel-btn d-flex justify-content-end flex-wrap mt-3\">\r\n                                <button className=\"btn mb-1\">Schedule Service</button>\r\n                                <button className=\"btn ml-2 mb-1\" \r\n                                  onClick={() => window.open(`${baseURL}/api/kdfinder/csv/key-qty/${this.state.currentuser.id}/${this.state.isSelected.file_number}/`, '_blank')} \r\n                                  >Export System CSV</button>\r\n                                <button className=\"btn ml-2 mb-1\"\r\n                                 onClick={() => window.open(`${baseURL}/api/kdfinder/pdf/key-qty/${this.state.currentuser.id}/${this.state.isSelected.file_number}/`, '_blank')}\r\n                                >Download System PDF</button>\r\n                            </div>\r\n                              </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </section>\r\n        <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Keys\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 manage-key-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      <th data-visible=\"true\" >Key ID Stamp</th>\r\n                                      <th>Key Description</th>\r\n                                      <th className=\"text-center\">QTY Cut</th>\r\n                                      <th className=\"text-center pr-4\">Actions</th>\r\n                                      </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {this.state.data.map((item: any,i: any)=>{\r\n                                    return(\r\n                                        <>\r\n                                    <tr key={i}>\r\n                                    <td className=\"primary-text\"><span onClick={()=>this.details(item,i)} >{item.key_id}</span></td>\r\n                                    <td>{item.key_description}</td>\r\n                                    <td className=\"text-center\">{item.quantity}</td>\r\n                                    <td className=\"text-right general-btn\">\r\n                                      \r\n                                        <button onClick={() => this.request(item)} className=\"btn blue-btn manage-btn mb-1\">View Cart</button>\r\n                                        <button\r\n                                          onClick={() => window.open(`${baseURL}/api/kdfinder/csv/key-sequence/${this.state.currentuser.id}/${this.state.isSelected.file_number}/${item.id}/`, '_blank')} \r\n                                          className=\"btn blue-btn manage-btn mb-1\">Export CSV</button>\r\n                                        <button \r\n                                          onClick={() => window.open(`${baseURL}/api/kdfinder/pdf/key-sequence/${this.state.currentuser.id}/${this.state.isSelected.file_number}/${item.id}/`, '_blank')} \r\n                                          className=\"btn blue-btn manage-btn mb-1\">Download PDF</button>\r\n\r\n                                    </td>\r\n                                  \r\n                                    </tr>\r\n                                    {this.renderEditForm(item.showDetails,i)}\r\n                                    \r\n                                    </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              <Paginator first={this.state.offset} rows={this.state.limit} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10, 20, 30]} \r\n                                template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                                onPageChange={this.onPageChange}></Paginator>\r\n                            \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n             \r\n                     </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\nexport default ViewKeys;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ManageUser.tsx",["251","252","253","254","255","256"],"import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axiosInstance from '../../api/api';\r\nimport edit1 from '../icons/edit.svg';\r\nimport save from '../icons/floppy-disk.svg';\r\nimport Select from 'react-select';\r\nimport 'primereact/resources/themes/saga-blue/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport AddNewUser from './AddNewUser';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\nlet ManageUser =()=>{\r\n  let history = useHistory();\r\n  const toast: any = useRef();\r\n\r\n  const initialFormData = Object.freeze({\r\n        user:null,\r\n        key_finder:false,\r\n        service_request:false,\r\n        inv_statements:false,\r\n        quotes: false,\r\n        hs_signatory:false,\r\n        add_user:false,\r\n        audit:false,\r\n});\r\nconst initialFormData1 = Object.freeze({\r\n  first_name:\"\",\r\n  last_name:\"\",\r\n  phone:\"\",\r\n});\r\nconst [formData, setFormData]:any = useState(initialFormData);\r\nconst [formData1, setFormData1]:any = useState(initialFormData1);\r\n//const [file, setFile] = useState<any>([1]);\r\nconst [addnewuser, setAddnewuser] = useState<any>(false);\r\nconst [offset, setOffset] = useState<any>(0);\r\nconst [limit, setLimit] = useState<any>(10);\r\nconst [totalRecords, setTotalRecords] = useState<any>(0);\r\nconst [currentuser, setCurrentuser] = useState<any>([]);\r\nconst [current_user_access, setCurrent_user_access] = useState<any>({});\r\nconst [file_numbers,setFile_numbers] = useState<any>([]);\r\nconst [add_user, setAdd_user] = useState<any>([]);\r\nconst [selected, setSelected] = useState<any>([]);\r\nconst [loading, setLoading] = useState<any>(false);\r\n\r\n  const [data, setData] = useState<any>([]);\r\n // const [edit, setEdit] = useState(false);\r\n\r\n  const handleChange = (event:any) => {\r\n    setSelected(Array.isArray(event) ? event.map(x => x.value) : []);\r\n  };\r\n\r\n  const options = file_numbers.map((item: any,i: any)=>{ \r\n    return (\r\n    { label: item.file_number+\"-\"+item.location, value: item.id})\r\n     });\r\n\r\n  const handleCheckboxChange = (e: { target: { name: any; checked:any;} }) =>{\r\n    let name = e.target.name;\r\n    let checked = e.target.checked;\r\n    setFormData({...formData,[name]:checked});\r\n   };\r\n\r\n   const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n    let name = e.target.name;\r\n    let value = e.target.value;\r\n    setFormData1({...formData1,[name]:value});\r\n    \r\n};\r\n\r\nconst handleCheckboxSlider = (e: { target: { name: any; checked:any;} },item:any) =>{\r\n    let id = item.useraccess.user;\r\n    axiosInstance\r\n      .patch(`/api/customer/manage/user/${id}/`,\r\n              { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n        if(res.data.data.is_active===false){\r\n          toast.current.show({severity: 'success', detail: 'User Disabled'});\r\n        }else {\r\n          toast.current.show({severity: 'success', detail: 'User Enabled'});\r\n        }\r\n        \r\n\t\t\t});\r\n};\r\n\r\n   \r\n  let editdetails=(item:any,id:any)=> {\r\n    const updatedData = data.map((obj:any,i:number)=>{\r\n      if(i===id){\r\n        obj.showDetails = true;\r\n      }else{\r\n        obj.showDetails = false;\r\n      }\r\n      return {...obj}\r\n      });\r\n    setData(updatedData);\r\n    setFormData({...formData,...item.useraccess});\r\n    setFormData1({...formData1,first_name:item.first_name,last_name:item.last_name,phone:item.phone,is_active:item.is_active});\r\n    //setFile(item.file_numbers);\r\n    setSelected(item.file_numbers);\r\n   }\r\n\r\n   const onUpdate = (e:any,id:any)=>{\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    axiosInstance\r\n\t\t\t.put(`/api/customer/manage/user/${formData.user}/`, {\r\n                 first_name: formData1.first_name,\r\n                 last_name:formData1.last_name,\r\n                 phone: formData1.phone,\r\n                 file_numbers:selected,\r\n                 useraccess:\r\n                 {\r\n                  key_finder: formData.key_finder,\r\n                  service_request: formData.service_request,\r\n                  inv_statements:formData.inv_statements,\r\n                  quotes: formData.quotes,\r\n                  hs_signatory:formData.hs_signatory,\r\n                  add_user:formData.add_user,\r\n                  audit:formData.audit\r\n                } ,\r\n                method: \"put\"\r\n            },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n        setLoading(false);\r\n        let node = toast.current;\r\n        if(res.data.status===200){\r\n          if(node){\r\n             node.show({severity: 'success',  detail: 'User Updated Successfully'});\r\n          }\r\n        const updatedData = data.map((obj:any,i:number)=>{\r\n          if(i===id){\r\n            obj.showDetails = false;\r\n            obj.first_name= formData1.first_name;\r\n            obj.last_name=formData1.last_name;\r\n            obj.phone= formData1.phone;\r\n            obj.file_numbers= selected;\r\n            obj.useraccess.key_finder= formData.key_finder;\r\n            obj.useraccess.service_request= formData.service_request;\r\n            obj.useraccess.inv_statements=formData.inv_statements;\r\n            obj.useraccess.quotes= formData.quotes;\r\n            obj.useraccess.hs_signatory=formData.hs_signatory;\r\n            obj.useraccess.add_user=formData.add_user;\r\n            obj.useraccess.audit=formData.audit;\r\n          }\r\n          return {...obj}\r\n        })\r\n        setData(updatedData);\r\n      }else {\r\n        setLoading(false);\r\n        if(node){\r\n           node.show({severity: 'error', detail: 'Wrong Details'});\r\n        }\r\n      }\r\n\t\t\t});\r\n\r\n   }\r\n   const fetchDataAsync = async (offset:any,limit:any) => {\r\n    try {\r\n        setLoading(true);\r\n        const api = `/api/customer/manage/user/?limit=${limit}&offset=${offset}`;\r\n        let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n        setData(response.data.results.data.map((obj:any)=>{\r\n          return({...obj, showDetails: false\r\n          })\r\n        }));\r\n        if(!(data===null)){\r\n          setLoading(false);\r\n        }\r\n        console.log(\"response :\",response?.data)\r\n        setFile_numbers(response.data.results.file_numbers);\r\n        setCurrentuser(response.data.results.current_user);\r\n        setCurrent_user_access(response.data.results.current_user_access);\r\n        setAdd_user(response.data.results.current_user_access.add_user)\r\n        setTotalRecords(response.data.count);\r\n        \r\n        return data;\r\n    }catch(error){\r\n      setLoading(false);\r\n        throw error;\r\n    }\r\n }   \r\n\r\n\r\n   useEffect(() =>{\r\n     fetchDataAsync(null,null);\r\n  },[]);\r\n\r\n \r\n  function cancel(id:any) {\r\n    const updatedData = data.map((obj:any,i:number)=>{\r\n        if(i===id){\r\n          obj.showDetails = false;\r\n        }\r\n        return {...obj}\r\n    })\r\n    setData(updatedData);\r\n    //setEdit(false);\r\n    //renderEditForm(data[id].showDetails,id);\r\n   }\r\n \r\n   let renderEditForm =(show:any,id:any)=>{\r\n     if(show){\r\n       return(\r\n         <>\r\n         <tr>\r\n           <td colSpan={10}>\r\n           <div className=\"content\" style={{height:\"23.18rem\",border:'1px solid #12739A',overflowX:'hidden'}}>\r\n          <div>\r\n          <div className=\"accordian\"> \r\n                    <div className=\"col-12\">\r\n                        <div className=\"row\">\r\n                                <div className=\"col-6\">\r\n                                    <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"0.625rem\"}}>Edit User Permissions</p>\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <span className=\"detail-created\" onClick={(e)=>onUpdate(e,id)} ><img style={{marginRight:\".5rem\",marginLeft:'0.625rem',width:'1rem'}} alt=\"save\" src={save} />Save</span>\r\n                                    <span className=\"detail-created\" onClick={()=>cancel(id)} >Cancel</span>\r\n                                </div>\r\n                        </div>\r\n                    </div>\r\n            </div><br/>\r\n            \r\n            <div className=\"row\" style={{padding:\"1rem\"}}>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name=\"first_name\" className=\"form-control\" placeholder=\"Enter First Name *\" value={formData1.first_name} onChange={handleInputChange}/>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name=\"last_name\" className=\"form-control\" placeholder=\"Enter Last Name *\" value={formData1.last_name} onChange={handleInputChange}/>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name='phone' className=\"form-control\" placeholder=\"Phone Number *\" value={formData1.phone} onChange={handleInputChange}/>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"col-4\">\r\n                          <Select\r\n                              className=\"dropdown\"\r\n                              placeholder=\"Select Option *\"\r\n                              value={options.filter((obj: { value: any; }) => selected.includes(obj.value))} // set selected values\r\n                              options={options} // set list of the data\r\n                              onChange={handleChange} // assign onChange function\r\n                              isMulti\r\n                              isClearable\r\n                          />\r\n                    </div>\r\n                <br></br>\r\n            <div className=\"form-check\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"key_finder\"  className=\"form-check-input\" type=\"checkbox\" checked={formData.key_finder} onChange={handleCheckboxChange}  id=\"flexCheckDefault\" disabled={!current_user_access.key_finder}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            Manage Keys\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"service_request\"   className=\"form-check-input\" type=\"checkbox\" checked={formData.service_request} onChange={handleCheckboxChange}  id=\"flexCheckDefault6\" disabled={!current_user_access.service_request}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            Request Service\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"inv_statements\"  className=\"form-check-input\" type=\"checkbox\" checked={formData.inv_statements} onChange={handleCheckboxChange} id=\"flexCheckDefault1\" disabled={!current_user_access.inv_statements}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            Pay Bills\r\n                            </label>\r\n                        </div>\r\n                    </div><br></br>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"quotes\"   className=\"form-check-input\" type=\"checkbox\" checked={formData.quotes}  onChange={handleCheckboxChange} id=\"flexCheckDefault2\" disabled={!current_user_access.quotes}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            Accept Estimations\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"hs_signatory\"  className=\"form-check-input\" type=\"checkbox\" checked={formData.hs_signatory} onChange={handleCheckboxChange} id=\"flexCheckDefault3\" disabled={!current_user_access.hs_signatory}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            key Authorizers\r\n                            </label>\r\n                        </div>\r\n                    </div><br></br>\r\n                    <div className=\"row\" style={{paddingBottom:'1rem'}}>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"add_user\"  className=\"form-check-input\" type=\"checkbox\" checked={formData.add_user} onChange={handleCheckboxChange} id=\"flexCheckDefault4\" disabled={!current_user_access.add_user}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\" >\r\n                            Users\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"audit\" className=\"form-check-input\" type=\"checkbox\" checked={formData.audit} onChange={handleCheckboxChange} id=\"flexCheckDefault5\" disabled={!current_user_access.audit}/>\r\n                            <label style={{paddingLeft:\"1.1em\"}} className=\"form-check-label\">\r\n                            Audit Trails\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n           </td>\r\n         </tr>    \r\n        </>\r\n       )\r\n     }\r\n   }   \r\n\r\n   const onPageChange = (event:any) => {\r\n    setLimit(event.rows);\r\n    setOffset(event.first);\r\n    fetchDataAsync(event.first,event.rows);\r\n}\r\n\r\nconst permission = () =>{\r\n  toast.current.show({severity: 'error', detail:  `You don't have permission`});\r\n}\r\n\r\n  function newuser() {\r\n    setAddnewuser(true);\r\n  }\r\n\r\n  function addnew(){\r\n    setAddnewuser(false);\r\n  }\r\n\r\n  function addToast(){\r\n    fetchDataAsync(null,null);\r\n    toast.current.show({severity: 'success', detail: 'User Created'});\r\n  }\r\n\r\n  const lastLoginDate  = currentuser.last_login? new Date(currentuser.last_login).toLocaleDateString(): '';\r\n  const lastUpdatedDate = currentuser.last_modified? new Date(currentuser.last_modified).toLocaleDateString(): \"\";\r\n\r\n  \r\n\r\n      return (\r\n        <>\r\n           { addnewuser ? \r\n           <AddNewUser addnewuser={addnew} addtoast={addToast} permissions ={current_user_access}/>\r\n           :\r\n          <div>\r\n          \r\n             <Toast ref={toast} />\r\n\r\n            {loading ? <div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div> :''}\r\n                <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Manage Users</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>Welcome {currentuser.first_name} {currentuser.last_name}</h6>\r\n                                        <span className=\"last-login\">Last Login: {lastLoginDate}</span>\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                        <button onClick={newuser} className=\"btn add-group-btn\">Add New Group</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n    \r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Users\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                                        \r\n                                        <th>User Name</th>\r\n                                        <th style={{textAlign:\"center\"}}>Email ID</th>\r\n                                        <th>Manage Keys</th>\r\n                                        <th>Request Service</th>\r\n                                        <th>Pay Bills</th>\r\n                                        <th>Accept Estimations</th>\r\n                                        <th>Key Authorizers</th>\r\n                                        <th>Users</th>\r\n                                        <th>Audit Trails</th>\r\n                                        <th style={{textAlign:\"right\"}}>Actions</th>\r\n                                      </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                  {data.map((item: any,i: any)=>{\r\n                                      return(\r\n                                        <>\r\n                                        <tr key={i}>\r\n                                          <td style={{textAlign:\"left\"}}>{item.first_name} {item.last_name}</td>\r\n                                          <td >{item.email}</td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.key_finder} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.service_request} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.inv_statements} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.quotes} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.hs_signatory} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.add_user} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                            <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",position:\"initial\",marginLeft:'0px'}}  type=\"checkbox\"  checked={item.useraccess.audit} className=\"form-check-input\" disabled/>\r\n                                          </td>\r\n                                          <td>\r\n                                          <img style={{cursor:\"pointer\",marginLeft:'-0.625rem',width:'37%'}} onClick={add_user ? ()=>editdetails(item,i) : permission} alt=\"edit\" src={edit1} />\r\n                                          <label className=\"switch\" style={{marginLeft:\"0.313rem\"}}>\r\n                                              <input type=\"checkbox\" name=\"userdisable\"  defaultChecked={item.is_active} onChange={add_user ? (e)=>handleCheckboxSlider(e,item): permission} disabled={add_user ? false :true}/>\r\n                                              <span style={{marginBottom:\"-0.438rem\"}} className=\"slider round\"></span>\r\n                                            </label>\r\n                                          </td>\r\n                                        </tr>\r\n                                          \r\n                                          {item.showDetails && \r\n                                          renderEditForm(item.showDetails,i)}\r\n                                        </>\r\n                                        )})}\r\n                                    \r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              <Paginator first={formData.offset} rows={formData.perPage} totalRecords={formData.totalRecords} rowsPerPageOptions={[10,20,30]} \r\n                                  template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                                  onPageChange={onPageChange}></Paginator>\r\n                                    \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n            \r\n          </div>\r\n}\r\n        </>\r\n      );\r\n    }\r\n\r\n\r\nexport default ManageUser;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\EditUserInformation.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Quotations.tsx",["257","258","259","260","261"],"\r\nimport React from 'react';\r\nimport axiosInstance from '../../api/api';\r\nimport viewq from '../icons/viewq.svg';\r\nimport Select from \"react-select\";\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Modal from 'react-modal';\r\nimport logopay from '../icons/logopay.png';\r\nimport QuotationDetails from './QuotationDetails';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport { Toast } from 'primereact/toast';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n    data:any;\r\n    isSelected:any;\r\n    last_name:any;\r\n    cus_no:any;\r\n    loading : boolean;\r\n    loc_no : any;\r\n    offset: any;\r\n    perPage: any;\r\n    totalRecords: any;\r\n    pageCount:any;\r\n    tableData :any;\r\n  }\r\n\r\nclass Quotations extends React.Component<{},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n    constructor(props:Props){\r\n        super(props);\r\n        this.toast = React.createRef();\r\n        this.state={\r\n          data: [],\r\n          isSelected:\"pending\",\r\n          last_name:\"\",\r\n          cus_no:\"\",\r\n          loading : false,\r\n          loc_no : '',\r\n          offset: 0,\r\n          perPage: 10,\r\n          totalRecords: 0,\r\n          pageCount:0,\r\n          tableData : [],\r\n        }}\r\n\r\n        colourStyles ={\r\n            option: (provided:any) => ({\r\n              ...provided,\r\n              backgroundColor: this.state.isSelected ? 'white' : 'white',\r\n              color: this.state.isSelected ? 'black' : 'black',\r\n              \"&:hover\": {\r\n                backgroundColor: \"#ccc\",\r\n                cursor: 'pointer',\r\n              }\r\n            }),\r\n            control: (styles:any) => ({\r\n              ...styles,\r\n              cursor: 'pointer',\r\n              \r\n            }),\r\n            \r\n          }\r\n\r\n          customStyles = {\r\n            content : {\r\n              top                   : '50%',\r\n              left                  : '50%',\r\n              right                 : 'auto',\r\n              bottom                : 'auto',\r\n              marginRight           : '-20%',\r\n              transform             : 'translate(-50%, -50%)',\r\n              width                 : '46.875rem',\r\n              height                : '37.5rem'\r\n            }\r\n          };\r\n\r\n       \r\n        options = [\r\n            { value: 'pending', label: 'Open' },\r\n            { value: 'accepted', label: 'Accepted' },\r\n            { value: 'rejected', label: 'Rejected' },\r\n          ];\r\n\r\n          handleChange = (e:any) => {\r\n            this.setState({isSelected: e.target.value});\r\n            this.fetchedData(e.target.value);\r\n          }\r\n\r\n        fetchedData= async(value:any)=>{\r\n            try {\r\n                this.setState({loading : true});\r\n                const token = localStorage.getItem('access_token');\r\n                const api = `/api/customer/quotations/${value}/`;\r\n                let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${token}`} });\r\n                \r\n                this.setState({data:response.data.data.map((obj:any)=>{\r\n                    return({...obj, showDetails: false\r\n                    })\r\n                  }), last_name:response.data.last_name, cus_no:response.data.cus_no});\r\n                  \r\n                  let slice = response.data.data.slice(this.state.offset, this.state.offset + this.state.perPage);\r\n                    this.setState({pageCount: Math.ceil(response.data.data.length / this.state.perPage), totalRecords: response.data.data.length});\r\n                    this.setState({tableData:slice.map((obj:any)=>{\r\n                        return({...obj, showDetails: false\r\n                        })\r\n                      })});\r\n\r\n                if(!(this.state.data.length === 0))\r\n                {\r\n                    this.setState({loading : false});\r\n                }else {\r\n                  this.setState({loading : false});\r\n                  this.toast.current.show({severity: 'error',  detail: 'No record found'});\r\n\r\n                }\r\n                \r\n            }catch(error){\r\n                this.setState({loading : false});\r\n                throw error;\r\n            }\r\n\r\n        }\r\n\r\n        details=(loc_no:any,id:any)=> {\r\n            const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n              if(i===id){\r\n                if(obj.showDetails=== false){\r\n                  this.setState({loading:true});\r\n                }\r\n              }\r\n                if(i===id){\r\n                  obj.showDetails = true;\r\n                }else{\r\n                  obj.showDetails = false;\r\n                }\r\n                return {...obj}\r\n                });\r\n              this.setState({tableData :updatedData});\r\n            this.setState({loc_no:loc_no});\r\n           };\r\n\r\n           cancel(id:any) {\r\n            const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n                if(i===id){\r\n                  obj.showDetails = false;\r\n                }\r\n                return {...obj}\r\n            })\r\n            this.setState({tableData: updatedData});\r\n           }\r\n\r\n           load = () =>{\r\n            this.setState({loading:false});\r\n          }\r\n          loadt = () =>{\r\n            this.setState({loading:true});\r\n          }\r\n\r\n           renderEditForm=(show:any,id:any)=>{\r\n            if(show){\r\n              return(\r\n                <>\r\n                <tr style={{height:\"0px\"}}>\r\n                    <td colSpan={5} className=\"m-0 p-0\">\r\n                        <div className=\"accordian\"> \r\n                          <div className=\"col-12\">\r\n                              <div className=\"row\">\r\n                                  <div className=\"col-6\">\r\n                                      <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Estimation Details</p>\r\n                                  </div>\r\n                                  <div className=\"col-6\">\r\n                                    <span className=\"detail-created\" onClick={()=>this.cancel(id)} >X</span>\r\n                                </div>\r\n                              </div>\r\n                          </div>\r\n                        </div>\r\n                        <QuotationDetails load={this.load} loadt={this.loadt} locationNo={this.state.loc_no} />\r\n                     </td>\r\n                </tr>\r\n               </>\r\n              )\r\n            }\r\n          } \r\n\r\n        componentDidMount = async ()=>{\r\n           this.fetchedData(\"pending\");\r\n        }\r\n\r\n        onPageChange = (event:any) => {\r\n        let offset = event.first;\r\n        let perPage = event.rows;\r\n        this.setState({offset:offset, perPage:perPage})\r\n        let slice = this.state.data.slice(offset, offset + perPage);\r\n        this.setState({tableData:slice.map((obj:any)=>{\r\n          return({...obj, showDetails: false\r\n          })\r\n        })});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            <div>\r\n            <Toast ref={this.toast} />\r\n            {\r\n              this.state.loading ? <div className='overlay-box1'>\r\n              <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n          </div> : ''\r\n            }\r\n              <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Estimates</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>{this.state.last_name}</h6>\r\n                                        <h6>{this.state.cus_no}</h6>\r\n                                    </div>\r\n                                    <div className=\"form-group mb-2 w-40\">\r\n                                        <label>Filter By:</label>\r\n                                        <select \r\n                                          className=\"form-control filter-form-control\"\r\n                                          onChange={this.handleChange} id=\"exampleFormControlSelect1\">\r\n                                            {this.options.map(option=>(\r\n                                              <option value={option.value} selected={this.state.isSelected == option.value}>{option.label}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n                <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                    <div className=\"overview-pannel-cal\">\r\n                        <div className=\"overview-pannel-header\">\r\n                            Estimations\r\n                        </div>\r\n                        <div className=\"overview-pannel-body table-responsive-sm\">\r\n                        <table  className=\"table mb-0 estimates-table\">\r\n                          <thead className=\"thead-light\">\r\n                              <tr >\r\n                              <th scope=\"col\">Location Name</th>\r\n                              <th className=\"text-center\" scope=\"col\">Address</th>\r\n                              <th style={{textAlign:\"right\"}} scope=\"col\">{this.options.filter(obj => obj.value === this.state.isSelected)[0].label} Quotes</th>\r\n                              </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {this.state.tableData.map((item: any,i: any)=>{\r\n                            return(\r\n                                <>\r\n                            <tr key={i}>\r\n                            <td className=\"primary-text\" onClick={()=>this.details(item.loc_no,i)}>{item.location}</td>\r\n                            <td className=\"text-center\">{item.address}</td>\r\n                            <td style={{textAlign:\"right\"}} className=\"pr-5\" >{item.quotes}</td>\r\n                            </tr>\r\n                             {this.renderEditForm(item.showDetails,i)}\r\n                            </>\r\n                            )})}\r\n                          </tbody>\r\n                       </table>\r\n                \r\n                        </div>\r\n                        <Paginator first={this.state.offset} rows={this.state.perPage} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10,20,30]} \r\n                            template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                            onPageChange={this.onPageChange}></Paginator>\r\n                            \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     \r\n            </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quotations;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysGroup.tsx",["262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280"],"import React from 'react';\r\nimport ViewKeysGroupDetails from './ViewKeysGroupDetails';\r\nimport image from '../icons/pdf-1.svg';\r\nimport csv from '../icons/csv.svg';\r\nimport schedule from '../icons/schedule.svg';\r\nimport warning from '../icons/warning.svg';\r\nimport brokenkey from '../icons/BrokenKey.svg';\r\nimport questionmark from '../icons/questionmark.svg';\r\nimport csv1 from '../icons/csv1.svg';\r\nimport removeIcon from '../icons/remove.png';\r\nimport axiosInstance , {baseURL} from '../../api/api';\r\nimport 'jspdf-autotable';\r\nimport cancel from '../icons/cancel.svg';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Modal from 'react-modal';\r\nimport { Toast } from 'primereact/toast';\r\nimport Select from \"react-select\";\r\nimport { Formik, validateYupSchema } from 'formik';\r\nimport { Calendar } from 'primereact/calendar';\r\nimport edit1 from '../icons/edit.svg';\r\n\r\n\r\nconst customStyles = {\r\n  content : {\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-20%',\r\n    transform             : 'translate(-50%, -50%)',\r\n    overflow: 'inherit !important'\r\n  }\r\n};\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  edit:boolean;\r\n  data:any;\r\n  view:any;\r\n  currentuser:any;\r\n  showDetails: any;\r\n  isSelected:any;\r\n  file:any;\r\n  files:any;\r\n  limit:any;\r\n  offset:any;\r\n  totalRecords:any;\r\n  keysInGroup: any;\r\n  loading : boolean;\r\n  modalIsOpen : boolean;\r\n  door_compromised:any;\r\n  currentItem: any;\r\n  add_group: any;\r\n  csvTable:any;\r\n  keys: any[];\r\n  freeKeys: any[];\r\n  selectedId: any;\r\n  initialValues: any;\r\n}\r\n\r\nclass ViewKeysGroup extends React.Component<{},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n  constructor(props:Props){\r\n    super(props);\r\n    this.toast = React.createRef();\r\n\r\n    this.state={\r\n      showDetails: false,\r\n      edit:false,\r\n      data:[],\r\n      keysInGroup: [],\r\n      view:[],\r\n      csvTable:[],\r\n      currentuser:[],\r\n      isSelected: '',\r\n      file:[] as any,\r\n      add_group: true,\r\n      files:[] as any,\r\n      loading : false,\r\n      modalIsOpen:false,\r\n      door_compromised:'',\r\n      keys: [],\r\n      freeKeys:[],\r\n      currentItem: '',\r\n      limit:10,\r\n      offset: null,\r\n      initialValues: {name: '',user: '',keys: [],issueDate: new Date()},\r\n      totalRecords:null,\r\n      selectedId:null\r\n    }\r\n  }\r\n  \r\n  customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      overflow: 'inherit !important',\r\n    }\r\n  };\r\n\r\n    \r\n  fetchedData = async(offset:any,limit:any) => {\r\n    this.setState({loading : true});\r\n    const api = `/api/kdfinder/keysgroups`;\r\n    let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n    this.setState({data:response.data.results.data.map((obj:any)=>{\r\n      return({...obj, showDetails: false\r\n      })\r\n    })});\r\n    this.loadOptions()\r\n    if(!(this.state.data.length === 0))\r\n    {\r\n        this.setState({loading : false});\r\n    }else {\r\n      this.setState({loading : false});\r\n      this.toast.current.show({severity: 'error',  detail: 'No record found'});\r\n    }\r\n    this.setState({currentuser:response.data.results.current_user});\r\n    this.setState({totalRecords:response.data.count});\r\n    return this.state.data;\r\n  }\r\n\r\n  removeKeyFromKeysInGroup = (e:any,key: any) => {\r\n    e.preventDefault()\r\n    if(key){\r\n      var keysInGroup = this.state.keysInGroup;\r\n      var keys = this.state.keys\r\n      this.setState({keysInGroup: keysInGroup.filter((obj: any) => obj.value !== key.value)});\r\n      keys.push(key);\r\n      this.setState({keys: keys});\r\n    }\r\n  }\r\n\r\n  addKeysToGroup = (e:any,key: any, cb:any) => {\r\n    e.preventDefault()\r\n    if(key){\r\n      var keysInGroup = this.state.keysInGroup;\r\n      var keys = this.state.keys\r\n      this.setState({keys: keys.filter((obj: any) => obj.value !== key.value)});\r\n      keysInGroup.push(key);\r\n      this.setState({keysInGroup: keysInGroup});\r\n      cb()\r\n      this.setState({isSelected: null})\r\n    }\r\n  }\r\n  \r\n  cancel(id:any) {\r\n    const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n        if(i===id){\r\n          obj.showDetails = false;\r\n        }\r\n        return {...obj}\r\n    })\r\n    this.setState({data: updatedData});\r\n   }\r\n\r\n  renderEditForm=(show:any,id:any)=>{\r\n    if(show){\r\n      return(\r\n        <>\r\n          <tr style={{height:\"0px\"}}>\r\n              <td colSpan={7} className=\"m-0 p-0\">\r\n              <div className=\"accordian\"> \r\n                    <div className=\"col-12\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-6\">\r\n                                <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Key Holder Informations</p>\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                            <span className=\"detail-created\" onClick={()=>this.cancel(id)} >x</span>\r\n                               \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ViewKeysGroupDetails group_id={id} fetchedData={this.fetchedData} loadc={this.loadc} load={this.load} viewdata={this.state.view}/>\r\n              </td>\r\n          </tr>\r\n       </>\r\n      )\r\n    }\r\n  }    \r\n\r\n  componentDidMount = () =>{\r\n    this.fetchedData(null,null);\r\n  }\r\n\r\n  details=(item:any,id1:any)=> {\r\n    //this.setState({loading:true});\r\n    const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n      if(i===id1){\r\n        obj.showDetails = true;\r\n      }else{\r\n        obj.showDetails = false;\r\n      }\r\n      return {...obj}\r\n    });\r\n    this.setState({data:updatedData});\r\n    this.setState({edit:true});\r\n    this.setState({view:item.sequence, currentItem: item});\r\n  }\r\n\r\n  colourStyles ={\r\n    option: (provided:any) => ({\r\n      ...provided,\r\n      backgroundColor: this.state.isSelected ? 'white' : 'white',\r\n      cursor: 'pointer',\r\n      color: this.state.isSelected ? 'black' : 'black',\r\n      \"&:hover\": {\r\n        backgroundColor: \"#ccc\"\r\n      }\r\n    }),\r\n    control: (styles:any) => ({\r\n      ...styles,\r\n      cursor: 'pointer',\r\n      \r\n    }),\r\n  }\r\n   \r\n\r\n  load = ()=>{\r\n    this.setState({loading:false});\r\n  }\r\n   \r\n  loadc = ()=>{\r\n    this.setState({loading:true});\r\n  }  \r\n\r\n  modal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n  }\r\n\r\n  addToast=(mes:any)=>{\r\n    this.toast.current.show({severity: 'success', detail: mes});\r\n  }\r\n  \r\n  changeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n  }\r\n\r\n  filteOptions = () => {\r\n\r\n  }\r\n\r\n  promiseOptions = (inputValue: any) =>{\r\n    new Promise(resolve => {\r\n        resolve(this.state.keys);\r\n    });\r\n  }\r\n  submit = async(values: any, id:any=null) => {\r\n    var api = `/api/kdfinder/keysgroups/`;\r\n    if(id){\r\n      api = api + \"group/\" + id\r\n    }\r\n    values.keys  = this.state.keysInGroup.map((obj:any)=> obj.value)\r\n    let response = await axiosInstance.post(api ,values, { headers: {'Content-Type': 'application/json'} } );\r\n    if(response.data.success){\r\n      this.changeModal()\r\n      this.addToast(\"Successfuly added group\")\r\n      this.fetchedData(null,null)\r\n    }        \r\n  }\r\n\r\n  loadOptions = async() => {\r\n    const api = `/api/kdfinder/keysjson`;\r\n    let response:any = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n    var values =  response.data.data.map((obj: any) => {\r\n      return{label: obj.name, value: obj.id}\r\n    })\r\n    this.setState({keys: values})\r\n  }\r\n\r\n  renderModal = (id:any,initialValues:any) =>{ \r\n    return(\r\n        <>\r\n        <div>\r\n        <div style={{textAlign:'right'}} >\r\n           <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n        </div>\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validate={values => {\r\n            var errors: any = {}\r\n            if (!values.name) {\r\n              errors['name'] = 'Required';\r\n            }\r\n            if (!values.user) {\r\n              errors['user'] = 'Required';\r\n            }\r\n            if (this.state.keysInGroup.length ==0) {\r\n              errors['keys'] = 'Required';\r\n            }\r\n            if (!values.tenant) {\r\n              errors['tenant'] = 'Required';\r\n            }\r\n            if (!values.phone_no) {\r\n              errors['phone_no'] = 'Required';\r\n            }\r\n            if (!values.email) {\r\n              errors['email'] = 'Required';\r\n            }\r\n            if (!values.issueDate) {\r\n              errors['issueDate'] = 'Required';\r\n            }\r\n            return errors;\r\n          }}\r\n          onSubmit={(values, { setSubmitting }) => {\r\n            this.submit(values, id)\r\n            console.log(values)\r\n            setSubmitting(false);\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            isSubmitting,\r\n            setFieldValue\r\n            /* and other goodies */\r\n          }) => (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"row\">\r\n                <div className=\"form-group col-6\">\r\n                  <label>Group Name</label>\r\n                  <input type=\"text\" name=\"name\" \r\n                      className=\"form-control\"\r\n                      placeholder=\"Enter group name\"\r\n                      onChange={handleChange}\r\n                      value={values.name}\r\n                    />\r\n                  <small id=\"locationHelp\" className=\"form-text  text-danger\">{errors.name}</small>\r\n                </div>\r\n                <div className=\"form-group col-6\">\r\n                  <label>Issue Date</label>\r\n                  <Calendar id=\"basic\" placeholder=\"DD/MM/YYYY \" \r\n\t\t\t\t\t\t\t\t name=\"issueDate\" style={{width: '100px'}} value={values.issueDate} className=\"w-100\" onChange={(e:any) => setFieldValue(\"issueDate\",e.value.toLocaleDateString(\"fr-CA\"))}   showIcon/>\r\n                  <small id=\"addressHelp\" className=\"form-text  text-danger\">{errors.issueDate}</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"form-group col-6\">\r\n                  <label>Tenant</label>\r\n                  <input type=\"text\" name=\"tenant\" \r\n                      className=\"form-control\"\r\n                      placeholder=\"Enter Tenant\"\r\n                      onChange={handleChange}\r\n                      value={values.tenant}\r\n                    />\r\n                  <small id=\"locationHelp\" className=\"form-text  text-danger\">{errors.tenant}</small>\r\n                </div>\r\n                <div className=\"form-group col-6\">\r\n                  <label>First/Last Name</label>\r\n                  <input type=\"text\" name=\"user\" \r\n                      className=\"form-control\"\r\n                      placeholder=\"Enter Name\"\r\n                      onChange={handleChange}\r\n                      value={values.user}\r\n                    />\r\n                  <small id=\"locationHelp\" className=\"form-text  text-danger\">{errors.user}</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"form-group col-6\">\r\n                  <label>Cell No</label>\r\n                  <input type=\"text\" name=\"phone_no\" \r\n                      className=\"form-control\"\r\n                      placeholder=\"Enter Cell No\"\r\n                      onChange={handleChange}\r\n                      value={values.phone_no}\r\n                    />\r\n                  <small id=\"locationHelp\" className=\"form-text  text-danger\">{errors.phone_no}</small>\r\n                </div>\r\n                <div className=\"form-group col-6\">\r\n                  <label>Email</label>\r\n                  <input type=\"email\" name=\"email\" \r\n                      className=\"form-control\"\r\n                      placeholder=\"Enter Email\"\r\n                      onChange={handleChange}\r\n                      value={values.email}\r\n                    />\r\n                  <small id=\"locationHelp\" className=\"form-text  text-danger\">{errors.email}</small>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Keys</label>\r\n                <Select\r\n                  placeholder={'Please select keys'}\r\n                  getOptionLabel={e => e.label}\r\n                  className=\"dropdown\"\r\n                  isClearable\r\n                  value={this.state.isSelected}\r\n                  getOptionValue={e => e.value}\r\n                  options={this.state.keys} // set list of the data\r\n                  onChange={(opt, e) => {\r\n                    this.setState({isSelected: opt})\r\n                    setFieldValue(\"keys\",opt)\r\n                  }}\r\n                />\r\n                \r\n                <small id=\"addressHelp\" className=\"form-text  text-danger\">{errors.keys}</small>\r\n              </div>\r\n              \r\n              <button className=\"btn btn-sm btn-secondary mb-2\" onClick={(e) => this.addKeysToGroup(e,values.keys, ()=> setFieldValue(\"keys\", null))} >\r\n                Add key to Group\r\n              </button>\r\n              <div className=\"form-group\">\r\n                \r\n                <div className=\"accordian\"> \r\n                    <div className=\"col-12\">\r\n                        <div className=\"row\">\r\n                          <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Keys In group</p>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"container p-0\" style={{minHeight: '100px'}}>\r\n                    {this.state.keysInGroup.map((obj: any) => {\r\n                        return (\r\n                        <button className=\"btn btn-sm btn-success m-2\">\r\n                          {obj.label}\r\n                          <span className=\"badge\" onClick={(e: any) => this.removeKeyFromKeysInGroup(e,obj)} style={{background: \"white\", paddingBottom: '4px', color: \"#28a745\", marginLeft:\"5px\"}} >x</span>\r\n                        </button>)\r\n                      })}\r\n                    </div>\r\n                </div>\r\n              </div>\r\n              <button type=\"submit\" className=\"btn btn-primary w-100\" disabled={errors.user != undefined || errors.name != undefined || this.state.keysInGroup.length == 0 || errors.issueDate != undefined}>\r\n                Save And Close\r\n              </button>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n        </div>\r\n        </>\r\n    )\r\n  }\r\n\r\n  openModal = () => {\r\n    this.setState({modalIsOpen:true});\r\n  }\r\n\r\n  onPageChange = (event:any) => {\r\n    this.setState({offset:event.first,limit:event.rows});\r\n    this.fetchedData(event.first,event.rows);\r\n  }\r\n  \r\n  handleNewGroup = () => {\r\n    this.loadOptions()\r\n    var issueDate = new Date()\r\n    var initialValues = {name: '', user: '',issueDate: issueDate, keys: [], email: '', phone_no: '', tenant: ''}\r\n    this.setState({keysInGroup: [], isSelected: null})\r\n    this.setState({initialValues: initialValues})\r\n    this.openModal()\r\n  }\r\n\r\n  closeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n  }\r\n  \r\n  deleteGroup = async (id:any) => {\r\n    const api = `/api/kdfinder/keysgroups/`;\r\n    if (window.confirm('Do you want to delete this group?')) {\r\n      let response = await axiosInstance.delete(api , { data: {id: id},headers: {'Content-Type': 'application/json'} } );\r\n      if(response.data.success){\r\n        this.changeModal()\r\n        this.addToast(\"Successfuly removed group\")\r\n        this.fetchedData(null,null)\r\n      }  \r\n      console.log('Thing was saved to the database.');\r\n    } \r\n  }\r\n\r\n  editGroup = async (id:any) => {\r\n    var obj = this.state.data.filter((obj: any) => {\r\n      return obj.id == id\r\n    });\r\n    this.loadOptions()\r\n    if (obj.length > 0) {\r\n      var user;\r\n      var email;\r\n      var phone_no;\r\n      var tenant;\r\n      var keys:any[] = [];\r\n      var keyValues:any[] = [];\r\n      obj[0].sequence.map((item: any) => {\r\n        user = item.key_holder\r\n        tenant = item.tenant_location\r\n        phone_no = item.phone\r\n        email = item.email\r\n        keys.push({\r\n          label: item.key_id +\"-\"+ item.sequence,\r\n          value: item.id\r\n        })\r\n      });\r\n      var name = obj[0].name\r\n      var issueDate = new Date(obj[0].issue_date)\r\n      var initialValues = {name: name, user: user,email: email,tenant: tenant,phone_no: phone_no,issueDate: issueDate, keys: keyValues}\r\n      this.setState({selectedId: null})\r\n      this.setState({initialValues: initialValues})\r\n      this.state.freeKeys.forEach(key => {\r\n        keys.push(key)\r\n      })\r\n      this.setState({keysInGroup: keys});\r\n      this.openModal()\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const lastLoginDate  = this.state.currentuser.last_login? new Date(this.state.currentuser.last_login).toLocaleDateString(): '';\r\n    const lastUpdatedDate = this.state.currentuser.last_modified? new Date(this.state.currentuser.last_modified).toLocaleDateString(): \"\";\r\n    return (\r\n      <>\r\n        <div>\r\n            <Modal style={customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal(this.state.selectedId,this.state.initialValues)}</Modal>\r\n            <div>\r\n            {\r\n              this.state.loading  ? <div className='overlay-box1'>\r\n              <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n          </div> :''\r\n            }\r\n            <Toast ref={this.toast} />\r\n            <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Manage Key Groups</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>Welcome {this.state.currentuser.first_name} {this.state.currentuser.last_name}</h6>\r\n                                        <span className=\"last-login\">Last Login: {lastLoginDate}</span>\r\n                                    </div>\r\n                                    <div className=\"mb-2\">\r\n                                        <button onClick={this.handleNewGroup} className=\"btn add-group-btn\">Add New Group</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Key Groups\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 \">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      <th data-visible=\"true\" >Group Name</th>\r\n                                      <th>Tenant</th>\r\n                                      <th>First/Last Name</th>\r\n                                      <th>Email</th>\r\n                                      <th>Cell No</th>\r\n                                      <th>Issue Date</th>\r\n                                      <th className=\"text-center\">Actions</th>\r\n                                    </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                  {this.state.data.map((item: any,i: any)=>{\r\n                                    return(\r\n                                      <>\r\n                                      <tr key={i}>\r\n                                        <td className=\"primary-text\"><span onClick={()=>this.details(item,i)} >{item.name}</span></td>\r\n                                        <td>{item.sequence.length > 0 ? item.sequence[0].tenant_location : ''}</td>\r\n                                        <td>{item.sequence.length > 0 ? item.sequence[0].key_holder : ''}</td>\r\n                                        <td>{item.sequence.length > 0 ? item.sequence[0].email : ''}</td>\r\n                                        <td>{item.sequence.length > 0 ? item.sequence[0].phone : ''}</td>\r\n                                        <td>{item.sequence.length > 0 ? (new Date(item.sequence[0].date_issued)).toLocaleDateString(\"fr-CA\") : ''}</td>\r\n\r\n                                        <td className=\"text-right general-btn\">\r\n                                            <button className=\"btn blue-btn mb-1\" onClick={() => this.editGroup(item.id)}>Update</button>\r\n                                            <button className=\"btn red-btn mb-1\" onClick={() =>this.deleteGroup(item.id)}>Delete</button>\r\n                                        </td>\r\n                                      </tr>\r\n                                      {this.renderEditForm(item.showDetails,item.id)}\r\n                                      </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              <Paginator first={this.state.offset} rows={this.state.limit} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10, 20, 30]} \r\n                    template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                    onPageChange={this.onPageChange}></Paginator>\r\n                   \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\nexport default ViewKeysGroup;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AddNewUser.tsx",["281","282"],"import React, { useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router';\r\nimport axiosInstance from '../../api/api';\r\nimport save from '../icons/floppy-disk.svg';\r\n//import MultiSelect from \"react-multi-select-component\";\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\nimport Select from 'react-select';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: #ccc;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\nconst validEmailRegex = RegExp(\r\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\r\n  );\r\n\r\nlet AddNewUser = (props:any) =>{\r\n    let history = useHistory();\r\n    const toast: any = useRef();\r\n    const initialFormData = Object.freeze({\r\n        first_name:'',\r\n        last_name:'',\r\n        email: '',\r\n        phone:'',\r\n        key_finder:false,\r\n        service_request:false,\r\n        inv_statements:false,\r\n        quotes: false,\r\n        hs_signatory:false,\r\n        add_user:false,\r\n        audit:false,\r\n    });\r\n    const [formData, setFormData] = useState(initialFormData);\r\n    const [file, setFile] = useState<any>([]);\r\n    const [selected, setSelected] = useState<any>([]);\r\n    const [loading, setLoading] = useState<any>(false);\r\n    const options = file.map((item: any,i: any)=>{ \r\n            return (\r\n            { label: item.file_number+((item.location===null)?'':\" - \"+item.location), value: item.id})\r\n      });\r\n\r\n\r\n    const handleChange = (event:any) => {\r\n        setSelected(Array.isArray(event) ? event.map(x => x.value) : []);\r\n      }\r\n\r\n    const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n        setFormData({...formData,[name]:value});\r\n        \r\n    };\r\n    const handleCheckboxChange = (e: { target: { name: any; checked:any }; }) =>{\r\n        let name = e.target.name;\r\n        let checked = e.target.checked;\r\n        setFormData({...formData,[name]:checked});\r\n        \r\n    };\r\n\r\n    useEffect(() =>{\r\n        const fetchDataAsync = async () => {\r\n            try {\r\n                const api = '/api/customer/user/file-numbers/';\r\n                let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n                setFile(response.data.data);\r\n                return file;\r\n            }catch(error){\r\n                throw error;\r\n            }\r\n         }   \r\n         fetchDataAsync()\r\n      },[]);\r\n    \r\n\r\n    function cancel() {\r\n        props.addnewuser(false);\r\n    \r\n       }\r\n\r\n       const formValidation = () =>{\r\n        let isValid = true;\r\n        const node = toast.current;\r\n        let numbers = /[0-9]/g;\r\n         if(formData.first_name === ''){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter First Name\"});\r\n                }\r\n            isValid = false;\r\n         }else if(formData.last_name === ''){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter Last Name\"});\r\n                }\r\n            isValid = false;\r\n         }else if(formData.email=== ''){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter Email Address\"});\r\n                }\r\n            isValid = false ;\r\n        }else if(!validEmailRegex.test(formData.email)){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter a valid Email Address\"});\r\n                }\r\n            isValid = false ;\r\n        }else if(formData.phone === ''){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter Phone Number\"});\r\n                }\r\n            isValid = false ;\r\n        }else if(!formData.phone.match(numbers)){\r\n            if(node){\r\n                node.show({severity: 'error',  detail: \"Please enter a valid Phone Number\"});\r\n                }\r\n            isValid = false ;\r\n        }\r\n        return isValid\r\n    }\r\n\r\n\r\n    const handleSubmit = (e:any) => {\r\n\t\te.preventDefault();\r\n        let isValid = formValidation();\r\n        if(isValid){\r\n        try{\r\n            setLoading(true);\r\n        axiosInstance\r\n\t\t\t.post(`/api/customer/manage/user/`, {\r\n                first_name:formData.first_name,\r\n                last_name:formData.last_name,\r\n                email:formData.email,\r\n                file_numbers:selected,\r\n                phone:formData.phone,\r\n                useraccess:\r\n                 {\r\n                    key_finder: formData.key_finder,\r\n                    service_request: formData.service_request,\r\n                    inv_statements:formData.inv_statements,\r\n                    quotes: formData.quotes,\r\n                    hs_signatory:formData.hs_signatory,\r\n                    add_user:formData.add_user,\r\n                    audit:formData.audit,\r\n                } ,\r\n                method: \"post\"\r\n            },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n                let node = toast.current;\r\n                if(res.data.status===200){\r\n                    setLoading(false);\r\n                    props.addnewuser(false);\r\n                    props.addtoast();\r\n                    setFormData({...formData, \r\n                        first_name:'',\r\n                        last_name:'',\r\n                        email: '',\r\n                        phone:'',\r\n                        key_finder:false,\r\n                        service_request:false,\r\n                        inv_statements:false,\r\n                        quotes: false,\r\n                        hs_signatory:false,\r\n                        add_user:false,\r\n                        audit:false,\r\n                     });\r\n                     setSelected([]);\r\n                   \r\n                   \r\n                } else {\r\n                    setLoading(false);\r\n                    if(node){\r\n                    node.show({severity: 'error',  detail: res.data.message});\r\n                    }\r\n                }\r\n            })\r\n            .catch((error)=>{\r\n                setLoading(false);\r\n                if(toast.current){\r\n                toast.current.show({severity: 'error',  detail: \"Server error try again\"});\r\n                }\r\n                \r\n            })\r\n           \r\n        } catch(error){\r\n             throw error;\r\n        }\r\n    }\r\n    }\r\n \r\n        return(\r\n            <>\r\n            <div>\r\n            \r\n            <Toast ref={toast} />\r\n               <div style={{height:\"calc(100vh - 7rem)\",backgroundColor:'white'}} className=\"content\" >\r\n               {loading ? <div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div> :''}\r\n                <div className=\"accordian\"> \r\n                    <div className=\"col-12\">\r\n                        <div className=\"row\">\r\n                                <div className=\"col-6\">\r\n                                    <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"0.6rem\"}}>Add New User</p>\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <span className=\"detail-created\" onClick={handleSubmit} ><img style={{marginRight:\"0.5rem\",marginLeft:'0.625rem',width:'1rem'}} alt=\"save\" src={save} />Save</span>\r\n                                    <span className=\"detail-created\" onClick={cancel}>x</span>\r\n                                </div>\r\n                        </div>\r\n                    </div>\r\n                </div><br/>\r\n                <div className=\"row\" style={{padding:\"20px\"}}>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name=\"first_name\" className=\"form-control\" placeholder=\"Enter First Name *\" value={formData.first_name} onChange={handleInputChange}/>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name=\"last_name\" className=\"form-control\" placeholder=\"Enter Last Name *\" value={formData.last_name} onChange={handleInputChange}/>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name='email' className=\"form-control\" placeholder=\"Enter Email ID *\" value={formData.email} onChange={handleInputChange}/>\r\n                    </div>\r\n                    </div>\r\n                    <div className=\"row\" style={{padding:\"1.25rem\"}}>\r\n                    <div className=\"col-4\">\r\n                        {/* <MultiSelect\r\n                            options={options}\r\n                            value={options.filter((obj: { value: any; }) => selected.includes(obj.value))} \r\n                            onChange={handleChange}\r\n                            labelledBy={\"Select\"}\r\n                        /> */}\r\n                        <Select\r\n                            className=\"dropdown\"\r\n                            placeholder=\"Select System Number *\"\r\n                            value={options.filter((obj: { value: any; }) => selected.includes(obj.value))} // set selected values\r\n                            options={options} // set list of the data\r\n                            onChange={handleChange} // assign onChange function\r\n                            isMulti\r\n                            isClearable\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <input type=\"text\" name='phone' className=\"form-control\" placeholder=\"Phone Number *\" value={formData.phone} onChange={handleInputChange}/>\r\n                    </div>\r\n                    <div>\r\n                </div>\r\n                \r\n                </div>\r\n                <br></br>\r\n                \r\n                <div  style={{backgroundColor:'#fff'}}>\r\n                \r\n                <div className=\"form-check\">\r\n                    <div className=\"row\">\r\n                        <div  style={{backgroundColor:\"\t#F0F0F0\",marginLeft:\"-1.5rem\",marginBottom:\"1.25rem\", height:\"3.125rem\"}} className=\"col-12\">\r\n                            <span style={{float:\"left\",fontWeight:500,fontSize:\"1.1rem\",padding:\"0.625rem\"}}>Assign Permissions</span>\r\n                        </div>\r\n                        \r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"key_finder\" checked={formData.key_finder} className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault\" onChange={handleCheckboxChange} disabled={!props.permissions.key_finder}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                               Manage Keys\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"service_request\" checked={formData.service_request}  className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault1\" onChange={handleCheckboxChange} disabled={!props.permissions.service_request}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Request Service\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"inv_statements\" checked={formData.inv_statements} className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault2\" onChange={handleCheckboxChange} disabled={!props.permissions.inv_statements}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Pay Bills\r\n                            </label>\r\n                        </div>\r\n                    </div><br></br>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}}  name=\"quotes\"  className=\"form-check-input\" type=\"checkbox\"  checked={formData.quotes} id=\"flexCheckDefault3\" onChange={handleCheckboxChange} disabled={!props.permissions.quotes}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Accept Estimations\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\">\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"hs_signatory\" checked={formData.hs_signatory} className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault4\" onChange={handleCheckboxChange} disabled={!props.permissions.hs_signatory}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Key Authorizers\r\n                            </label>\r\n                        </div>\r\n                    </div><br></br>\r\n                    <div className=\"row\" >\r\n                        <div className=\"col-4\" style={{paddingBottom:'1.3rem',cursor:'pointer'}}>\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\"}} name=\"add_user\" checked={formData.add_user}  className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault5\" onChange={handleCheckboxChange} disabled={!props.permissions.add_user}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Users\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"col-4\"  >\r\n                            <input style={{height:\"1.375rem\",width:\"1.375rem\",cursor:'pointer'}} name=\"audit\" checked={formData.audit} className=\"form-check-input\" type=\"checkbox\"  id=\"flexCheckDefault6\" onChange={handleCheckboxChange}  disabled={!props.permissions.audit}/>\r\n                            <label style={{paddingLeft:\"1.1em\",marginTop:\"0.25rem\"}} className=\"form-check-label\" >\r\n                                Audit Trails\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            </>\r\n        );\r\n    }\r\nexport default AddNewUser;\r\n","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AuditKeys.tsx",["283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307"],"import React from 'react';\r\nimport ViewKeysGroupDetails from './ViewKeysGroupDetails';\r\nimport image from '../icons/pdf-1.svg';\r\nimport csv from '../icons/csv.svg';\r\nimport schedule from '../icons/schedule.svg';\r\nimport warning from '../icons/warning.svg';\r\nimport brokenkey from '../icons/BrokenKey.svg';\r\nimport questionmark from '../icons/questionmark.svg';\r\nimport csv1 from '../icons/csv1.svg';\r\nimport removeIcon from '../icons/remove.png';\r\nimport axiosInstance , {baseURL} from '../../api/api';\r\nimport 'jspdf-autotable';\r\nimport cancel from '../icons/cancel.svg';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Modal from 'react-modal';\r\nimport { Toast } from 'primereact/toast';\r\nimport Select from \"react-select\";\r\nimport { Formik, validateYupSchema } from 'formik';\r\nimport { Calendar } from 'primereact/calendar';\r\nimport edit1 from '../icons/edit.svg';\r\n\r\n\r\nconst customStyles = {\r\n  content : {\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-20%',\r\n    transform             : 'translate(-50%, -50%)',\r\n    overflow: 'inherit !important'\r\n  }\r\n};\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  edit:boolean;\r\n  groups:any;\r\n  view:any;\r\n  currentuser:any;\r\n  showDetails: any;\r\n  isSelected:any;\r\n  file:any;\r\n  files:any;\r\n  limit:any;\r\n  offset:any;\r\n  auditType: any;\r\n  loading : boolean;\r\n  modalIsOpen : boolean;\r\n  door_compromised:any;\r\n  currentItem: any;\r\n  add_group: any;\r\n  csvTable:any;\r\n  keys: any[];\r\n  freeKeys: any[];\r\n  selectedKeys: any;\r\n  selectedGroups: any;\r\n  initialValues: any;\r\n  groupsDetails: any;\r\n  keysDetails: any;\r\n}\r\n\r\nclass AuditKeys extends React.Component<{},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n  constructor(props:Props){\r\n    super(props);\r\n    this.toast = React.createRef();\r\n\r\n    this.state={\r\n      showDetails: false,\r\n      edit:false,\r\n      keysDetails: {},\r\n      groupsDetails: {},\r\n      groups:[],\r\n      auditType: null,\r\n      view:[],\r\n      csvTable:[],\r\n      currentuser:[],\r\n      isSelected: '',\r\n      file:[] as any,\r\n      add_group: true,\r\n      files:[] as any,\r\n      loading : false,\r\n      modalIsOpen:false,\r\n      door_compromised:'',\r\n      keys: [],\r\n      freeKeys:[],\r\n      currentItem: '',\r\n      limit:10,\r\n      offset: null,\r\n      initialValues: {name: '',user: '',keys: [],issueDate: new Date()},\r\n      selectedKeys:[],\r\n      selectedGroups:[]\r\n    }\r\n  }\r\n  \r\n  customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      overflow: 'inherit !important',\r\n    }\r\n  };\r\n\r\n    \r\n  fetchedData = async() => {\r\n    this.setState({loading : true});\r\n    this.details()\r\n    this.setState({loading : false});\r\n    \r\n    return ;\r\n  }\r\n\r\n  \r\n  componentDidMount = () =>{\r\n    this.details()\r\n    this.fetchedData();\r\n  }\r\n\r\n  load = ()=>{\r\n    this.setState({loading:false});\r\n  }\r\n   \r\n  loadc = ()=>{\r\n    this.setState({loading:true});\r\n  }  \r\n\r\n\r\n  addToast=(mes:any)=>{\r\n    this.toast.current.show({severity: 'success', detail: mes});\r\n  }\r\n  \r\n  openGroups = async() => {\r\n    this.setState({auditType: 'group'})\r\n    this.setState({loading: true,selectedGroups: []})\r\n    this.fetchGroups()\r\n  }\r\n\r\n  fetchGroups = async () =>{\r\n    const api = `/api/kdfinder/keysgroupsjson`;\r\n    let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n    this.setState({groups:response.data.data.map((obj:any)=>{\r\n      return({...obj, showDetails: false\r\n      })\r\n    })});\r\n    if(!(this.state.groups.length === 0))\r\n    {\r\n        this.setState({loading : false});\r\n    }else {\r\n      this.setState({loading : false});\r\n      this.toast.current.show({severity: 'error',  detail: 'No group found'});\r\n    }\r\n  }\r\n  \r\n  details = async() => {\r\n    const api = `/api/kdfinder/keyaudits`;\r\n    let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n    this.setState({groupsDetails:response.data.groups, keysDetails:response.data.keys });\r\n  }\r\n\r\n  openKeys = async() => {\r\n    this.setState({auditType: 'selectKeys', selectedKeys: []})\r\n    this.setState({loading: true})\r\n    this.fetchKeys()\r\n  }\r\n\r\n  addInSelectedKeysList = (e: any) => {\r\n    var selectedKeys = this.state.selectedKeys\r\n    if(e.target.checked){\r\n      if(e.target.value === \"all\"){\r\n        var keysId = this.state.keys.map((obj: any) =>  obj.id)\r\n        this.setState({selectedKeys: keysId})\r\n      }else{\r\n        selectedKeys.push(Number(e.target.value));\r\n        this.setState({selectedKeys: selectedKeys});\r\n      }\r\n    }else{\r\n      var selectedKeys = this.state.selectedKeys\r\n      if(e.target.value === \"all\"){\r\n        this.setState({selectedKeys: []})\r\n      }else{\r\n        selectedKeys = selectedKeys.filter((obj: any) => obj != e.target.value)\r\n        this.setState({selectedKeys: selectedKeys});\r\n      }\r\n    }\r\n  }\r\n\r\n  runKeysReport = async() => {\r\n      this.setState({loading: true})\r\n      const api = `/api/kdfinder/select_seqs_json/`;\r\n      let response = await axiosInstance.post(api ,{keys: this.state.selectedKeys} ,{ headers: {'Content-Type': 'application/json'} } );\r\n      \r\n      if(response.data.success)\r\n      {\r\n          this.setState({loading : false});\r\n        this.toast.current.show({severity: 'success',  detail: 'Successful run report'});\r\n        this.setState({auditType: ''})\r\n        this.fetchedData()\r\n\r\n      }else {\r\n        this.setState({loading : false});\r\n        this.toast.current.show({severity: 'error',  detail: 'Something went wrong'});\r\n        this.setState({auditType: ''})\r\n\r\n      }\r\n  }\r\n  \r\n  runGroupsReport = async() => {\r\n    this.setState({loading: true})\r\n    const api = `/api/kdfinder/keysgroupsjson/`;\r\n    let response = await axiosInstance.post(api ,{groups: this.state.selectedGroups} ,{ headers: {'Content-Type': 'application/json'} } );\r\n    \r\n    if(response.data.success)\r\n    {\r\n        this.setState({loading : false});\r\n      this.toast.current.show({severity: 'success',  detail: 'Successful run report'});\r\n      this.setState({auditType: ''})\r\n      this.fetchedData()\r\n\r\n    }else {\r\n      this.setState({loading : false});\r\n      this.toast.current.show({severity: 'error',  detail: 'Something went wrong'});\r\n      this.setState({auditType: ''})\r\n\r\n    }\r\n\r\n  }\r\n\r\n  addInSelectedGroupsList = (e: any) => {\r\n    var selectedGroups = this.state.selectedGroups\r\n    if(e.target.checked){\r\n      if(e.target.value === \"all\"){\r\n        var groupIds = this.state.groups.map((obj: any) =>  obj.id)\r\n        this.setState({selectedGroups: groupIds})\r\n      }else{\r\n        selectedGroups.push(Number(e.target.value));\r\n        this.setState({selectedGroups: selectedGroups});\r\n      }\r\n    }else{\r\n      var selectedGroups = this.state.selectedGroups\r\n      if(e.target.value === \"all\"){\r\n        this.setState({selectedGroups: []})\r\n      }else{\r\n        selectedGroups = selectedGroups.filter((obj: any) => obj != e.target.value)\r\n        this.setState({selectedGroups: selectedGroups});\r\n      }\r\n    }\r\n  }\r\n\r\n  fetchKeys = async () =>{\r\n    const api = `/api/kdfinder/select_seqs_json`;\r\n    let response = await axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } );\r\n    this.setState({keys:response.data.data.map((obj:any)=>{\r\n      return({...obj, showDetails: false\r\n      })\r\n    })});\r\n    if(!(this.state.keys.length === 0))\r\n    {\r\n        this.setState({loading : false});\r\n    }else {\r\n      this.setState({loading : false});\r\n      this.toast.current.show({severity: 'error',  detail: 'No key found'});\r\n    }\r\n  }\r\n  completeAudit = (type: string) =>{\r\n    const api = `/api/kdfinder/complete_audit/${type}`;\r\n      axiosInstance.get(api , { headers: {'Content-Type': 'application/json'} } ).then((response: any) => {\r\n        this.fetchedData()\r\n      })\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        <div>\r\n            <div>\r\n            {\r\n              this.state.loading  ? <div className='overlay-box1'>\r\n              <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n          </div> :''\r\n            }\r\n            <Toast ref={this.toast} />\r\n            <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Company Locations</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n               \r\n    \r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Locations\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 estimates-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      <th>Run Audit</th>\r\n                                      <th className=\"text-center\">Keys Confirmed</th>\r\n                                      <th className=\"text-center\">Waiting for Confirmation</th>\r\n                                      <th className=\"text-right\">Action</th>  \r\n                                      </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                  <tr style={{cursor: 'pointer'}} >\r\n                                      <td className=\"primary-text\" onClick={ this.openGroups}>Audit Key Groups</td>\r\n                                      <td className=\"text-center\" onClick={ this.openGroups}>{this.state.groupsDetails.confirmed}</td>\r\n                                      <td className=\"text-center\" onClick={ this.openGroups}>{this.state.groupsDetails.waiting}</td>\r\n                                      <td className=\"text-right general-btn\">\r\n                                      <button className=\"btn blue-btn\"  \r\n                                        onClick={ () => this.completeAudit('group')}\r\n                                        >Complete</button>\r\n                                      </td>\r\n                                  </tr>\r\n                                  <tr style={{cursor: 'pointer'}} >\r\n                                      <td className=\"primary-text\" onClick={ this.openKeys}>Audit Selection of Keys</td>\r\n                                      <td className=\"text-center\" onClick={ this.openKeys}>{this.state.keysDetails.confirmed}</td>\r\n                                      <td  className=\"text-center\" onClick={ this.openKeys}>{this.state.keysDetails.waiting}</td>\r\n                                      <td  className=\"text-right general-btn\">\r\n                                        <button className=\"btn blue-btn\"  \r\n                                        onClick={ () => this.completeAudit('key')} \r\n                                        >Complete</button>\r\n                                      </td>\r\n                                    </tr>\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              {\r\n                this.state.auditType  === 'group' ?\r\n            \r\n                     <div className=\"mt-2 overview-pannel-body table-responsive-sm\"  >\r\n            <table className=\"table\" style={{backgroundColor:\"#fff\"}}>\r\n              <thead style={{ color: \"#fff\",backgroundColor:\"#12739A\" }}>\r\n                <tr>\r\n                    <th>\r\n                    <label className=\"container mb-4\">\r\n                      <input type=\"checkbox\" onChange={this.addInSelectedGroupsList} value={\"all\"} />\r\n                      <span className=\"checkmark\"></span>\r\n\r\n                    </label>\r\n                      </th>\r\n                  <th data-visible=\"true\" >Group Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.state.groups.map((item: any,i: any)=>{\r\n              return(\r\n                <>\r\n                <tr key={i}>\r\n                  <td>\r\n                    \r\n                    <label className=\"container mb-4\">\r\n                      <input type=\"checkbox\"  value={item.id} onChange={this.addInSelectedGroupsList} checked={this.state.selectedGroups.includes(item.id)} />\r\n                      <span className=\"checkmark\"></span>\r\n\r\n                    </label>\r\n                  </td>\r\n                  <td>{item.name}</td>\r\n                </tr>\r\n                </>\r\n                )})}\r\n              </tbody>\r\n              </table>\r\n              <button className=\"btn btn-primary m-1\" style={{background: 'rgb(18, 115, 154)'}} disabled={this.state.selectedGroups.length ==0} onClick={this.runGroupsReport}>Run Report</button>\r\n              <button className=\"btn btn-danger m-1\" onClick={() => this.setState({auditType: ''})}>Cancel</button>\r\n              </div>\r\n                :  \r\n                    ''\r\n            }\r\n            {\r\n                this.state.auditType  === 'selectKeys' ?\r\n            \r\n                     <div className=\"mt-2 overview-pannel-body table-responsive-sm\"  >\r\n                        <table className=\"table\" style={{backgroundColor:\"#fff\"}}>\r\n                            <thead style={{ color: \"#fff\",backgroundColor:\"#12739A\" }}>\r\n                            <tr>\r\n                               <th>\r\n                                 \r\n                                <label className=\"container mb-4\">\r\n                                  <input type=\"checkbox\"  \r\n                                  value={\"all\"} onChange={this.addInSelectedKeysList}\r\n                                   />\r\n                                  <span className=\"checkmark\"></span>\r\n\r\n                                </label>\r\n                                </th>\r\n                                <th data-visible=\"true\" >Key ID Stamp</th>\r\n                                <th>Email</th>\r\n                                <th>Phone</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody className='tbody'>\r\n                            {this.state.keys.map((item: any,i: any)=>{\r\n                            return(\r\n                            <>\r\n                            <tr key={i}>\r\n                               <td>\r\n                                 \r\n                                <label className=\"container mb-4\">\r\n                                  <input type=\"checkbox\"  \r\n                                  value={item.id} onChange={this.addInSelectedKeysList} checked={this.state.selectedKeys.includes(item.id)}\r\n                                   />\r\n                                  <span className=\"checkmark\"></span>\r\n\r\n                                </label>\r\n                                </td>\r\n                                <td>{item.key_id +\" - \"+ item.sequence}</td>\r\n                                <td>{item.email}</td>\r\n                                <td>{item.phone}</td>\r\n                            </tr>\r\n                            \r\n                            </>\r\n                            )})}\r\n                            </tbody>\r\n                        </table>\r\n                        <button className=\"btn btn-primary m-1\" style={{background: 'rgb(18, 115, 154)'}} disabled={this.state.selectedKeys.length ==0} onClick={this.runKeysReport}>Run Report</button>\r\n                         <button className=\"btn btn-danger m-1\" onClick={() => this.setState({auditType: ''})}>Cancel</button>\r\n             \r\n                    </div>\r\n                :  \r\n                    ''\r\n            }\r\n                            </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n        \r\n           \r\n           </div>\r\n            </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\nexport default AuditKeys;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ServiceRequest.tsx",["308","309"],"import React from 'react';\r\nimport axiosInstance from '../../api/api';\r\nimport truck from '../icons/truck.svg';\r\nimport cancel from '../icons/cancel.svg';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Modal from 'react-modal';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport { Toast } from 'primereact/toast';\r\nimport viewa from '../icons/viewa.svg';\r\nimport ServiceRequestDetails from './ServiceRequestDetails';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n    data:any;\r\n    last_name: any;\r\n    cus_no:any;\r\n    loc_no: any;\r\n    loading : boolean;\r\n    modalIsOpen:any;\r\n    address :any;\r\n    location:any;\r\n    email :any;\r\n    offset: any;\r\n    perPage: any;\r\n    totalRecords: any;\r\n    pageCount:any;\r\n    tableData :any;\r\n    message:any;\r\n\r\n}\r\n\r\nclass ServiceRequest extends React.Component<{},Props> {\r\n    toast: React.RefObject<any>;\r\n    constructor(props:any){\r\n        super(props);\r\n        this.toast = React.createRef();\r\n        this.state={\r\n            data:[],\r\n            loc_no: '',\r\n            last_name : '',\r\n            cus_no :'',\r\n            loading : false,\r\n            modalIsOpen : false,\r\n            address : '',\r\n            location : '',\r\n            email : '',\r\n            offset: 0,\r\n            perPage: 10,\r\n            totalRecords: 0,\r\n            pageCount:0,\r\n            tableData : [],\r\n            message:''\r\n        }\r\n    }\r\n    customStyles = {\r\n        content : {\r\n          top                   : '50%',\r\n          left                  : '50%',\r\n          right                 : 'auto',\r\n          bottom                : 'auto',\r\n          marginRight           : '-20%',\r\n          transform             : 'translate(-50%, -50%)',\r\n          width                 : '32.25rem',\r\n          height                : '29rem'\r\n        }\r\n      };\r\n\r\n    details=(loc_no:any,id:any)=> {\r\n        const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n            if(i===id){\r\n            if(obj.showDetails=== false){\r\n                this.setState({loading:true});\r\n            }\r\n            }\r\n            if(i===id){\r\n                obj.showDetails = true;\r\n            }else{\r\n                obj.showDetails = false;\r\n            }\r\n            return {...obj}\r\n            });\r\n            this.setState({tableData :updatedData});\r\n        //this.setState({edit:true});\r\n        this.setState({loc_no:loc_no});\r\n    };\r\n\r\n    fetchedData= async()=>{\r\n        try {\r\n            this.setState({loading : true});\r\n            const token = localStorage.getItem('access_token');\r\n            const api = `/api/customer/service-request/`;\r\n            let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${token}`} });\r\n            \r\n            this.setState({data:response.data.data, last_name:response.data.last_name, cus_no: response.data.cus_no, email: response.data.email});\r\n            let slice = response.data.data.slice(this.state.offset, this.state.offset + this.state.perPage);\r\n            this.setState({pageCount: Math.ceil(response.data.data.length / this.state.perPage), totalRecords: response.data.data.length});\r\n            this.setState({tableData:slice});\r\n            if(!(this.state.data.length === 0))\r\n                {\r\n                    this.setState({loading : false});\r\n                }else {\r\n                    this.setState({loading : false});\r\n                    this.toast.current.show({severity: 'error',  detail: 'No record found'});\r\n  \r\n                  }\r\n            \r\n        }catch(error){\r\n            this.setState({loading : false});\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    invoice = (location:any,address:any) => {\r\n        this.setState({location:location, address:address, modalIsOpen:true});\r\n      }\r\n\r\n      formValidation = () =>{\r\n        let isValid = true;\r\n        if(this.state.message === ''){\r\n                this.toast.current.show({severity: 'error', detail: \"Please enter Description\"});\r\n            isValid = false;\r\n         }\r\n        return isValid\r\n    }\r\n\r\n      handleSubmit = (e:any) => {\r\n        e.preventDefault();\r\n        let isValid = this.formValidation();\r\n        if(isValid){\r\n        try{\r\n            this.setState({loading:true});\r\n        axiosInstance\r\n            .post(`/api/customer/service-request/`, {\r\n                location:this.state.location,\r\n                address:this.state.address,\r\n                message:this.state.message\r\n            },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n            .then((res) => {\r\n                this.setState({loading:false});\r\n                if(res.data.status===200){\r\n                        this.toast.current.show({severity: 'success',  detail: 'Query Send Successfully'});\r\n                    this.setState({message:'',modalIsOpen:false});\r\n                } else {\r\n                      this.toast.current.show({severity: 'error',  detail: 'Something went wrong, please contact to Calgary Lock and Safe'});\r\n                    \r\n                }\r\n            })\r\n            .catch((error)=>{\r\n                this.setState({loading:false});\r\n                    this.toast.current.show({severity: 'error',  detail: 'Server error'});\r\n                  \r\n            })\r\n           \r\n        } catch(error){\r\n             throw error;\r\n        }\r\n      }\r\n    }\r\n    \r\n      renderModal = () =>{ \r\n        return(\r\n            <>\r\n            <div style={{overflow:'hidden'}}>\r\n            <div style={{textAlign:'right'}} >\r\n               <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n            </div>\r\n            <div style={{marginLeft:'1.875rem'}}>\r\n                <div className=\"form-group row\">\r\n                    <label htmlFor=\"staticEmail\" style={{color:\"#888888\", fontSize:'0.875rem'}} className=\"col-2 col-form-label\">EmailId:</label>\r\n                    <div className=\"col-sm-6\">\r\n                      <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.email}</span>\r\n                    </div>\r\n                </div>  \r\n                <div className=\"form-group row\">\r\n                    <label style={{color:\"#888888\", fontSize:'0.875rem'}}  className=\"col-sm-2 col-form-label\">Location:</label>\r\n                    <div className=\"col-sm-6\">\r\n                      <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.location}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <label style={{color:\"#888888\", fontSize:'0.875rem'}}  className=\"col-sm-2 col-form-label\">Address:</label>\r\n                    <div className=\"col-sm-6\">\r\n                       <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.address}</span>\r\n                    </div>\r\n                </div>  <br></br>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleFormControlTextarea1\" style={{color:\"#888888\"}} >Request Description</label>\r\n                    <textarea className=\"form-control\" style={{width:'26.188rem', height:'7.375rem'}} id=\"exampleFormControlTextarea1\"  value={this.state.message} onChange={(e)=>{this.setState({message : e.target.value})}}></textarea>\r\n                </div>\r\n                <div>\r\n                  <button style={{backgroundColor:\"#009ED6\",width:\"26.188rem\", height:'2.5rem'}} className=\"btn btn-primary\" type=\"submit\" onClick={this.handleSubmit}>Request</button>\r\n              </div>\r\n            </div>\r\n            </div>\r\n            </>\r\n        )\r\n      }\r\n\r\n      noPermission = () =>{\r\n        this.toast.current.show({severity: 'error',  detail: `You don't have permission`});\r\n      }\r\n    \r\n\r\n    componentDidMount = async ()=>{\r\n       this.fetchedData();\r\n    }\r\n    closeModal = () =>{\r\n        this.setState({modalIsOpen:false, message:'' });\r\n      }\r\n\r\n      onPageChange = (event:any) => {\r\n      let offset = event.first;\r\n      let perPage = event.rows;\r\n      this.setState({offset:offset, perPage:perPage})\r\n      let slice = this.state.data.slice(offset, offset + perPage);\r\n      this.setState({tableData:slice});\r\n  }\r\n  cancel(id:any) {\r\n    const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n        if(obj.loc_no===id){\r\n          obj.showDetails = false;\r\n        }\r\n        return {...obj}\r\n    })\r\n    this.setState({tableData: updatedData});\r\n   }\r\n\r\n   load = () =>{\r\n    this.setState({loading:false});\r\n  }\r\n  loadt = () =>{\r\n    this.setState({loading:true});\r\n  }\r\n\r\n  renderEditForm=(show:any,id:any)=>{\r\n    if(show){\r\n      return(\r\n        <>\r\n        <>\r\n            <tr style={{height:\"0px\"}}>\r\n                <td colSpan={5} className=\"p-0 m-0\">\r\n                    <div className=\"accordian\"> \r\n                        <div className=\"col-12\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-6\">\r\n                                    <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Dispatches Details</p>\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                <span className=\"detail-created\" onClick={()=>this.cancel(id)} >X</span>\r\n                            </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <ServiceRequestDetails load={this.load} loadt={this.loadt} locationNo={this.state.loc_no} />\r\n                    </td>\r\n            </tr>\r\n            </>\r\n       </>\r\n      )\r\n    }\r\n  }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            <div >\r\n            <Toast ref={this.toast} />\r\n            {this.state.loading ? <div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div> :''}\r\n                <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n                <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Request Service</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>{this.state.last_name}</h6>\r\n                                        <h6>{this.state.cus_no}</h6>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n    \r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  Request services\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 estimates-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      <th scope=\"col\">Location Name</th>\r\n                                      <th className=\"text-center\" scope=\"col\">Address</th>\r\n                                      <th style={{textAlign:\"right\"}} className=\"pr-4\" scope=\"col\">Actions</th>\r\n                                      </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {this.state.tableData.map((item: any,i: any)=>{\r\n                                    return(\r\n                                        <>\r\n                                    <tr key={i}>\r\n                                    <td className=\"primary-text\" onClick={()=>this.details(item.loc_no,i)}>{item.location}</td>\r\n                                    <td className=\"text-center\">{item.address}</td>\r\n                                    <td className=\"text-right general-btn\"  >\r\n                                        <button className=\"btn blue-btn\"  onClick={(localStorage.getItem('service_request')=== 'true')? ()=>this.invoice(item.location ,item.address) : this.noPermission}>Request</button>\r\n                                    </td>\r\n                                    </tr>\r\n                                    {this.renderEditForm(item.showDetails, item.loc_no)}\r\n                                    \r\n                                    </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                              <Paginator first={this.state.offset} rows={this.state.perPage} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10,20,30]} \r\n                                  template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                                  onPageChange={this.onPageChange}></Paginator>\r\n                                  \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ServiceRequest;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\SystemNumber.tsx",["310"],"import React from 'react';\r\nimport axiosInstance from '../../api/api';\r\nimport tick from '../icons/tick.svg';\r\nimport cross from '../icons/cross.svg';\r\nimport edit1 from '../icons/edit.svg';\r\nimport { Toast } from 'primereact/toast';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\ninterface Props{\r\n   data:any;\r\n   loading :boolean;\r\n   file_number:any;\r\n   location:any;\r\n   cus_no:any;\r\n   last_name:any;\r\n}\r\nclass SystemNumber extends React.Component<{},Props> {\r\n  toast: React.RefObject<any>;\r\n    constructor(props:any){\r\n        super(props);\r\n        this.toast = React.createRef();\r\n        this.state={\r\n            data:[],\r\n            loading:false, \r\n            file_number:'',\r\n            location:'',\r\n            cus_no:'',\r\n            last_name:'',\r\n        }\r\n    }\r\n    \r\n\r\n   fetchedData = async() => {\r\n   try {\r\n     this.setState({loading : true});\r\n     const api = `/api/customer/file-numbers/`;\r\n     let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n     this.setState({data:response.data.data, last_name: response.data.last_name, cus_no: response.data.cus_no});\r\n\r\n     if(!(this.state.data.lenght === 0))\r\n       {\r\n           this.setState({loading : false});\r\n       }else {\r\n        this.setState({loading : false});\r\n        this.toast.current.show({severity: 'error',  detail: 'No record found'});\r\n\r\n      }\r\n     return this.state.data;\r\n }catch(error){\r\n   this.setState({loading : false});\r\n     throw error;\r\n }\r\n\r\n  }\r\n\r\n componentDidMount= async()=>{\r\n  this.fetchedData();\r\n }\r\n\r\n\r\n onUpdate = (e:any,id:any)=>{\r\n    e.preventDefault();\r\n    this.setState({loading:true});\r\n    axiosInstance\r\n      .patch(`/api/customer/file-numbers/${id}/`, {\r\n               location : this.state.location,\r\n            },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n      .then((res) => {\r\n          this.setState({loading:false});\r\n          if((res.data.status)===200){\r\n             const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n                if((obj.id)===id){\r\n                    obj.location = this.state.location;\r\n                    obj.editData = false;\r\n                } \r\n                return ({...obj})\r\n               })\r\n        this.setState({data :updatedData});\r\n        let node = this.toast.current;\r\n          if(node){\r\n            node.show({severity: 'success',  detail: 'Location updated successfully'});\r\n        }\r\n      }else {\r\n        let node = this.toast.current;\r\n          if(node){\r\n            node.show({severity: 'error',  detail: 'Something went wrong'});\r\n        }\r\n      } \r\n      });\r\n  \r\n   }\r\n\r\n onEdit= (id:any)=>{\r\n    this.setState({data: this.state.data.map((obj:any,i:number)=>{\r\n     if(i===id){\r\n       obj.editData = true;\r\n     }else{\r\n       obj.editData = false;\r\n     }\r\n     return {...obj}\r\n     })});\r\n\r\n     this.setState({file_number: this.state.data[id].file_number,\r\n       location: this.state.data[id].location,\r\n     })\r\n };\r\n\r\n onCancel =(id:any)=>{\r\n    this.setState({data: this.state.data.map((obj:any,i:number)=>{\r\n      if(i===id){\r\n        obj.editData = false;\r\n      }\r\n      return {...obj}\r\n    })\r\n  })\r\n    \r\n  }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            <div>\r\n            <Toast ref={this.toast} />\r\n            {this.state.loading ? <div className='overlay-box1'>\r\n                    <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n                </div>:''}\r\n                <section className=\"overview\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <h6 className=\"over-text\">Request Service</h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section className=\"filter-pannel\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-12\">\r\n                                <div className=\"filter-pannel-inner d-flex justify-content-between flex-wrap\">\r\n                                    <div>\r\n                                        <h6>{this.state.last_name}</h6>\r\n                                        <h6>{this.state.cus_no}</h6>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n    \r\n                <div className=\"container-fluid\">\r\n                  <div className=\"row\">\r\n                      <div className=\"col-lg-12\">\r\n                          <div className=\"overview-pannel-cal\">\r\n                              <div className=\"overview-pannel-header\">\r\n                                  System Numbers\r\n                              </div>\r\n                              <div className=\"overview-pannel-body table-responsive-sm\">\r\n                                <table  className=\"table mb-0 estimates-table\">\r\n                                  <thead className=\"thead-light\">\r\n                                      <tr >\r\n                                      <th scope=\"col\">Location Name</th>\r\n                                      <th className=\"text-center\" scope=\"col\">Address</th>\r\n                                      <th style={{textAlign:\"right\"}} className=\"pr-4\" scope=\"col\">Actions</th>\r\n                                      </tr>\r\n                                  </thead>\r\n                                  <tbody>\r\n                                    {this.state.data.map((item: any,i: any)=>{\r\n                                    return(\r\n                                        <>\r\n                                    <tr key={i}>\r\n                                    <td>{item.file_number}</td>\r\n\r\n                                    <td className=\"text-center\">\r\n                                      {item.editData ? <input  type=\"text\"  name=\"location\" value={this.state.location} onChange={(e)=>{this.setState({location : e.target.value})}}  /> : item.location}\r\n                                      {item.address}</td>\r\n                                    <td className=\"text-right general-btn\"  >\r\n                                       {item.editData ? <span className=\"mr-4\"><img style={{cursor:\"pointer\",width:\"0.75rem\",height:\"0.75rem\",marginLeft:\"-1.875rem\",marginRight:\"1.25rem\"}} onClick={()=>this.onCancel(i)} alt=\"cross\" src={cross} /><img style={{cursor:\"pointer\",width:\"1rem\",height:\"1rem\"}} onClick={(e)=>this.onUpdate(e,item.id)} alt=\"tick\" src={tick} /></span>: \r\n                                        <button className=\"btn blue-btn\" onClick={()=>this.onEdit(i)}>Update</button>\r\n                                    }\r\n                                    </td>\r\n                                    </tr>\r\n                                    </>\r\n                                    )})}\r\n                                  </tbody>\r\n                              </table>\r\n                        \r\n                              </div>\r\n                                  \r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n              \r\n          </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SystemNumber;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\CompanyDetailsSummary.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\NotFound.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysDetails.tsx",["311"],"import React from 'react';\r\nimport brokenkey from '../icons/BrokenKey.svg';\r\nimport questionmark from '../icons/questionmark.svg';\r\nimport edit1 from '../icons/edit.svg';\r\nimport 'jspdf-autotable';\r\nimport tick from '../icons/tick.svg';\r\nimport verify from '../icons/tick.png';\r\nimport cross from '../icons/cross.svg';\r\nimport axiosInstance from '../../api/api';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport { Toast } from 'primereact/toast';\r\nimport { Calendar } from 'primereact/calendar';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  edit:boolean;\r\n  data:any;\r\n  [key :string]:any;\r\n  loading : boolean;\r\n}\r\n\r\n\r\nclass ViewKeysDetails extends React.Component<{viewdata:any,load:any,loadc:any},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n  constructor(props:any){\r\n    super(props);\r\n    this.toast = React.createRef();\r\n    this.state={\r\n      edit:false,\r\n      data:[],\r\n      tenant_location:\"\",\r\n      key_holder:'',\r\n      phone:'',\r\n      email:'',\r\n      date_issued:'',\r\n      lost_key:'',\r\n      broken_key:'',\r\n      loading:false\r\n    }\r\n  }\r\n  \r\n  handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\r\n    let name = e.target.name;\r\n    let value = e.target.value;\r\n    this.setState({[name]:value});\r\n};\r\n\r\n  handleCheckboxSlider = (e: { target: { name: any; checked:any;} },item:any,id:any) =>{\r\n    this.setState({lost_key : item.lost_key,broken_key: item.broken_key});\r\n    let name = e.target.name;\r\n    let value= e.target.checked;\r\n    let lost_key:any = null;\r\n    let broken_key:any = null;\r\n    if(name==='lost_key'){\r\n       lost_key = value;\r\n       broken_key= item.broken_key;\r\n    }else {\r\n       lost_key = item.lost_key;\r\n       broken_key= value;\r\n    }\r\n\r\n    const updateCheck = this.state.data.map((obj:any,i:any)=>{\r\n      if(id===i){\r\n        obj.lost_key= lost_key;\r\n        obj.broken_key= broken_key;\r\n      }\r\n      return {...obj}\r\n    })\r\n    this.setState({data: updateCheck});\r\n    \r\n    this.setState({[e.target.name]:e.target.checked});\r\n    this.props.loadc();\r\n    axiosInstance\r\n      .patch(`/api/kdfinder/sequence/${item.id}/`,{\r\n        lost_key: lost_key,\r\n        broken_key: broken_key,\r\n            },\r\n              { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n        if(res.data.status===200){\r\n          this.toast.current.show({severity: 'success',  detail: 'Updated successfully'});\r\n          this.props.load();\r\n        }else {\r\n          this.toast.current.show({severity: 'error',  detail: 'Not Updated'});\r\n          this.props.load();\r\n        }\r\n \t\t\t});\r\n};\r\n  onUpdateVerifyMethod = (e: any,item:any,id:any) => {\r\n    this.setState({verify_mthod : item.verify_method});\r\n    let name = e.target.name;\r\n    let value= e.target.value;\r\n    let verify_method:any = null;\r\n    verify_method= value;\r\n\r\n    const updateCheck = this.state.data.map((obj:any,i:any)=>{\r\n      if(id===i){\r\n        obj.verify_method = verify_method;\r\n      }\r\n      return {...obj}\r\n    })\r\n    this.setState({data: updateCheck});\r\n    axiosInstance\r\n      .patch(`/api/kdfinder/sequence/${item.id}/`,{\r\n        verify_method: verify_method,\r\n            },\r\n              { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n            )\r\n\t\t\t.then((res) => {\r\n        if(res.data.status===200){\r\n          this.toast.current.show({severity: 'success',  detail: 'Updated successfully'});\r\n          this.props.load();\r\n        }else {\r\n          this.toast.current.show({severity: 'error',  detail: 'Not Updated'});\r\n          this.props.load();\r\n        }\r\n \t\t\t});\r\n\r\n  } \r\n\r\n onUpdate = (e:any,id:any)=>{\r\n  e.preventDefault();\r\n // this.setState({loading:true});\r\n this.props.loadc();\r\n  axiosInstance\r\n    .put(`/api/kdfinder/sequence/${id}/`, {\r\n             tenant_location : this.state.tenant_location,\r\n             key_holder : this.state.key_holder,\r\n             phone : this.state.phone,\r\n             email : this.state.email,\r\n             date_issued : this.state.date_issued\r\n          },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n          )\r\n    .then((res) => {\r\n      //alert(\"done\")\r\n      if(res.data.status===200){\r\n        this.setState({loading:false});\r\n        this.props.load();\r\n        this.toast.current.show({severity: 'success',  detail: 'Updated successfully'});\r\n      const updatedData = this.state.data.map((obj:any,i:number)=>{\r\n        if(obj.id===id){\r\n          obj.tenant_location = this.state.tenant_location;\r\n          obj.key_holder = this.state.key_holder;\r\n          obj.phone = this.state.phone;\r\n          obj.email = this.state.email;\r\n          obj.date_issued = this.state.date_issued;\r\n          obj.editData = false;\r\n        }\r\n        return {...obj}\r\n      })\r\n      this.setState({data :updatedData});\r\n      \r\n    }else {\r\n      this.setState({loading:false});\r\n      this.toast.current.show({severity: 'error',  detail: 'Not Updated'});\r\n    }\r\n    }); \r\n\r\n }\r\n\r\n  onEdit= (id:any)=>{\r\n     this.setState({data: this.state.data.map((obj:any,i:number)=>{\r\n      if(i===id){\r\n        obj.editData = true;\r\n      }else{\r\n        obj.editData = false;\r\n      }\r\n      return {...obj}\r\n      })});\r\n      this.setState({tenant_location: this.state.data[id].tenant_location,\r\n        key_holder: this.state.data[id].key_holder,\r\n        phone: this.state.data[id].phone,\r\n        email: this.state.data[id].email,\r\n        date_issued: this.state.data[id].date_issued,\r\n      })\r\n  };\r\n\r\n  componentDidMount=()=>{\r\n    this.props.load();\r\n    this.setState({data : this.props.viewdata.map((obj:any)=>{\r\n      return({...obj, editData: false\r\n      })\r\n    })});\r\n  };\r\n\r\n  onCancel =(id:any)=>{\r\n    this.setState({data: this.state.data.map((obj:any,i:number)=>{\r\n      if(i===id){\r\n        obj.editData = false;\r\n      }\r\n      return {...obj}\r\n    })\r\n  })\r\n    \r\n  }\r\n\r\n    render() {\r\n      return (\r\n          <>\r\n           <Toast ref={this.toast} />\r\n          {\r\n            this.state.loading ? <div className='overlay-box1'>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n        </div> :''\r\n          }\r\n            <div>\r\n          <table className=\"table m-0 p-0\" >\r\n            <thead >\r\n              <tr>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Key ID Stamp</th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Tenant</th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">First/Last Name</th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Phone </th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Email ID </th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Issue Date</th>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}}>Verify method</th>\r\n                <th style={{fontWeight:500,textAlign:\"right\",margin:0,width:\"6.65rem\"}} scope=\"col\">Edit Data</th>\r\n                <th style={{fontWeight:500,textAlign:'center',margin:0,width:\"6.65rem\"}} scope=\"col\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody >\r\n            {this.state.data.map((item: any,i: any)=>{\r\n             return(\r\n              <tr key={i}>\r\n                <th style={{margin:0,width:\"6.65rem\"}} scope=\"row\">{item.key_id +\" - \"+ item.sequence}</th>\r\n                <td style={{margin:0,width:\"7.65rem\"}}>{item.editData ? <input style={{height:'2rem',width:\"7.65rem\",padding:'.5rem',margin:0}} type=\"text\" className=\"form-control\" name=\"tenant_location\" value={this.state.tenant_location} onChange={this.handleInputChange}  /> : item.tenant_location}</td>\r\n                <td style={{margin:0,width:\"7.65rem\"}}>{item.editData ? <input style={{height:'2rem',width:\"7.65rem\",padding:'.5rem',margin:0}} type=\"text\" className=\"form-control\" name=\"key_holder\" value={this.state.key_holder} onChange={this.handleInputChange}   /> : (item.group ? <a href='/home/viewkeysgroup'>Group={item.group_data.name}</a> : item.key_holder)}</td>\r\n                <td style={{margin:0,width:\"7.65rem\"}}><div className=\"d-flex\">{item.editData ? <input style={{height:'2rem',width:\"7.65rem\",padding:'.5rem',margin:0}} type=\"text\" className=\"form-control\" name=\"phone\" value={this.state.phone} onChange={this.handleInputChange}   /> : item.phone}{\r\n                   item.verify_method === 'phone' ? <img alt=\"viewkeys\" style={{marginLeft:\"0.6rem\",width:'1.4rem'}} src={verify}/>  : ''\r\n                }</div></td>\r\n                <td style={{margin:0,width:\"7.65rem\"}}><div className=\"d-flex\">{item.editData ? <input style={{height:'2rem',width:\"7.65rem\",padding:'.5rem',margin:0}} type=\"text\" className=\"form-control\" name=\"email\" value={this.state.email} onChange={this.handleInputChange}  /> : item.email}\r\n                {\r\n                   item.verify_method === 'email' ? <img alt=\"viewkeys\" style={{marginLeft:\"0.6rem\",width:'1.4rem'}} src={verify}/>  : ''\r\n                }</div></td>\r\n                <td style={{margin:0,width:\"7.65rem\"}}>{item.editData ? <Calendar style={{height:'2rem',width:\"7.65rem\",padding:0,margin:0}} id=\"date_issued\" placeholder=\"YYYY-MM-DD\" value={this.state.date_issued} onChange={(e:any) => this.setState({date_issued:e.value.toLocaleDateString(\"fr-CA\")})}/> : item.date_issued}</td>\r\n                <td style={{margin:0,width:\"7.65rem\"}}>\r\n                  <select onChange={(e)=>this.onUpdateVerifyMethod(e,item,i)} className=\"form-select\" style={{padding: '0.1rem 1.75rem .1rem .75rem', fontSize: '0.8rem', backgroundPosition: 'right .5rem center', backgroundSize: '10px 10px'}} aria-label=\"Default select example\">\r\n                    <option value=\"email\" selected={item.verify_method === \"email\"}>Email</option>\r\n                    <option value=\"phone\" selected={item.verify_method === \"phone\"}>Phone</option>\r\n                  </select>\r\n                </td>\r\n                <td style={{textAlign:\"center\",margin:0,width:\"6.65rem\"}}>\r\n                  { \r\n                    item.group ? <></> \r\n                    :\r\n                    item.editData ? <span><img style={{cursor:\"pointer\",width:\"0.75rem\",height:\"0.75rem\",marginRight:\"1.25rem\"}} onClick={()=>this.onCancel(i)} alt=\"cross\" src={cross} /><img style={{cursor:\"pointer\",width:\"1rem\",height:\"1rem\"}} onClick={(e)=>this.onUpdate(e,item.id)} alt=\"tick\" src={tick} /></span>\r\n                  : <span> <img style={{cursor:\"pointer\",width:'1.3rem'}} onClick={()=>this.onEdit(i)} alt=\"edit\" src={edit1} /></span>\r\n                  }\r\n                </td>\r\n                <td style={{margin:0,textAlign:\"right\",width:'6rem'}}>\r\n                   <input style={{height:\"1.375rem\",width:\"1.375rem\", borderRadius:\".25em\",display:\"inline-block\",position:\"initial\",cursor:'pointer',marginLeft:'-2rem'}}  type=\"checkbox\" className=\"form-check-input\" name=\"lost_key\" defaultChecked={item.lost_key} onChange={(e)=>this.handleCheckboxSlider(e,item,i)}/>\r\n                   <img alt=\"viewkeys\" style={{marginLeft:\"0.6rem\",width:'0.4rem'}} src={questionmark}/>\r\n                   <input style={{height:\"1.375rem\",width:\"1.375rem\",marginLeft:\".8rem\",display:\"inline-block\",borderRadius:\".25em\",position:\"initial\",cursor:'pointer'}} className=\"form-check-input\" type=\"checkbox\" name=\"broken_key\" defaultChecked={item.broken_key} onChange={(e)=>this.handleCheckboxSlider(e,item,i)}/>\r\n                   <img alt=\"viewkeys\" style={{marginLeft:\"0.6rem\",width:'0.8rem'}} src={brokenkey}/>\r\n                </td>\r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default ViewKeysDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Accounting.tsx",["312","313","314","315","316","317","318"],"import React from 'react';\r\nimport AccountingDetails from './AccountingDetails';\r\nimport viewa from '../icons/viewa.svg';\r\nimport axiosInstance, {baseURL} from '../../api/api';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport dollar from '../icons/dollar.svg';\r\nimport cancel from '../icons/cancel.svg';\r\nimport question from '../icons/question-mark.svg';\r\nimport Modal from 'react-modal';\r\nimport { Toast } from 'primereact/toast';\r\nimport { Paginator } from 'primereact/paginator';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport fileDownload from 'js-file-download'\r\nimport Payment from './Payement/Payment';\r\nimport  jsPDF from \"jspdf\";\r\nimport 'jspdf-autotable';\r\nimport { autoTable } from 'jspdf-autotable';\r\nimport image from '../icons/pdf-1.svg';\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\n\r\ninterface Props{\r\n    edit:boolean;\r\n    data:any;\r\n    loc_no:any;\r\n    last_name: any;\r\n    cus_no:any;\r\n    braintreeClientToken:any;\r\n    terms:any;\r\n    total_amount:any;\r\n    loading : boolean;\r\n    modalIsOpen:any;\r\n    paymentModalIsOpen:any;\r\n    invoiceModalIsOpen:any;\r\n    allInvoiceModalIsOpen:any;\r\n    address :any;\r\n    location:any;\r\n    amount :any;\r\n    message:any;\r\n    offset: any;\r\n    perPage: any;\r\n    totalRecords: any;\r\n    pageCount:any;\r\n    tableData :any;\r\n    allInvoice:any;\r\n    selectedProducts:any;\r\n    selectedAmount:any;\r\n    card:boolean;\r\n    invoiceLocation:any;\r\n    invoiceAddress:any;\r\n    invoiceLoc_no:any;\r\n    selectedAllProducts:any;\r\n    selectedAllAmount:any;\r\n    over_30:any;\r\n    over_60:any;\r\n    over_90:any;\r\n  }\r\nclass Accounting extends React.Component<{},Props> {\r\n  mytoast: React.RefObject<any>;\r\n  instance: any;\r\n    constructor(props:Props){\r\n        super(props);\r\n        this.mytoast = React.createRef();\r\n        this.state={\r\n          edit:false,\r\n          data: [],\r\n          loc_no:'',\r\n          last_name : '',\r\n          cus_no :'',\r\n          terms:'',\r\n          total_amount:'',\r\n          over_30:'',\r\n          over_60:'',\r\n          braintreeClientToken: null,\r\n          over_90:'',\r\n          loading : false,\r\n          modalIsOpen: false,\r\n          paymentModalIsOpen: false,\r\n          invoiceModalIsOpen:false,\r\n          allInvoiceModalIsOpen:false,\r\n          address : '',\r\n          location : '',\r\n          amount : '',\r\n          message: '',\r\n            offset: 0,\r\n            perPage: 10,\r\n            totalRecords: 0,\r\n            pageCount:0,\r\n            tableData : [],\r\n            allInvoice:[],\r\n            selectedProducts: null,\r\n            selectedAmount: 0,\r\n            selectedAllProducts:null,\r\n            selectedAllAmount:0,\r\n            card:false,\r\n            invoiceLocation:'',\r\n            invoiceAddress:'',\r\n            invoiceLoc_no:'',\r\n        }}\r\n\r\n        customStyles = {\r\n            content : {\r\n              top                   : '50%',\r\n              left                  : '50%',\r\n              right                 : 'auto',\r\n              bottom                : 'auto',\r\n              marginRight           : '-20%',\r\n              transform             : 'translate(-50%, -50%)',\r\n              width                 : '31.5rem',\r\n              height                : '33.75rem'\r\n            }\r\n          };\r\n          invoiceStyles = {\r\n            content : {\r\n              top                   : '50%',\r\n              left                  : '50%',\r\n              right                 : 'auto',\r\n              bottom                : 'auto',\r\n              marginRight           : '-20%',\r\n              transform             : 'translate(-50%, -50%)',\r\n              width                 : '46.875rem',\r\n              height                : '37.5rem',\r\n            }\r\n\r\n          };\r\n\r\n\r\n         exportPDFinvoices = async() => {\r\n          /* try {\r\n            const api = 'customer/accounting/all/invoice/';\r\n            this.setState({loading:true});\r\n            let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n\r\n        }catch(error){\r\n            const node = this.mytoast.current;\r\n            this.setState({loading : false});\r\n            if(node){\r\n                node.show({severity: 'error', detail: 'Server Error'});\r\n            }\r\n            throw error;\r\n        } */\r\n        /* const unit = \"pt\";\r\n          const size = \"A4\"; // Use A1, A2, A3 or A4\r\n          const orientation = \"portrait\"; // portrait or landscape\r\n          const marginLeft = 40;\r\n          const doc = new jsPDF(orientation, unit, size);\r\n          doc.setFontSize(15);\r\n      \r\n          const title = \"Invoices\";\r\n          const headers = [[\"Location Name\", \"Address\"]];\r\n          const data = this.state.data.map((item:any)=> [item.location, item.address]);\r\n      \r\n          let content = {\r\n            startY: 50,\r\n            head: headers,\r\n            body: data\r\n          };\r\n          doc.text(title, marginLeft, 40);\r\n          (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n          doc.save(\"Invoices.pdf\");  */\r\n      };\r\n           \r\n\r\n        exportPDFsingleinvoices = async(location:any,address:any,loc_no:any) => {\r\n\r\n          this.setState({loading:true});\r\n            try {\r\n              const api = `/api/customer/invoice/payment/${loc_no}/`;\r\n              let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n              if(!(this.state.allInvoice === null))\r\n              {\r\n                  this.setState({loading : false});\r\n              }\r\n              const unit = \"pt\";\r\n          const size = \"A4\"; // Use A1, A2, A3 or A4\r\n          const orientation = \"portrait\"; // portrait or landscape\r\n          const marginLeft = 40;\r\n          const doc = new jsPDF(orientation, unit, size);\r\n          doc.setFontSize(15);\r\n      \r\n          const headers = [[\"Invoice number\", \"Amount\"]];\r\n          const data = response.data.map((item:any)=> [item.invoice, item.amount]);\r\n      \r\n          let content = {\r\n            startY: 100,\r\n            head: headers,\r\n            body: data\r\n          };\r\n          doc.text(`${location}`, marginLeft, 40);\r\n          doc.text(`${address}`, marginLeft, 80);\r\n          (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n          doc.save(\"Invoices.pdf\"); \r\n          }catch(error){\r\n              this.setState({loading : false});\r\n              throw error;\r\n          }\r\n          \r\n          \r\n        };\r\n\r\n        componentDidMount = async ()=>{\r\n            try {\r\n                const api = '/api/customer/accounting/';\r\n                this.setState({loading:true});\r\n                let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n                this.setState({data:response.data.data.map((obj:any)=>{\r\n                    return({...obj, showDetails: false\r\n                    })\r\n                  })});\r\n                    let slice = response.data.data.slice(this.state.offset, this.state.offset + this.state.perPage);\r\n                    this.setState({pageCount: Math.ceil(response.data.data.length / this.state.perPage), totalRecords: response.data.data.length});\r\n                    this.setState({tableData:slice.map((obj:any)=>{\r\n                        return({...obj, showDetails: false\r\n                        })\r\n                      })});\r\n                if(!(this.state.data.length === 0))\r\n                {\r\n                    this.setState({loading : false});\r\n                }else {\r\n                  this.setState({loading : false});\r\n                  this.mytoast.current.show({severity: 'error',  detail: 'No record found'});\r\n                }\r\n                this.setState({last_name:response.data.last_name, cus_no: response.data.cus_no, terms:response.data.terms, total_amount:response.data.total_amount, over_30:response.data.over_30, over_60:response.data.over_60, over_90:response.data.over_90})\r\n            }catch(error){\r\n                const node = this.mytoast.current;\r\n                this.setState({loading : false});\r\n                if(node){\r\n                    node.show({severity: 'error', detail: 'Server Error'});\r\n                }\r\n                throw error;\r\n            };\r\n            this.getbraintreeClientToken()\r\n        }\r\n\r\n        async getbraintreeClientToken(){\r\n          let response = await axiosInstance.get('/api/customer/braintree/get_client_token', { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n          const token = response.data.token;\r\n          this.setState({braintreeClientToken: token})\r\n        }\r\n\r\n        formValidation = () =>{\r\n          let isValid = true;\r\n          if(this.state.message === ''){\r\n                  this.mytoast.current.show({severity: 'error', detail: \"Please enter Description\"});\r\n              isValid = false;\r\n           }\r\n          return isValid\r\n      }\r\n\r\n         handleSubmit = (e:any) => {\r\n            e.preventDefault();\r\n            let isValid = this.formValidation();\r\n            if(isValid){\r\n            this.setState({loading:true});\r\n            try{\r\n            axiosInstance\r\n                .post(`/api/customer/accounting/help/`, {\r\n                    location:this.state.location,\r\n                    loc_no:this.state.loc_no,\r\n                    address:this.state.address,\r\n                    amount:this.state.amount,\r\n                    message:this.state.message,\r\n                },{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} }\r\n                )\r\n                .then((res) => {\r\n                  this.setState({loading:false});\r\n                    const node = this.mytoast.current;\r\n                    if(res.data.status===200){\r\n                        if(node){\r\n                            node.show({severity: 'success',  detail: 'Query Send Successfully'});\r\n                        }\r\n                        this.setState({message:'',modalIsOpen:false});\r\n                    } else {\r\n                        if(node){\r\n                          node.show({severity: 'error',  detail: 'Something went wrong, please contact to Calgary Lock and Safe'});\r\n                        }\r\n                    }\r\n                })\r\n                .catch((error)=>{\r\n                  this.setState({loading:false});\r\n                    const node = this.mytoast.current;\r\n                    if(node){\r\n                        node.show({severity: 'error',  detail: 'Something went wrong'});\r\n                      }\r\n                })\r\n               \r\n            } catch(error){\r\n                 throw error;\r\n            }\r\n          }\r\n        }\r\n\r\n        onPageChange = (event:any) => {\r\n          let offset = event.first;\r\n          let perPage = event.rows;\r\n          this.setState({offset:offset, perPage:perPage});\r\n          let slice = this.state.data.slice(offset, offset + perPage);\r\n          this.setState({tableData:slice});\r\n      }\r\n\r\n        details=(loc_no:any,id:any)=> {\r\n            const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n              if(i===id){\r\n                if(obj.showDetails=== false){\r\n                  this.setState({loading:true});\r\n                }\r\n              }\r\n                if(i===id){\r\n                  obj.showDetails = true;\r\n                }else{\r\n                  obj.showDetails = false;\r\n                }\r\n                return {...obj}\r\n                });\r\n              this.setState({tableData :updatedData});\r\n            //this.setState({edit:true});\r\n            this.setState({loc_no:loc_no});\r\n           };\r\n\r\n           loadt = () =>{\r\n            this.setState({loading:true});\r\n          }\r\n           load = () =>{\r\n             this.setState({loading:false});\r\n           }\r\n           \r\n           cancel(id:any) {\r\n            const updatedData = this.state.tableData.map((obj:any,i:number)=>{\r\n                if(i===id){\r\n                  obj.showDetails = false;\r\n                }\r\n                return {...obj}\r\n            })\r\n            this.setState({tableData: updatedData});\r\n           }\r\n\r\n           renderEditForm=(show:any,id:any)=>{\r\n            if(show){\r\n              return(\r\n                <>\r\n                <tr style={{height:\"0px\"}}>\r\n                    <td colSpan={6} style={{margin: 0, padding: 0}}>\r\n                        <div className=\"accordian\"> \r\n                          <div className=\"col-12\">\r\n                              <div className=\"row\">\r\n                                  <div className=\"col-6\">\r\n                                      <p style={{color:\"#fff\",textAlign:\"left\",marginTop:\"10px\"}}>Invoice Details</p>\r\n                                  </div>\r\n                                  <div className=\"col-6\">\r\n                                    <span className=\"detail-created\" onClick={()=>this.cancel(id)} >x</span>\r\n                                </div>\r\n                              </div>\r\n                          </div>\r\n                        </div>\r\n                        <AccountingDetails load={this.load} loadt={this.loadt} locationNo={this.state.loc_no} cus_no={this.state.cus_no}/>\r\n                     </td>\r\n                </tr>\r\n               </>\r\n              )\r\n            }\r\n          } \r\n          async buy() {\r\n            const { nonce } = await this.instance.requestPaymentMethod();\r\n            const api = `/api/customer/payments/`;\r\n            const data = {\"nonce\" :  nonce, \"amount\" : this.state.selectedAllAmount}\r\n            let response = await axiosInstance.post(api, data, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n\r\n          }\r\n\r\n          renderBillingModal = () => {\r\n            return (\r\n                !this.state.braintreeClientToken ? \r\n                    <div>\r\n                      <h1>Loading...</h1>\r\n                    </div>\r\n                :\r\n                    \r\n                <div>\r\n                {/* <DropIn\r\n                  options={{\r\n                    authorization: this.state.braintreeClientToken\r\n                  }}\r\n                  onInstance={(instance) => (this.instance = instance)}\r\n                /> */}\r\n                <button className=\"btn btn-primary\" onClick={this.buy.bind(this)}>Buy Now!</button>\r\n              </div>\r\n        \r\n            )\r\n          }\r\n          renderModal = () =>{ \r\n            return(\r\n                <>\r\n\r\n                <div>\r\n                <div style={{textAlign:'right'}}>\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n               </div>\r\n                <div style={{marginLeft:'0.938rem'}}>\r\n                    <div className=\"form-group row\">\r\n                        <label htmlFor=\"staticEmail\" style={{color:\"#888888\", fontSize:'0.875rem'}} className=\"col-4 col-form-label\">Location:</label>\r\n                        <div className=\"col-sm-6\">\r\n                           <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.location}</span>\r\n                        </div>\r\n                    </div>  \r\n                    <div className=\"form-group row\">\r\n                        <label style={{color:\"#888888\", fontSize:'0.875rem'}}  className=\"col-sm-4 col-form-label\">Address:</label>\r\n                        <div className=\"col-sm-6\">\r\n                           <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.address}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label style={{color:\"#888888\", fontSize:'0.875rem'}}  className=\"col-sm-4 col-form-label\">Location_number:</label>\r\n                        <div className=\"col-sm-6\">\r\n                           <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.loc_no}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label style={{color:\"#888888\", fontSize:'0.875rem'}}  className=\"col-sm-4 col-form-label\">Amount:</label>\r\n                        <div className=\"col-sm-6\">\r\n                           <span style={{fontSize:'0.875rem' , color:'#000000'}} className=\"form-control-plaintext\">{this.state.amount}</span>\r\n                        </div>\r\n                    </div>  <br></br>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"exampleFormControlTextarea1\" style={{color:\"#888888\"}} >Request Description</label>\r\n                        <textarea className=\"form-control\" style={{width:'26.188rem', height:'7.375rem'}} id=\"exampleFormControlTextarea1\" name='message' value={this.state.message} onChange={(e)=>{this.setState({message : e.target.value})}}></textarea>\r\n                    </div>\r\n                    <div>\r\n                  <   button style={{backgroundColor:\"#009ED6\",width:\"26.188rem\", height:'2.5rem'}} onClick={this.handleSubmit} className=\"btn btn-primary\" type=\"submit\">Send</button>\r\n                  </div>\r\n                </div>\r\n                </div>\r\n                </>\r\n            )\r\n          }\r\n\r\n          totalSelectedAmount = async(e:any) =>{\r\n            let sel = e.value;\r\n            var sum = 0;\r\n            await this.setState({selectedProducts : sel});\r\n            this.state.selectedProducts.map((item:any)=>{\r\n               sum = sum + parseFloat(item.amount);\r\n            });\r\n            this.setState({selectedAmount:sum.toFixed(2)});\r\n          } \r\n          \r\n          totalAllSelectedAmount = async(e:any) =>{\r\n            let sel = e.value;\r\n            var sum = 0;\r\n            await this.setState({selectedAllProducts : sel});\r\n            this.state.selectedAllProducts.map((item:any)=>{\r\n               sum = sum + parseFloat(item.amount);\r\n            });\r\n            this.setState({selectedAllAmount:sum.toFixed(2)});\r\n          } \r\n\r\n          pay = () =>{\r\n            this.setState({card:true});\r\n          }\r\n          \r\n          cancelPay = () =>{\r\n            this.setState({card:false});\r\n          }\r\n\r\n          changeModal = () =>{\r\n            const node = this.mytoast.current;\r\n            if(node){\r\n                node.show({severity: 'success', detail: 'Payment Success'});\r\n            }\r\n            this.setState({invoiceModalIsOpen:false, allInvoiceModalIsOpen: false, card: false});\r\n          }\r\n\r\n          renderInvoiceModal = () =>{\r\n            if(this.state.card){\r\n              return (\r\n                <><div>\r\n                <div style={{textAlign:'right'}}>\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n                </div>\r\n                <Payment invoiceLocation={this.state.invoiceLocation} \r\n                         invoiceAddress={this.state.invoiceAddress}\r\n                         selectedAmount={this.state.selectedAmount}\r\n                         selectedProducts={this.state.selectedProducts}\r\n                         loc_no={this.state.invoiceLoc_no}\r\n                         getItem={this.changeModal}\r\n                         cancelBtn={this.cancelPay}\r\n\r\n                          />\r\n                <div style={{textAlign:'center'}}>\r\n                <button \r\n                  className=\"btn btn-outline-danger\"\r\n                  type=\"button\"><span className=\"MuiButton-label\" onClick={this.cancelPay} >Cancel</span><span\r\n                      className=\"MuiTouchRipple-root\"></span></button>\r\n                  </div>         \r\n                  </div>   \r\n                </>\r\n              )\r\n          }else{\r\n              return(\r\n                  <>\r\n                  <div>\r\n                  <div style={{textAlign:'right'}}>\r\n                      <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n                  </div> \r\n                    <div className='row' style={{marginBottom:'1.25rem',marginTop:'-1.6rem'}}>\r\n                      <div className='col-2' style={{borderRight:'2px solid black',textAlign:'end'}}>\r\n                      <img alt='paylog' style={{width:'2.5rem'}} src='https://static.wixstatic.com/media/ebff0f_1022b7d5a7974f889c0d33e0de62d5b3~mv2.png/v1/crop/x_0,y_0,w_87,h_101/fill/w_92,h_100,al_c,lg_1,q_85/Logo.webp'/>\r\n                      </div>\r\n                      <div className='col-8'>\r\n                      <p style={{fontSize:\"1.7rem\",fontWeight:'bold',marginBottom:'.25rem'}}>CUSTOMER PAYMENT CENTER</p>\r\n                      </div>\r\n                    </div>\r\n                      <div style={{height:'60vh',overflow:'auto'}}>\r\n                      <DataTable value={this.state.allInvoice} selection={this.state.selectedProducts} onSelectionChange={this.totalSelectedAmount}>\r\n                        <Column selectionMode=\"multiple\" headerStyle={{ width: '3rem' }}></Column>\r\n                        <Column field=\"invoice\" header=\"Invoice Number\"></Column>\r\n                        <Column field=\"amount\" header=\"Balance\"></Column>\r\n                      </DataTable>\r\n                      </div>\r\n                      { (this.state.selectedProducts===null  || this.state.selectedProducts.length === 0 ) ?\r\n                      <div style={{textAlign:'right'}}>\r\n                       <button type=\"submit\" style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}}\r\n                         className=\"btn btn-primary\" disabled>Pay Now  ${this.state.selectedAmount}</button>  \r\n                      </div> :\r\n                      <div style={{textAlign:'right'}}>\r\n                      <button type=\"submit\" style={{backgroundColor:\"#?009ED6\",borderColor:\"#009ED6\"}}\r\n                        className=\"btn btn-primary\" onClick={this.pay}>Pay Now  ${this.state.selectedAmount}</button>  \r\n                        {/* <a href={'https://payments.calgarylockandsafe.com/'} style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}} */}\r\n                        {/* className=\"btn btn-primary\" >Pay Now  ${this.state.selectedAmount}</a> */}\r\n                     </div>\r\n                        }\r\n                  </div>\r\n                  </>\r\n              )\r\n          }\r\n          }\r\n          \r\n\r\n          renderAllInvoiceModal = () =>{\r\n            if(this.state.card){\r\n              return (\r\n                <>\r\n                <div style={{textAlign:'right'}}>\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n                </div>\r\n                <Payment invoiceALLLocation={this.state.last_name} \r\n                         selectedAmount={this.state.selectedAllAmount}\r\n                         selectedProducts={this.state.selectedAllProducts}\r\n                         getItem={this.changeModal}\r\n                         cancelBtn={this.cancelPay}\r\n                          />\r\n                <div style={{textAlign:'center'}}>\r\n\r\n                  </div>         \r\n                          \r\n                </>\r\n              )\r\n          }else{\r\n              return(\r\n                  <>\r\n                  <div>\r\n                  <div style={{textAlign:'right'}}>\r\n                     <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n                  </div>\r\n                    <div className='row' style={{marginBottom:'1.25rem',marginTop:'-1.6rem'}}>\r\n                      <div className='col-2' style={{borderRight:'2px solid black',textAlign:'end'}}>\r\n                      <img alt='paylog' style={{width:'2.5rem'}} src='https://static.wixstatic.com/media/ebff0f_1022b7d5a7974f889c0d33e0de62d5b3~mv2.png/v1/crop/x_0,y_0,w_87,h_101/fill/w_92,h_100,al_c,lg_1,q_85/Logo.webp'/>\r\n                      </div>\r\n                      <div className='col-8'>\r\n                      <p style={{fontSize:\"1.7rem\",fontWeight:'bold',marginBottom:'.25rem'}}>CUSTOMER PAYMENT CENTER</p>\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <p style={{paddingLeft:'3.25rem'}}><span style={{fontWeight:500}}>Location : </span>  {this.state.last_name}</p>\r\n                    </div>\r\n                      <div style={{height:'60vh',overflow:'auto'}}>\r\n                      <DataTable value={this.state.allInvoice} selection={this.state.selectedAllProducts} onSelectionChange={this.totalAllSelectedAmount}>\r\n                        <Column selectionMode=\"multiple\" headerStyle={{ width: '3rem' }}></Column>\r\n                        <Column field=\"invoice\" header=\"Invoice Number\"></Column>\r\n                        <Column field=\"amount\" header=\"Balance\"></Column>\r\n                      </DataTable>\r\n                      </div>\r\n                      { (this.state.selectedAllProducts===null || this.state.selectedAllProducts.length === 0 ) ?\r\n                      <div style={{textAlign:'right'}}>\r\n                       <button type=\"submit\" style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}}\r\n                         className=\"btn btn-primary\" disabled>Pay Now  ${this.state.selectedAllAmount}</button>  \r\n                      </div> :\r\n                      <div style={{textAlign:'right'}}>\r\n                      <button type=\"submit\" style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}}\r\n                        className=\"btn btn-primary\" onClick={this.pay}>Pay Now  ${this.state.selectedAllAmount}</button>  \r\n                        {/* <a href={'https://payments.calgarylockandsafe.com/'} style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\"}}\r\n                        {/* className=\"btn btn-primary\" >Pay Now  ${this.state.selectedAllAmount}</a> */}\r\n                     </div>\r\n                        }\r\n                  </div>\r\n                  </>\r\n              )\r\n          }\r\n          }\r\n\r\n          invoiceQuery = (location:any,address:any,amount:any,loc_no:any) => {\r\n            this.setState({message:''})\r\n            this.setState({location:location, address:address, amount:amount, loc_no:loc_no, modalIsOpen:true});\r\n          }\r\n\r\n          invoiceModal = async(loc_no:any,invoiceLocation:any, invoiceAddress:any) => {\r\n            this.setState({loading:true});\r\n            try {\r\n              const api = `/api/customer/invoice/payment/${loc_no}/`;\r\n              let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n              this.setState({allInvoice : response.data});\r\n              if(!(this.state.allInvoice === null))\r\n              {\r\n                  this.setState({loading : false});\r\n              }\r\n            }catch(error){\r\n                this.setState({loading : false});\r\n                throw error;\r\n            }\r\n            this.setState({ invoiceModalIsOpen:true, invoiceAddress:invoiceAddress, invoiceLocation:invoiceLocation, invoiceLoc_no:loc_no});\r\n            \r\n          }\r\n\r\n          closeModal = () =>{\r\n            this.setState({modalIsOpen:false,invoiceModalIsOpen:false,allInvoiceModalIsOpen:false,card:false,allInvoice:[],selectedProducts: null,selectedAmount:0,selectedAllProducts:null,selectedAllAmount:0});\r\n          }\r\n\r\n\r\n          noInvoice = () =>{\r\n              const node = this.mytoast.current;\r\n              if(node){\r\n                node.show({severity: 'error', detail: 'No Invoice Pending'});\r\n            }\r\n          }\r\n\r\n          invoiceModalPayAll = async() => {\r\n            this.setState({loading:true});\r\n            try {\r\n              const api = `/api/customer/invoice/all/payment/`;\r\n              let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n              this.setState({allInvoice : response.data});\r\n              if(!(this.state.allInvoice === null))\r\n              {\r\n                  this.setState({loading : false});\r\n              }\r\n          }catch(error){\r\n\r\n              this.setState({loading : false});\r\n              throw error;\r\n          }\r\n            this.setState({ allInvoiceModalIsOpen:true,});\r\n            \r\n          }\r\n    handleDownload = (api: string, name: string) => {\r\n      axiosInstance.get(api,{ headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`}, responseType: 'blob' }).then((res: any) => {\r\n        fileDownload(res.data,name )\r\n      })\r\n    }    \r\n    render(){\r\n        return(\r\n            <>\r\n            <div>\r\n              {\r\n                this.state.loading ? <div className='overlay-box1'>\r\n                <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n             </div > :''\r\n              }\r\n            <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n            <Modal style={this.invoiceStyles} isOpen={this.state.invoiceModalIsOpen} onRequestClose={this.closeModal}>{this.renderInvoiceModal()}</Modal>\r\n            <Modal style={this.invoiceStyles} isOpen={this.state.allInvoiceModalIsOpen} onRequestClose={this.closeModal}>{this.renderAllInvoiceModal()}</Modal>\r\n            <Toast ref={this.mytoast} />\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-12\">\r\n                <h6 className=\"over-text\">Overview</h6>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-4 pb-3\">\r\n\t\t\t\t\t\t\t<div className=\"customer-number\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">{this.state.last_name}</p>\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">Customer Number: {this.state.cus_no}</p>\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0 term-color\">Terms</p>\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0 term-color\">NET 30</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-8\">\r\n\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-3 pb-3\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"account-blnc\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"acount-blnc-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-text text-center\">Account Balance</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-price text-center\">${parseFloat(this.state.total_amount).toLocaleString(navigator.language, {maximumFractionDigits:2})}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-3 pb-3\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"account-blnc\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"acount-blnc-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-text text-center\">30 Days</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-price text-center\">${parseFloat(this.state.over_30).toLocaleString(navigator.language, {maximumFractionDigits:2})}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-3 pb-3\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"account-blnc\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"acount-blnc-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-text text-center\">60 Days</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-price text-center\">${parseFloat(this.state.over_60).toLocaleString(navigator.language, {maximumFractionDigits:2})}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-3 pb-3\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"account-blnc\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"acount-blnc-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-text text-center\">90 Days</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0 acount-price text-center\">${parseFloat(this.state.over_90).toLocaleString(navigator.language, {maximumFractionDigits:2})}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n{/* \t\t\t\t\t */}\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-12\">\r\n\t\t\t\t\t\t\t<div className=\"overview-pannel-cal\">\r\n\t\t\t\t\t\t\t\t<div className=\"overview-pannel-header\">\r\n\t\t\t\t\t\t\t\t\tInvoice\r\n\t\t\t\t\t\t\t\t</div>\r\n                <div className=\"overview-pannel-body table-responsive-sm\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"table-responsive\">\r\n\t\t\t\t\t\t\t\t\t\t<table className=\"table mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<thead className=\"thead-light\">\r\n                        <tr >\r\n                          <th  scope=\"col\" colSpan={2} >Location Name</th>\r\n                          <th  scope=\"col\" colSpan={2}>Address</th>\r\n                          <th  scope=\"col\">Open Invoice</th>\r\n                          <th style={{textAlign:\"right\"}} scope=\"col\">Actions</th>\r\n                          </tr>\r\n                      </thead>\r\n                      <tbody className=\"p-datatable-tbody\">\r\n                        <tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <label className=\"container\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\"></th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\"></th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\"></th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\"></th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" className=\"text-right general-btn\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn red-btn mb-1\" onClick={this.invoiceModalPayAll}>Pay All</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn blue-btn mb-1\" onClick={() => this.handleDownload(`${baseURL}/api/customer/pdf/all/invoice/${this.state.cus_no}/`,\"AllInvoices.pdf\")}>Print all</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n                        {this.state.tableData.map((item: any,i: any)=>{\r\n                          return(\r\n                              <>\r\n                          <tr key={i} >\r\n                          <td colSpan={2} className=\"primary-text\" onClick={(item.amount===0 || item.amount==='0.00')? this.noInvoice  : ()=>this.details(item.loc_no,i)}>{item.location}</td>\r\n                          <td colSpan={2}  >{item.address}</td>\r\n                          <td>$ {parseFloat(item.amount).toLocaleString()}</td>\r\n                          <td style={{textAlign:\"right\"}} className=\"text-right general-btn\">\r\n                            {/* <img data-toggle=\"tooltip\" width=\"20px\" data-placement=\"top\" title=\"Help\" alt=\"question\" className=\" ml-1 icon\"  onClick={()=>this.invoiceQuery(item.location ,item.address,item.amount,item.loc_no)} src={question}/> */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn red-btn mb-1\" onClick={(item.amount===0 || item.amount==='0.00')? this.noInvoice  : ()=>this.invoiceModal(item.loc_no,item.location,item.address)}>Pay</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn blue-btn mb-1\" onClick={() => this.exportPDFsingleinvoices(item.location ,item.address,item.loc_no)}>Print </button>\r\n\r\n                          </td>\r\n                          </tr>                                                                                                                                 \r\n                          {this.renderEditForm(item.showDetails,i)}\r\n                          </>\r\n                          )})}\r\n                              \r\n                      </tbody>\r\n                  </table>\r\n                  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n              </div>\r\n               \r\n                <Paginator \r\n                  template=\"RowsPerPageDropdown CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink \"\r\n                  first={this.state.offset} rows={this.state.perPage} totalRecords={this.state.totalRecords} rowsPerPageOptions={[10,20,30]} \r\n                            onPageChange={this.onPageChange}\r\n                  ></Paginator>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Accounting;","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ViewKeysGroupDetails.tsx",["319","320","321","322","323"],"import React from 'react';\r\nimport brokenkey from '../icons/BrokenKey.svg';\r\nimport questionmark from '../icons/questionmark.svg';\r\nimport deleteIcon from '../icons/delete.png';\r\nimport 'jspdf-autotable';\r\nimport tick from '../icons/tick.svg';\r\nimport cross from '../icons/cross.svg';\r\nimport axiosInstance from '../../api/api';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport { Toast } from 'primereact/toast';\r\nimport { Calendar } from 'primereact/calendar';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:40%;\r\n  margin-left:-16%;\r\n`;\r\ninterface Props{\r\n  edit:boolean;\r\n  data:any;\r\n  [key :string]:any;\r\n  loading : boolean;\r\n}\r\n\r\n\r\nclass ViewKeysGroupDetails extends React.Component<{viewdata:any,load:any,loadc:any, group_id: any, fetchedData: any},Props> {\r\n  toast: React.RefObject<any>;\r\n\r\n  constructor(props:any){\r\n    super(props);\r\n    this.toast = React.createRef();\r\n    this.state={\r\n      edit:false,\r\n      data:[],\r\n      tenant_location:\"\",\r\n      key_holder:'',\r\n      phone:'',\r\n      email:'',\r\n      date_issued:'',\r\n      lost_key:'',\r\n      broken_key:'',\r\n      loading:false\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount=()=>{\r\n    this.props.load();\r\n    this.setState({data : this.props.viewdata.map((obj:any)=>{\r\n      return({...obj, editData: false\r\n      })\r\n    })});\r\n  };\r\n  removeItem = async (item: any) =>{\r\n    const api = `/api/kdfinder/keysgroups/remove_item`;\r\n      let response = await axiosInstance.post(api , {id: item.id, group_id: this.props.group_id},{headers: {'Content-Type': 'application/json'} } );\r\n      if(response.data.success){\r\n        if(response.data.delete)\r\n        this.props.fetchedData(null, null)\r\n        var index = this.state.data.indexOf(item);\r\n        if (index > -1) {\r\n            this.state.data.splice(index, 1)\r\n            this.setState({data: this.state.data});\r\n        }\r\n      }  \r\n  }\r\n\r\n    handleInputChange  = () => {\r\n\r\n    }\r\n    render() {\r\n      return (\r\n          <>\r\n           <Toast ref={this.toast} />\r\n          {\r\n            this.state.loading ? <div className='overlay-box1'>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n        </div> :''\r\n          }\r\n            <div>\r\n          <table className=\"table m-0\"  >\r\n            <thead >\r\n              <tr>\r\n                <th style={{fontWeight:500,margin:0,width:\"6.65rem\"}} scope=\"col\">Key ID Stamp</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody >\r\n            {this.state.data.map((item: any,i: any)=>{\r\n             return(\r\n              <tr key={i}>\r\n                <th style={{margin:0,width:\"6.65rem\"}} scope=\"row\">{item.key_id +\" - \"+ item.sequence}\r\n                <img alt=\"viewkeys\" style={{marginLeft:\"0.7rem\",width:'1.3rem'}} src={deleteIcon} onClick={() => this.removeItem(item)}/>\r\n                </th>\r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default ViewKeysGroupDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\ServiceRequestDetails.tsx",["324","325","326","327","328"],"import React from 'react';\r\nimport viewa from '../icons/viewa.svg';\r\nimport axiosInstance from '../../api/api';\r\nimport Modal from 'react-modal';\r\nimport logopay from '../icons/logopay.png';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Payment from './Payement/Payment';\r\nimport cancel from '../icons/cancel.svg';\r\nimport  jsPDF from \"jspdf\";\r\nimport 'jspdf-autotable';\r\nimport { autoTable } from 'jspdf-autotable';\r\nimport image from '../icons/pdf-1.svg';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:35%;\r\n  margin-left: 40rem;\r\n`;\r\ninterface Props {\r\n  serviceRequestData:any;\r\n  modalIsOpen:any;\r\n  loading : boolean;\r\n  dispatchPop : any;\r\n  dispatchesTable : any;\r\n  card:any;\r\n  quoteNumber:any;\r\n  quoteAmount:any;\r\n  total_amount: any;\r\n  selectedDispatch: any;\r\n}\r\n\r\nclass ServiceRequestDetails extends React.Component<{locationNo:any,load:any,loadt:any},Props> {\r\n  constructor(props:any){\r\n    super(props);\r\n    this.state ={\r\n      serviceRequestData:[],\r\n      modalIsOpen : false,\r\n      loading : false,\r\n      selectedDispatch: null,\r\n      dispatchPop : [], \r\n      dispatchesTable : [],\r\n      card:false,\r\n      quoteNumber:'',\r\n      quoteAmount:'',\r\n      total_amount: ''\r\n\r\n    }\r\n  }\r\n  customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      width                 : '46.875rem',\r\n      height                : '37.5rem'\r\n    }\r\n  };\r\n\r\n  fetchedData = async() => {\r\n   // this.setState({loading : true});\r\n   try {\r\n    \r\n        const api = `/api/customer/service-request/${this.props.locationNo}/dispatches/`;\r\n     let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n     this.setState({serviceRequestData:response.data?.data});\r\n     if(!(this.state.serviceRequestData === null))\r\n     {\r\n         this.setState({loading : false});\r\n         this.props.load();\r\n     }\r\n }catch(error){\r\n     this.setState({loading : false});\r\n     throw error;\r\n }\r\n  }\r\n\r\n  dispatch = async(dispatch_no:any) => {\r\n    //this.setState({loading : true});\r\n    this.props.loadt();\r\n    try {\r\n    \r\n      const api = `/api/customer/service-request/dispatches/${dispatch_no}/`;\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n      this.setState({total_amount:response.data.total, dispatchesTable: response.data.data,selectedDispatch: dispatch_no});\r\n      if(!(this.state.serviceRequestData === null))\r\n      {\r\n          this.setState({loading : false});\r\n          this.props.load();\r\n          \r\n      }\r\n  }catch(error){\r\n      this.setState({loading : false});\r\n      this.props.load();\r\n      throw error;\r\n  }\r\n    this.setState({card:false}); \r\n    this.setState({modalIsOpen:true});\r\n  }\r\n\r\n  pay = () =>{\r\n    this.setState({card:true});\r\n  }\r\n\r\n  cancelPay = () =>{\r\n    this.setState({card:false});\r\n  }\r\n\r\n  renderModal = () =>{ \r\n    if(this.state.card){\r\n      return (\r\n        <>\r\n        <div style={{textAlign:'right'}}>\r\n\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n          </div>\r\n        <Payment quote={this.state.quoteNumber} amount={this.state.quoteAmount} />\r\n        <div style={{textAlign:'center'}}>\r\n        <button \r\n          className=\"btn btn-outline-danger\"\r\n          type=\"button\"><span className=\"MuiButton-label\" onClick={this.cancelPay} >Cancel</span><span\r\n              className=\"MuiTouchRipple-root\"></span></button>\r\n          </div>         \r\n                  \r\n        </>\r\n      )\r\n  }else{\r\n    const quote_date  = this.state.dispatchPop.quote_date? new Date(this.state.dispatchPop.quote_date).toLocaleDateString(): '';\r\n    return(\r\n        <div>\r\n          <div style={{textAlign:'right'}}>\r\n\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n               </div>\r\n          <div className='row'>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"left\"}} >\r\n              <span style={{fontSize:\"1.875rem\",fontWeight:500}}>Parts Details</span><br></br>\r\n\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500}}>Dispatch# : {this.state.selectedDispatch}</span><br></br>\r\n              </p>\r\n            </div>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"right\"}}>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <table className=\"table m-0\" style={{backgroundColor:\"#fff\"}}>\r\n            <thead style={{ color: \"#fff\",backgroundColor:\"#0D93C9\" }} className=\"thead-light\">\r\n              <tr>\r\n                  <th>Name</th>\r\n                <th data-visible=\"true\" >Description</th>\r\n                <th>QTY</th>\r\n                <th>Each</th>\r\n                <th style={{textAlign:\"right\"}}>Amount</th>\r\n              </tr>\r\n            </thead>\r\n             <tbody>\r\n            {this.state.dispatchesTable.map((item: any,i: any)=>{\r\n                return(\r\n              <tr >\r\n                  <td>{item.parts}</td>\r\n                <td >{item.desc}</td>\r\n                <td>{item.quan}</td>\r\n                <td>{item.price}</td>\r\n                <td style={{textAlign:\"right\"}}>{item.total}</td>\r\n              </tr>\r\n                  )})}\r\n            </tbody> \r\n            <tr>\r\n              <td colSpan={5}>\r\n                <div className='row'>\r\n                  <div className='col-6'>\r\n                    <p style={{cursor:\"pointer\",color:\"#009ED6\"}}>Term and Conditions</p>\r\n                  </div>\r\n                  <div className='col-6'>\r\n                    <p style={{textAlign:\"right\"}}>\r\n                        Total : ${this.state.total_amount}<br></br>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </table>\r\n            <div className='row'>\r\n              <div className='col-6'>\r\n                <img alt=\"viewkeys\" src={logopay} style={{width:'10rem'}}/><br></br>\r\n                 <span>www.calgarylockandsafe.com</span>\r\n              </div>\r\n              {/* <div className='col-6'>\r\n              <button style={{width:\"139px\",height:\"45px\",backgroundColor:\"#009ED6\",float:'right'}} className=\"btn btn-primary\" type=\"submit\" onClick={this.pay}>Pay Invoice</button>\r\n              </div> */}\r\n            </div>\r\n        </div>\r\n    )\r\n                }\r\n  }\r\n\r\n  closeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n    this.setState({card:false});\r\n  }\r\n\r\n componentDidMount= async()=>{\r\n   this.fetchedData();\r\n }\r\n  \r\n exportPDFsingleinvoices = async() => {\r\n  this.setState({loading:true});\r\n    try {\r\n      this.setState({loading : false});\r\n      const unit = \"pt\";\r\n      const size = \"A4\"; // Use A1, A2, A3 or A4\r\n      const orientation = \"portrait\"; // portrait or landscape\r\n      const marginLeft = 40;\r\n      const doc: any = new jsPDF(orientation, unit, size);\r\n      doc.setTextColor(92,92,92)\r\n      doc.setFontSize(15);\r\n      doc.text(40, 20, 'Billed To');\r\n      doc.setTextColor(0,0,0)\r\n      doc.text(40, 40, this.state.dispatchPop.name)\r\n      doc.setTextColor(92,92,92)\r\n      doc.text(40, 60, this.state.dispatchPop.address)\r\n      doc.setTextColor(0,0,0)\r\n      doc.text(40, 100,\"Customer# : \" +this.state.dispatchPop.cus_no)\r\n      doc.text(\"Quote\", 550, 20, \"right\");\r\n      doc.text(\"#\"+this.state.dispatchPop.quote, 550, 40, \"right\");\r\n      const quote_date  = this.state.dispatchPop.quote_date? new Date(this.state.dispatchPop.quote_date).toLocaleDateString(): '';\r\n      doc.setFontSize(10);\r\n      doc.text(quote_date, 550, 60, \"right\");\r\n      const headers = [[\"Description\", \"QTY\", \"Invoice\", \"Each\", \"Amount\"]];\r\n      const data = this.state.dispatchesTable.map((item:any)=> {\r\n        let date: any = new Date(item.quote_date).toLocaleDateString(\"fr-CA\")\r\n        return [item.desc, item.quantity, item.invoice,item.price, item.amount]\r\n      });\r\n\r\n      let content = {\r\n        startY: 120,\r\n        head: headers,\r\n        body: data\r\n      };\r\n      // doc.text(`${location}`, marginLeft, 40);\r\n      // doc.text(`${address}`, marginLeft, 80);\r\n      (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n      let finalY = doc.lastAutoTable.finalY; // The y position on the page\r\n      doc.setTextColor(92,92,92)\r\n\r\n      doc.text(550, finalY + 50, \"Sub Total : $\"+this.state.dispatchPop.amount, \"right\")\r\n      doc.text(550, finalY + 50+15, \"GST(2235785) : $\"+this.state.dispatchPop.tax, \"right\")\r\n      doc.text(550, finalY + 50+30, \"Total : $\"+this.state.dispatchPop.invoice_total, \"right\")\r\n      doc.setTextColor(0,0,0)\r\n      \r\n      doc.text(550, finalY + 50+45, \"Amount owning : $\"+this.state.dispatchPop.invoice_total, \"right\")\r\n      doc.addImage(logopay, 'JPEG', 20, finalY + 130);\r\n      doc.setTextColor(92,92,92)\r\n      doc.text(30, finalY + 185, \"www.calgarylockandsafe.com\")\r\n\r\n      doc.save(\"Quotes.pdf\"); \r\n      }catch(error){\r\n          this.setState({loading : false});\r\n          throw error;\r\n      }\r\n      \r\n      \r\n    };\r\n\r\n    render() {\r\n      return (\r\n          <>\r\n          <div>\r\n          {\r\n              this.state.loading ? <div className='overlay-box2'>\r\n              <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n          </div> :''\r\n            }\r\n          <div>\r\n          <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n          <table className=\"table table-striped m-0\" >\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                {/* <th style={{fontWeight:500}} scope=\"col\">S.No.</th> */}\r\n                <th  scope=\"col\">Dispatch number</th>\r\n                <th  scope=\"col\">Dispatch Entry Date</th>\r\n                <th  scope=\"col\">Customer PO Number</th>\r\n                <th  scope=\"col\">Dispatcher Name</th>\r\n                <th  scope=\"col\">Requester</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {this.state.serviceRequestData.map((item: any,i: any)=>{\r\n              let date = new Date(item.dispatch_en_date).toLocaleDateString(\"fr-CA\")\r\n                return(\r\n              <tr key={i} >\r\n                {/* <td scope=\"row\">{i+1}</td> */}\r\n                <td className=\"primary-text\" onClick={()=>this.dispatch(item.dispatch_no)}>{item.dispatch_no}</td>\r\n                <td>{date}</td>\r\n                <td>{item.po_no}</td>\r\n                <td>{item.dispatcher_name}</td>\r\n                <td>{item.requester}</td>\r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n          </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default ServiceRequestDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\KeyRequest.tsx",[],"C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\AccountingDetails.tsx",["329","330","331","332","333"],"import React from 'react';\r\nimport viewa from '../icons/viewa.svg';\r\nimport axiosInstance, {baseURL} from '../../api/api';\r\nimport Modal from 'react-modal';\r\nimport logopay from '../icons/logopay.png';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Payment from './Payement/Payment';\r\nimport './Payement/Payment.css';\r\nimport cancel from '../icons/cancel.svg';\r\nimport image from '../icons/pdf-1.svg';\r\nimport * as _html2canvas from \"html2canvas\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:35%;\r\n  margin-left: 40rem;\r\n`;\r\ninterface Props {\r\n  invoiceData:any;\r\n  modalIsOpen:any;\r\n  loading : boolean;\r\n  invoicePop : any;\r\n  invoiceTable : any;\r\n  card: boolean;\r\n  invoiceNumber:Number;\r\n  invoiceAmount:Number;\r\n}\r\n\r\nclass AccountingDetails extends React.Component<{locationNo:any,cus_no:any,load:any,loadt:any},Props> {\r\n  constructor(props:any){\r\n    super(props);\r\n    this.state ={\r\n      invoiceData:[],\r\n      modalIsOpen : false,\r\n      loading : false,\r\n      invoicePop : [], \r\n      invoiceTable : [],\r\n      card: false,\r\n      invoiceNumber:0,\r\n      invoiceAmount:0,\r\n\r\n    }\r\n  }\r\n  customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      width                 : '46.875rem',\r\n      height                : '37.5rem'\r\n    }\r\n  };\r\n\r\n  exportPDFsingleinvoices = async() => {\r\n\r\n    try {\r\n      const api = `/api/customer/pdf/invoice/${this.state.invoicePop.cus_no}/${this.props.locationNo}/${this.state.invoicePop.invoice}/`;\r\n      this.setState({loading:true});\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n\r\n  }catch(error){\r\n      throw error;\r\n  } \r\n    /* const unit = \"pt\";\r\n    const size = \"A4\"; // Use A1, A2, A3 or A4\r\n    const orientation = \"portrait\"; // portrait or landscape\r\n    const marginLeft = 40;\r\n    const doc1 :any = document.getElementById(\"invoice\");\r\n    const html2canvas: any = _html2canvas;\r\n     html2canvas(doc1).then((canvas:any)=>{\r\n            const imgData = canvas.toDataURL('image/png');\r\n            const pdf = new jsPDF(orientation, unit, size);\r\n            var width = pdf.internal.pageSize.getWidth();\r\n            var height = pdf.internal.pageSize.getHeight();\r\n            pdf.addImage(imgData, 'text', 30, 20, 500, 780);\r\n            pdf.save(\"invoice.pdf\");\r\n     }) */\r\n     \r\n  };\r\n\r\n  fetchedData = async() => {\r\n   // this.setState({loading : true});\r\n   try {\r\n     const api = `/api/customer/accounting/invoice/list/${this.props.locationNo}/`;\r\n     let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n     this.setState({invoiceData:response.data});\r\n     if(!(this.state.invoiceData === null))\r\n     {\r\n         this.setState({loading : false});\r\n         this.props.load();\r\n     }\r\n }catch(error){\r\n     this.setState({loading : false});\r\n     throw error;\r\n }\r\n  }\r\n\r\n  invoice = async(invoice_no:any) => {\r\n    //this.setState({loading : true});\r\n    this.props.loadt();\r\n    try {\r\n      const api = `/api/customer/accounting/invoice/${this.props.locationNo}/${invoice_no}/`;\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n      this.setState({invoicePop:response.data,invoiceNumber:response.data.invoice, invoiceAmount:response.data.total});\r\n      this.setState({invoiceTable : response.data.data});\r\n      if(!(this.state.invoiceData === null))\r\n      {\r\n          this.setState({loading : false});\r\n          this.props.load();\r\n      }\r\n  }catch(error){\r\n      this.setState({loading : false});\r\n      this.props.load();\r\n      throw error;\r\n  }\r\n    this.setState({card:false});\r\n    this.setState({modalIsOpen:true});\r\n  }\r\n\r\n  pay = () =>{\r\n    this.setState({card:true});\r\n  }\r\n\r\n  cancelPay = () =>{\r\n    this.setState({card:false});\r\n  }\r\n\r\n\r\n  renderModal = () =>{ \r\n    if(this.state.card){\r\n        return (\r\n          <>\r\n           <div style={{textAlign:'right'}}>\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n          </div>\r\n          <Payment invoice={this.state.invoiceNumber} amount={this.state.invoiceAmount} />\r\n          <div style={{textAlign:'center'}}>\r\n          <button \r\n            className=\"btn btn-outline-danger\"\r\n            type=\"button\"><span className=\"MuiButton-label\" onClick={this.cancelPay} >Cancel</span><span\r\n                className=\"MuiTouchRipple-root\"></span></button>\r\n            </div>    \r\n          </>\r\n        )\r\n    }else{\r\n      const invoice_date  = this.state.invoicePop.invoice_date? new Date(this.state.invoicePop.invoice_date).toLocaleDateString(): '';\r\n    return(\r\n      <>\r\n      <div className=\"row \">\r\n             <div className='col' style={{textAlign:'end'}}>\r\n              <a href={`${baseURL}/api/customer/pdf/invoice/${this.props.cus_no}/${this.props.locationNo}/${this.state.invoiceNumber}/`} ><img alt=\"pdf1\" style={{marginRight:'1rem',cursor:\"pointer\",width:'1.563rem',height:'1.563rem'}} src={image}/></a>\r\n               <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n             </div>\r\n             \r\n          </div>\r\n        <div id='invoice'>\r\n          <div className='row'>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"left\"}}>\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500,color:\"#5C5C5C\"}}>Billed To:</span><br></br>\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500}}>{this.state.invoicePop.name}</span><br></br>\r\n              <p style={{fontSize:\"1.063rem\",fontWeight:500,color:\"#5C5C5C\",width:\"12.625rem\",height:\"3.375rem\"}}>{this.state.invoicePop.address}</p>\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500}}>Customer# : {this.state.invoicePop.cus_no}</span><br></br>\r\n              </p>\r\n            </div>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"right\"}}>\r\n              <span style={{fontSize:\"1.875rem\",fontWeight:500}}>Invoice</span><br></br>\r\n             <span style={{fontSize:\"1.25rem\",fontWeight:500}}> #{this.state.invoicePop.invoice}</span><br></br>\r\n              <span style={{fontSize:\"1rem\",fontWeight:500}}>{invoice_date}</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <table className=\"table table-striped\" style={{backgroundColor:\"#fff\"}}>\r\n            <thead style={{ color: \"#fff\",backgroundColor:\"#0D93C9\" }}>\r\n              <tr>\r\n                <th data-visible=\"true\" >Description</th>\r\n                <th>QTY</th>\r\n                <th>Each</th>\r\n                <th style={{textAlign:\"right\"}}>Amount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {this.state.invoiceTable.map((item: any,i: any)=>{\r\n                return(\r\n              <tr >\r\n                <td >{item.desc}</td>\r\n                <td>{item.quantity}</td>\r\n                <td>$ {item.price}</td>\r\n                <td style={{textAlign:\"right\"}}>$ {item.amount}</td>\r\n              </tr>\r\n                  )})}\r\n            </tbody>\r\n            <tr>\r\n              <td colSpan={4}>\r\n                <div className='row'>\r\n                  <div className='col-6'>\r\n                    <p style={{cursor:\"pointer\",color:\"#009ED6\"}}>Term and Conditions</p>\r\n                  </div>\r\n                  <div className='col-6'>\r\n                    <p style={{textAlign:\"right\"}}>Sub Total : ${this.state.invoicePop.sub_total}<br></br>\r\n                    GST(2235785) : ${this.state.invoicePop.GST}<br></br>\r\n                    Total : ${this.state.invoicePop.total}<br></br>\r\n                     <span style={{fontWeight:500}}>Amount owning : ${this.state.invoicePop.total}</span>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </table>\r\n        </div>\r\n        <div className='row'>\r\n              <div className='col-6'>\r\n                <img style={{width:'63%'}} alt=\"viewkeys\" src={logopay}/><br></br>\r\n                www.calgarylockandsafe.com\r\n              </div>\r\n              <div className='col-6'>\r\n              {/* <button style={{width:\"8.688rem\",height:\"2.813rem\",backgroundColor:\"#009ED6\",float:'right'}} className=\"btn btn-primary\" type=\"submit\" onClick={this.pay}>Pay Invoice</button> */}\r\n              <a href={'https://payments.calgarylockandsafe.com/'} style={{backgroundColor:\"#009ED6\",borderColor:\"#009ED6\",width:\"8.688rem\",height:\"2.813rem\",float:'right'}}\r\n                        className=\"btn btn-primary\" >Pay Invoices</a>\r\n              </div>\r\n            </div>\r\n        </>\r\n    )\r\n                }\r\n  }\r\n\r\n  closeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n    this.setState({card:false});\r\n  }\r\n\r\n componentDidMount= async()=>{\r\n   this.fetchedData();\r\n }\r\n\r\n    render() {\r\n      return (\r\n          <>\r\n          <div>\r\n          {\r\n            this.state.loading ? <div className='overlay-box2'>\r\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n        </div>:''\r\n          }\r\n         \r\n          <div >\r\n          <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n          <table className=\"table table-striped\" style={{margin: 0}}>\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th  scope=\"col\">Invoice Number</th>\r\n                <th  scope=\"col\">Invoice Date</th>\r\n                <th  scope=\"col\">Do Date</th>\r\n                <th  scope=\"col\">Invoice Amount</th>\r\n                <th  scope=\"col\">Paid Amount</th>\r\n                <th  scope=\"col\">Balance</th>\r\n                <th style={{textAlign:\"right\"}} scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {this.state.invoiceData.map((item: any,i: any)=>{\r\n              let date = new Date(item.invoice_date).toLocaleDateString(\"fr-CA\");\r\n              let do_date = new Date(item.do_date).toLocaleDateString(\"fr-CA\");\r\n                return(\r\n              <tr key={i}>\r\n                <td>{item.invoice}</td>\r\n                <td>{date}</td>\r\n                <td>{do_date}</td>\r\n                <td>$ {parseFloat(item.sub_total).toLocaleString()}</td>\r\n                <td>$ {parseFloat(item.tax).toLocaleString()}</td>\r\n                <td>$ {parseFloat(item.total).toLocaleString()}</td>\r\n                <td scope=\"col\" className=\"text-right general-btn\">\r\n                  <button className=\"btn red-btn mb-1\" onClick={()=>this.invoice(item.invoice)}>Pay</button>\r\n                  { \r\n                    <button onClick={() => window.open(`${baseURL}/api/customer/pdf/invoice/${this.props.cus_no}/${this.props.locationNo}/${item.invoice}/`, '_blank')} data-toggle=\"tooltip\" data-placement=\"top\" className=\"btn blue-btn mb-1\" title=\"invoice\" >Print</button>\r\n                  }\r\n                  \r\n                </td>\r\n          \r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n          </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default AccountingDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\QuotationDetails.tsx",["334","335","336","337","338"],"import React from 'react';\r\nimport viewa from '../icons/viewa.svg';\r\nimport axiosInstance from '../../api/api';\r\nimport Modal from 'react-modal';\r\nimport logopay from '../icons/logopay.png';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport Payment from './Payement/Payment';\r\nimport cancel from '../icons/cancel.svg';\r\nimport  jsPDF from \"jspdf\";\r\nimport 'jspdf-autotable';\r\nimport { autoTable } from 'jspdf-autotable';\r\nimport image from '../icons/pdf-1.svg';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n  top:35%;\r\n  margin-left: 40rem;\r\n`;\r\ninterface Props {\r\n  invoiceData:any;\r\n  modalIsOpen:any;\r\n  loading : boolean;\r\n  invoicePop : any;\r\n  invoiceTable : any;\r\n  card:any;\r\n  quoteNumber:any;\r\n  quoteAmount:any;\r\n}\r\n\r\nclass QuotationDetails extends React.Component<{locationNo:any,load:any,loadt:any},Props> {\r\n  constructor(props:any){\r\n    super(props);\r\n    this.state ={\r\n      invoiceData:[],\r\n      modalIsOpen : false,\r\n      loading : false,\r\n      invoicePop : [], \r\n      invoiceTable : [],\r\n      card:false,\r\n      quoteNumber:'',\r\n      quoteAmount:'',\r\n\r\n    }\r\n  }\r\n  customStyles = {\r\n    content : {\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-20%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      width                 : '46.875rem',\r\n      height                : '37.5rem'\r\n    }\r\n  };\r\n\r\n  fetchedData = async() => {\r\n   // this.setState({loading : true});\r\n   try {\r\n    \r\n     const api = `/api/customer/quotations/list/${this.props.locationNo}/pending/`;\r\n     let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n     this.setState({invoiceData:response.data});\r\n     if(!(this.state.invoiceData === null))\r\n     {\r\n         this.setState({loading : false});\r\n         this.props.load();\r\n     }\r\n }catch(error){\r\n     this.setState({loading : false});\r\n     throw error;\r\n }\r\n  }\r\n\r\n  invoice = async(quote_no:any) => {\r\n    //this.setState({loading : true});\r\n    this.props.loadt();\r\n    try {\r\n    \r\n      const api = `/api/customer/quotations/detail/${this.props.locationNo}/${quote_no}/`;\r\n      let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n      this.setState({invoicePop:response.data,quoteNumber: response.data.quote, quoteAmount:response.data.invoice_total});\r\n      this.setState({invoiceTable : response.data.sales_data});\r\n      if(!(this.state.invoiceData === null))\r\n      {\r\n          this.setState({loading : false});\r\n          this.props.load();\r\n          \r\n      }\r\n  }catch(error){\r\n      this.setState({loading : false});\r\n      this.props.load();\r\n      throw error;\r\n  }\r\n    this.setState({card:false}); \r\n    this.setState({modalIsOpen:true});\r\n  }\r\n\r\n  pay = () =>{\r\n    this.setState({card:true});\r\n  }\r\n\r\n  cancelPay = () =>{\r\n    this.setState({card:false});\r\n  }\r\n\r\n  renderModal = () =>{ \r\n    if(this.state.card){\r\n      return (\r\n        <>\r\n        <div style={{textAlign:'right'}}>\r\n\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n          </div>\r\n        <Payment quote={this.state.quoteNumber} amount={this.state.quoteAmount} />\r\n        <div style={{textAlign:'center'}}>\r\n        <button \r\n          className=\"btn btn-outline-danger\"\r\n          type=\"button\"><span className=\"MuiButton-label\" onClick={this.cancelPay} >Cancel</span><span\r\n              className=\"MuiTouchRipple-root\"></span></button>\r\n          </div>         \r\n                  \r\n        </>\r\n      )\r\n  }else{\r\n    const quote_date  = this.state.invoicePop.quote_date? new Date(this.state.invoicePop.quote_date).toLocaleDateString(): '';\r\n    return(\r\n        <div>\r\n          <div style={{textAlign:'right'}}>\r\n                <a href=\"javascript:void(0)\" onClick={this.exportPDFsingleinvoices}><img alt=\"pdf1\" style={{marginRight:'1rem',cursor:\"pointer\",width:'1.563rem',height:'1.563rem'}} src={image}/></a>\r\n\r\n                  <img alt=\"cancel\" style={{width:'1.875rem',cursor:'pointer'}} onClick={this.closeModal} src={cancel}/>\r\n               </div>\r\n          <div className='row'>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"left\"}} >\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500,color:\"#5C5C5C\"}}>Billed To:</span><br></br>\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500}}>{this.state.invoicePop.name}</span><br></br>\r\n              <p style={{fontSize:\"1.063rem\",fontWeight:500,color:\"#5C5C5C\",width:\"12.625rem\",height:\"3.375rem\"}}>{this.state.invoicePop.address}</p>\r\n              <span style={{fontSize:\"1.25rem\",fontWeight:500}}>Customer# : {this.state.invoicePop.cus_no}</span><br></br>\r\n              </p>\r\n            </div>\r\n            <div className='col-6'>\r\n              <p style={{textAlign:\"right\"}}>\r\n              <span style={{fontSize:\"1.875rem\",fontWeight:500}}>Quote</span><br></br>\r\n             <span style={{fontSize:\"1.25rem\",fontWeight:500}}> #{this.state.invoicePop.quote}</span><br></br>\r\n              <span style={{fontSize:\"1rem\",fontWeight:500}}>{quote_date}</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <table className=\"table p-0 m-0\" style={{backgroundColor:\"#fff\"}}>\r\n            <thead style={{ color: \"#fff\",backgroundColor:\"#0D93C9\" }}>\r\n              <tr>\r\n                <th data-visible=\"true\" >Description</th>\r\n                <th>QTY</th>\r\n                <th>Invoice</th>\r\n                <th>Each</th>\r\n                <th style={{textAlign:\"right\"}}>Amount</th>\r\n              </tr>\r\n            </thead>\r\n             <tbody>\r\n            {this.state.invoiceTable.map((item: any,i: any)=>{\r\n                return(\r\n              <tr >\r\n                <td >{item.desc}</td>\r\n                <td>{item.quantity}</td>\r\n                <td>{item.invoice}</td>\r\n                <td>{item.price}</td>\r\n                <td style={{textAlign:\"right\"}}>{item.amount}</td>\r\n              </tr>\r\n                  )})}\r\n            </tbody> \r\n            <tr>\r\n              <td colSpan={5}>\r\n                <div className='row'>\r\n                  <div className='col-6'>\r\n                    <p style={{cursor:\"pointer\",color:\"#009ED6\"}}>Term and Conditions</p>\r\n                  </div>\r\n                  <div className='col-6'>\r\n                    <p style={{textAlign:\"right\"}}>Sub Total : ${this.state.invoicePop.amount}<br></br>\r\n                    GST(2235785) : ${this.state.invoicePop.tax}<br></br>\r\n                    Total : ${this.state.invoicePop.invoice_total}<br></br>\r\n                     <span style={{fontWeight:500}}>Amount owning : ${this.state.invoicePop.invoice_total}</span>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </table>\r\n            <div className='row'>\r\n              <div className='col-6'>\r\n                <img alt=\"viewkeys\" src={logopay} style={{width:'10rem'}}/><br></br>\r\n                 <span>www.calgarylockandsafe.com</span>\r\n              </div>\r\n              {/* <div className='col-6'>\r\n              <button style={{width:\"139px\",height:\"45px\",backgroundColor:\"#009ED6\",float:'right'}} className=\"btn btn-primary\" type=\"submit\" onClick={this.pay}>Pay Invoice</button>\r\n              </div> */}\r\n            </div>\r\n        </div>\r\n    )\r\n                }\r\n  }\r\n\r\n  closeModal = () =>{\r\n    this.setState({modalIsOpen:false});\r\n    this.setState({card:false});\r\n  }\r\n\r\n componentDidMount= async()=>{\r\n   this.fetchedData();\r\n }\r\n  \r\n exportPDFsingleinvoices = async() => {\r\n  this.setState({loading:true});\r\n    try {\r\n      this.setState({loading : false});\r\n      const unit = \"pt\";\r\n      const size = \"A4\"; // Use A1, A2, A3 or A4\r\n      const orientation = \"portrait\"; // portrait or landscape\r\n      const marginLeft = 40;\r\n      const doc: any = new jsPDF(orientation, unit, size);\r\n      doc.setTextColor(92,92,92)\r\n      doc.setFontSize(15);\r\n      doc.text(40, 20, 'Billed To');\r\n      doc.setTextColor(0,0,0)\r\n      doc.text(40, 40, this.state.invoicePop.name)\r\n      doc.setTextColor(92,92,92)\r\n      doc.text(40, 60, this.state.invoicePop.address)\r\n      doc.setTextColor(0,0,0)\r\n      doc.text(40, 100,\"Customer# : \" +this.state.invoicePop.cus_no)\r\n      doc.text(\"Quote\", 550, 20, \"right\");\r\n      doc.text(\"#\"+this.state.invoicePop.quote, 550, 40, \"right\");\r\n      const quote_date  = this.state.invoicePop.quote_date? new Date(this.state.invoicePop.quote_date).toLocaleDateString(): '';\r\n      doc.setFontSize(10);\r\n      doc.text(quote_date, 550, 60, \"right\");\r\n      const headers = [[\"Description\", \"QTY\", \"Invoice\", \"Each\", \"Amount\"]];\r\n      const data = this.state.invoiceTable.map((item:any)=> {\r\n        let date: any = new Date(item.quote_date).toLocaleDateString(\"fr-CA\")\r\n        return [item.desc, item.quantity, item.invoice,item.price, item.amount]\r\n      });\r\n\r\n      let content = {\r\n        startY: 120,\r\n        head: headers,\r\n        body: data\r\n      };\r\n      // doc.text(`${location}`, marginLeft, 40);\r\n      // doc.text(`${address}`, marginLeft, 80);\r\n      (doc as jsPDF & { autoTable: autoTable }).autoTable (content);\r\n      let finalY = doc.lastAutoTable.finalY; // The y position on the page\r\n      doc.setTextColor(92,92,92)\r\n\r\n      doc.text(550, finalY + 50, \"Sub Total : $\"+this.state.invoicePop.amount, \"right\")\r\n      doc.text(550, finalY + 50+15, \"GST(2235785) : $\"+this.state.invoicePop.tax, \"right\")\r\n      doc.text(550, finalY + 50+30, \"Total : $\"+this.state.invoicePop.invoice_total, \"right\")\r\n      doc.setTextColor(0,0,0)\r\n      \r\n      doc.text(550, finalY + 50+45, \"Amount owning : $\"+this.state.invoicePop.invoice_total, \"right\")\r\n      doc.addImage(logopay, 'JPEG', 20, finalY + 130);\r\n      doc.setTextColor(92,92,92)\r\n      doc.text(30, finalY + 185, \"www.calgarylockandsafe.com\")\r\n\r\n      doc.save(\"Quotes.pdf\"); \r\n      }catch(error){\r\n          this.setState({loading : false});\r\n          throw error;\r\n      }\r\n      \r\n      \r\n    };\r\n\r\n    render() {\r\n      return (\r\n          <>\r\n          <div>\r\n          {\r\n              this.state.loading ? <div className='overlay-box2'>\r\n              <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={this.state.loading}  height={30} width={5} radius={2} margin={20} />\r\n          </div> :''\r\n            }\r\n          <div>\r\n          <Modal style={this.customStyles} isOpen={this.state.modalIsOpen} onRequestClose={this.closeModal}>{this.renderModal()}</Modal>\r\n          <table className=\"table m-0\" >\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                {/* <th style={{fontWeight:500}} scope=\"col\">S.No.</th> */}\r\n                <th  scope=\"col\">Quote Number</th>\r\n                <th  scope=\"col\">Quote Date</th>\r\n                <th  scope=\"col\">Sales Person</th>\r\n                <th className=\"text-right\" scope=\"col\">Amount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {this.state.invoiceData.map((item: any,i: any)=>{\r\n              let date = new Date(item.quote_date).toLocaleDateString(\"fr-CA\")\r\n                return(\r\n              <tr key={i} >\r\n                {/* <td scope=\"row\">{i+1}</td> */}\r\n                <td className=\"primary-text\" onClick={()=>this.invoice(item.quote)}>{item.quote}</td>\r\n                <td>{date}</td>\r\n                <td>{item.sales_person}</td>\r\n                <td>{item.amount}</td>\r\n              </tr>\r\n              )})}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n          </div>\r\n          </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default QuotationDetails;  ","C:\\Data\\django\\customer_portal\\frontend\\src\\component\\sidebar\\Payement\\Payment.tsx",["339","340","341","342"],"import React, { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport './Payment.css';\r\nimport axiosInstance, {baseURL} from '../../../api/api';\r\nimport axios from 'axios';\r\nimport FadeLoader from \"react-spinners/FadeLoader\";\r\nimport { css } from \"@emotion/core\";\r\nimport { Toast } from 'primereact/toast';\r\nimport { useRef } from 'react';\r\n\r\nconst override = css`\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  background-color: transparent;\r\n`;\r\nconst validEmailRegex = RegExp(\r\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\r\n  );\r\n\r\nconst Payment = (props:any) => {\r\n    const toast: any = useRef();\r\n    const initialFormData = Object.freeze({\r\n         number:'',\r\n         street:'',\r\n         postalcode:'',\r\n         email:'',\r\n         invoiceNumber:0,\r\n         invoiceAmount:0,\r\n         loading:false,\r\n         phone: '',\r\n         invoiceModalIsOpen:true,\r\n    });\r\n\r\n    const [formData, setFormData]:any = useState(initialFormData);\r\n    const [email, setEmail]:any = useState(\"\");\r\n    const [phone, setPhone]:any = useState(\"\");\r\n\r\n    useEffect(()=> {\r\n        renderPayment();\r\n        console.log(props);\r\n    },[]);\r\n    const changeEmail = (e: any) => {\r\n        setEmail(e.target.value)\r\n    }\r\n    const changePhone = (e: any) => {\r\n        setPhone(e.target.value)\r\n    }\r\n    const renderPayment = async()=> {\r\n        setFormData({...formData,loading:true});\r\n        try {\r\n            const api = `/api/customer/get-payment-token/`;\r\n            let response = await axiosInstance.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\r\n            setFormData({...formData, token:response.data.token});\r\n        \r\n        let authorization = response.data.token;\r\n        //console.log(authorization);\r\n        var form = document.querySelector('#cardForm');\r\n        \r\n        window.braintree.client.create({\r\n            authorization: authorization\r\n        }, (err, clientInstance)=> {\r\n        if(err){\r\n            console.log(err);\r\n            return;\r\n        }\r\n        createHostedFields(clientInstance, form);\r\n        });\r\n\r\n        const createHostedFields = (clientInstance:any, form:any) => {\r\n        window.braintree.hostedFields.create({\r\n            client: clientInstance,\r\n            styles: {\r\n                'input': {\r\n                'font-size': '16px',\r\n                'font-family': 'courier, monospace',\r\n                'font-weight': 'lighter',\r\n                'color': '#ccc'\r\n                },\r\n                ':focus': {\r\n                'color': 'black'\r\n                },\r\n                '.valid': {\r\n                'color': '#8bdda8'\r\n                },\r\n                '.invalid': {\r\n                'color': 'red'\r\n                }\r\n            },\r\n            fields: {\r\n                number: {\r\n                selector: '#card-number',\r\n                placeholder: 'Card Number'\r\n                },\r\n                cvv: {\r\n                selector: '#cvv',\r\n                placeholder: 'CVV'\r\n                },\r\n                expirationDate: {\r\n                selector: '#expiration-date',\r\n                placeholder: 'Expiry'\r\n                },\r\n            }\r\n            }, hostedFieldsDidCreate);\r\n          }\r\n        }catch(error){\r\n            console.log(\"Error: \", JSON.stringify(error, null, 4));\r\n            throw error;\r\n        }\r\n    }\r\n    function hostedFieldsDidCreate(err:any, hostedFields:any) {\r\n        setFormData({...formData,loading:false});\r\n        let submitBtn = document.getElementById('submit');\r\n        submitBtn?.addEventListener('click', (e)=>submitHandler(e, hostedFields));\r\n        submitBtn?.removeAttribute('disabled');\r\n      }\r\n\r\n      function submitHandler( event:any,hostedFields:any,) {\r\n        event.preventDefault();\r\n        setFormData({...formData,loading:true});\r\n        let submitBtn = document.getElementById('submit');\r\n        submitBtn?.setAttribute('disabled', 'disabled');\r\n        console.log(hostedFields);\r\n        hostedFields.tokenize().then((payload:any) => {\r\n            console.log(payload.nonce);\r\n            if(payload.nonce){\r\n            if(props.invoiceAddress){\r\n                axiosInstance\r\n\t\t\t.post(`api/customer/invoice/payment/${props.loc_no}/`, {\r\n                payment_method_nonce: payload.nonce,\r\n                location: props.invoiceLocation,\r\n                address: props.invoiceAddress,\r\n                amount: props.selectedAmount,\r\n                list_of_invoice: props.selectedProducts,\r\n                email: email,\r\n                phone: phone\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n                setFormData({...formData,loading:false});\r\n                if(res.data.status===202){\r\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\r\n                    setFormData({...formData, invoiceModalIsOpen:false});\r\n                    props.getItem(formData.invoiceModalIsOpen);\r\n                }else{\r\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\r\n                }\r\n                console.log(res);\r\n            }).catch((error)=>{\r\n                setFormData({...formData,loading:false});\r\n                toast.current.show({severity: 'error', detail: 'Server error'});\r\n            })\r\n            }else if(props.invoice){\r\n            axiosInstance\r\n\t\t\t.post(`api/customer/invoice/payment/`, {\r\n                payment_method_nonce: payload.nonce,\r\n                amount: props.amount,\r\n                invoice: props.invoice,\r\n                email: email,\r\n                phone: phone\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n                setFormData({...formData,loading:false});\r\n                if(res.data.status===202){\r\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\r\n                    setFormData({...formData, allInvoiceModalIsOpen:false});\r\n                }else{\r\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\r\n                }\r\n                console.log(res);\r\n            }).catch((error)=>{\r\n                setFormData({...formData,loading:false});\r\n                toast.current.show({severity: 'error', detail: 'Server error'});\r\n            })\r\n         }else if(props.invoiceALLLocation){\r\n            axiosInstance\r\n\t\t\t.post(`api/customer/invoice/all/payment/`, {\r\n                payment_method_nonce: payload.nonce,\r\n                location: props.invoiceALLLocation,\r\n                amount: props.selectedAmount,\r\n                list_of_invoice: props.selectedProducts,\r\n                email: email,\r\n                phone: phone\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n                setFormData({...formData,loading:false});\r\n                if(res.data.status===202){\r\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\r\n                    setTimeout(()=> {\r\n                        props.getItem(false)\r\n                    }, 1000) \r\n                }else{\r\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\r\n                }\r\n                console.log(res);\r\n            }).catch((error)=>{\r\n                setFormData({...formData,loading:false});\r\n                toast.current.show({severity: 'error', detail: 'Server error'});\r\n            })\r\n         }else if(props.quote){\r\n            axiosInstance\r\n\t\t\t.post(`api/customer/quote/payment/`, {\r\n                payment_method_nonce: payload.nonce,\r\n                amount: props.amount,\r\n                quote: props.quote,\r\n                email: email,\r\n                phone: phone\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n                setFormData({...formData,loading:false});\r\n                if(res.data.status===202){\r\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\r\n                }else{\r\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\r\n                }\r\n                console.log(res);\r\n            }).catch((error)=>{\r\n                setFormData({...formData,loading:false});\r\n                toast.current.show({severity: 'error', detail: 'Server error'});\r\n            })\r\n        }\r\n        }\r\n        }).catch((err:any)=> {\r\n            debugger\r\n            setFormData({...formData,loading:false});\r\n            submitBtn?.removeAttribute('disabled');\r\n            console.error('Error',err.message);\r\n            toast.current.show({severity: 'error', detail: err.message})\r\n        })\r\n      }\r\n\r\n    \r\n      const cancelBtn = (e:any) => {\r\n        props.cancelBtn()\r\n      }\r\n\r\n    const formValidation = () =>{\r\n        let isValid = true;\r\n       /*  let numbers = /[0-9]/g;\r\n        if(formData.cnumber === ''){\r\n            isValid = false;\r\n         }else if(!formData.cnumber.match(numbers)){\r\n            isValid = false ;\r\n        }else if(formData.name === ''){\r\n            isValid = false;\r\n         }else if(formData.expiry === ''){\r\n            isValid = false ;\r\n        }else if(formData.email === ''){\r\n            isValid = false ;\r\n        }else if(!validEmailRegex.test(formData.email)){\r\n            isValid = false ;\r\n        }else if(formData.cvv === ''){\r\n            isValid = false ;\r\n        }else if(!formData.cvv.match(numbers)){\r\n            isValid = false ;\r\n        }else if(formData.number === ''){\r\n            isValid = false ;\r\n        }else if(!formData.number.match(numbers)){\r\n            isValid = false ;\r\n        }else if(formData.street === ''){\r\n            isValid = false ;\r\n        }else if(formData.postalcode === ''){\r\n            isValid = false ;\r\n        } */\r\n        return isValid\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div className=\"MuiPaper-root MuiDialog-paper MuiDialog-paperScrollPaper MuiDialog-paperWidthSm MuiPaper-elevation24 MuiPaper-rounded\" >\r\n              <Toast ref={toast} />\r\n                <div className=\"MuiDialogTitle-root\" style={{padding: 0}}>\r\n                    <h2 className=\"MuiTypography-root MuiTypography-h6 mb-2\">Pay Invoice</h2>\r\n                </div>\r\n                <div className=\"MuiDialogContent-root\" style={{padding: 0}}>\r\n                    <p className=\"MuiTypography-root MuiDialogContentText-root MuiTypography-body1 MuiTypography-colorTextSecondary\">\r\n                        Please enter your payment information</p>\r\n                    <div className=\"MuiBox-root jss123\">\r\n                        <div className=\"MuiBox-root jss124\" style={{display: 'flex', flex: '1 1 0px'}}>\r\n                            <div className=\"rccs\">\r\n                                <div className=\"rccs__card rccs__card--unknown\">\r\n                                    <div className=\"rccs__card--front\">\r\n                                        <div className=\"rccs__card__background\"></div>\r\n                                        <div className=\"rccs__issuer\"></div>\r\n                                        <div className=\"rccs__cvc__front\"></div>\r\n                                        <div className=\"rccs__number\">â¢â¢â¢â¢ â¢â¢â¢â¢ â¢â¢â¢â¢ â¢â¢â¢â¢</div>\r\n                                        <div className=\"rccs__name\">YOUR NAME HERE</div>\r\n                                        <div className=\"rccs__expiry\">\r\n                                            <div className=\"rccs__expiry__valid\">valid thru</div>\r\n                                            <div className=\"rccs__expiry__value\">â¢â¢/â¢â¢</div>\r\n                                        </div>\r\n                                        <div className=\"rccs__chip\"></div>\r\n                                    </div>\r\n                                    <div className=\"rccs__card--back\">\r\n                                        <div className=\"rccs__card__background\"></div>\r\n                                        <div className=\"rccs__stripe\"></div>\r\n                                        <div className=\"rccs__signature\"></div>\r\n                                        <div className=\"rccs__cvc\"></div>\r\n                                        <div className=\"rccs__issuer\"></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"MuiBox-root jss125\" style={{display: 'flex', flex: '1 1 0px', paddingLeft: '0.5rem',marginTop:'-3rem'}}>\r\n                        <form action=\"/\" method=\"post\" id=\"cardForm\" style={{marginTop: \"2rem\"}}>\r\n                            <div className=\"col pr-0\" style={{padding:'.3rem', paddingTop: '1rem'}}>\r\n                                <div id='card-number' className='form-control'></div>\r\n                            </div>\r\n                            <div className=\"col pr-0\" style={{padding:'.3rem'}}>\r\n                                <input type=\"text\" id='card-holder-name' placeholder=\"Name\" className='form-control' style={{color: '#8bdda8'}} required/>\r\n                            </div>\r\n                            <div className=\"col pr-0\" style={{padding:'.3rem'}}>\r\n                                <div id='expiration-date' className='form-control'></div>\r\n                            </div>\r\n                            <div className=\"col pr-0\" style={{padding:'.3rem'}}>\r\n                                <div id='cvv' className='form-control'></div>\r\n                            </div>\r\n\r\n                        </form>\r\n\r\n                        {\r\n                         formData.loading ?  <div className=\"overlay-box1\">\r\n                                <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={formData.loading}  height={30} width={5} radius={2} margin={20} />\r\n                            </div>\r\n                            : \"\"\r\n                        }\r\n                            </div>\r\n                            </div>\r\n                                {/* <div className=\"MuiBox-root jss130\" style={{minWidth: '450px'}}>\r\n                                    \r\n                                        <div className=\"row\" style={{width:'35rem'}}>\r\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\r\n                                            <input type=\"text\" className=\"form-control\" name='number' placeholder=\"Number\" onChange={handleInputChange}/>\r\n                                            </div>\r\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\r\n                                            <input type=\"text\" className=\"form-control\" name='street' placeholder=\"Street\" onChange={handleInputChange}/>\r\n                                            </div>\r\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\r\n                                            <input type=\"text\" className=\"form-control\" name='postalcode' placeholder=\"Postal Code\" onChange={handleInputChange}/>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                </div>\r\n                                <div className=\"MuiBox-root jss131\" style={{marginLeft:'-1.1rem'}}>\r\n                                      <div className=\"col\" style={{padding:'.5rem'}}>\r\n                                            <input type=\"email\" className=\"form-control\" name='email' placeholder=\"Email\" onChange={handleInputChange}/>\r\n                                      </div>\r\n                                    </div> */}\r\n                </div>         \r\n                                    \r\n                            <div className=\"d-flex\" >\r\n                                <input type=\"text\" onChange={changePhone} value={phone} id='phone' placeholder=\"Number\" className='form-control' style={{color: '#8bdda8'}} required/>\r\n                                <input type=\"text\" id='street' placeholder=\"Street\" className='form-control' style={{color: '#8bdda8'}} required/>\r\n                                <input type=\"text\" placeholder=\"Postal\" id='postal-code' className='form-control' style={{color: '#8bdda8'}} required/>\r\n                            </div>\r\n                            <input type=\"email\" onChange={changeEmail} value={email} placeholder=\"Email\" id='email' style={{color: '#8bdda8'}} className='form-control mt-2' required/>\r\n\r\n                      {   formValidation() ? \r\n                          <div style={{textAlign: \"end\"}}>\r\n                          <button \r\n                            className=\"btn text-danger\" style={{fontWeight: 'bold', fontSize: '12px', marginTop: '10px',}}\r\n                             id='cancel' ><span className=\"MuiButton-label\" onClick={cancelBtn} >CANCEL</span>\r\n                             </button>\r\n                             \r\n                          <button \r\n                            className=\"btn MuiTypography-colorTextSecondary\" style={{fontWeight: 'bold',padding: 0,marginLeft: '8px', marginTop: '10px', fontSize: '12px'}}\r\n                             type=\"submit\" id='submit' ><span className=\"MuiButton-label\"  >SUBMIT PAYMENT</span>\r\n                             </button>\r\n                          </div> : \r\n                          <div>\r\n                              <button \r\n                            className=\"btn text-danger\" style={{fontWeight: 'bold', fontSize: '12px', marginTop: '10px',}}\r\n                              id='cancel' ><span className=\"MuiButton-label\"  onClick={cancelBtn}>CANCEL</span>\r\n                             </button>\r\n                             \r\n                            <button \r\n                            className=\"btn MuiTypography-colorTextSecondary\" style={{fontWeight: 'bold',padding: 0,marginLeft: '8px', marginTop: '10px', fontSize: '12px'}}\r\n                             type=\"submit\" id='submit' disabled><span className=\"MuiButton-label\"  >SUBMIT PAYMENT</span>\r\n                             </button>\r\n                          </div>\r\n                      }\r\n             </div>                \r\n        \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Payment;",{"ruleId":"343","replacedBy":"344"},{"ruleId":"345","replacedBy":"346"},{"ruleId":"347","severity":1,"message":"348","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":14},{"ruleId":"347","severity":1,"message":"351","line":4,"column":8,"nodeType":"349","messageId":"350","endLine":4,"endColumn":17},{"ruleId":"347","severity":1,"message":"352","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":13},{"ruleId":"347","severity":1,"message":"353","line":6,"column":8,"nodeType":"349","messageId":"350","endLine":6,"endColumn":12},{"ruleId":"347","severity":1,"message":"354","line":7,"column":8,"nodeType":"349","messageId":"350","endLine":7,"endColumn":12},{"ruleId":"347","severity":1,"message":"355","line":8,"column":8,"nodeType":"349","messageId":"350","endLine":8,"endColumn":11},{"ruleId":"347","severity":1,"message":"356","line":9,"column":10,"nodeType":"349","messageId":"350","endLine":9,"endColumn":18},{"ruleId":"347","severity":1,"message":"357","line":16,"column":8,"nodeType":"349","messageId":"350","endLine":16,"endColumn":16},{"ruleId":"347","severity":1,"message":"358","line":34,"column":9,"nodeType":"349","messageId":"350","endLine":34,"endColumn":13},{"ruleId":"347","severity":1,"message":"359","line":37,"column":9,"nodeType":"349","messageId":"350","endLine":37,"endColumn":14},{"ruleId":"360","severity":1,"message":"361","line":52,"column":7,"nodeType":"362","endLine":52,"endColumn":9,"suggestions":"363"},{"ruleId":"347","severity":1,"message":"364","line":68,"column":13,"nodeType":"349","messageId":"350","endLine":68,"endColumn":29},{"ruleId":"347","severity":1,"message":"365","line":69,"column":13,"nodeType":"349","messageId":"350","endLine":69,"endColumn":29},{"ruleId":"347","severity":1,"message":"366","line":70,"column":13,"nodeType":"349","messageId":"350","endLine":70,"endColumn":20},{"ruleId":"347","severity":1,"message":"367","line":71,"column":13,"nodeType":"349","messageId":"350","endLine":71,"endColumn":29},{"ruleId":"368","severity":1,"message":"369","line":71,"column":37,"nodeType":"370","messageId":"371","endLine":71,"endColumn":38,"suggestions":"372"},{"ruleId":"368","severity":1,"message":"373","line":71,"column":40,"nodeType":"370","messageId":"371","endLine":71,"endColumn":41,"suggestions":"374"},{"ruleId":"368","severity":1,"message":"375","line":71,"column":43,"nodeType":"370","messageId":"371","endLine":71,"endColumn":44,"suggestions":"376"},{"ruleId":"377","severity":1,"message":"378","line":93,"column":27,"nodeType":"379","messageId":"380","endLine":93,"endColumn":29},{"ruleId":"347","severity":1,"message":"381","line":3,"column":24,"nodeType":"349","messageId":"350","endLine":3,"endColumn":31},{"ruleId":"368","severity":1,"message":"369","line":51,"column":38,"nodeType":"370","messageId":"371","endLine":51,"endColumn":39,"suggestions":"382"},{"ruleId":"368","severity":1,"message":"373","line":51,"column":41,"nodeType":"370","messageId":"371","endLine":51,"endColumn":42,"suggestions":"383"},{"ruleId":"368","severity":1,"message":"375","line":51,"column":44,"nodeType":"370","messageId":"371","endLine":51,"endColumn":45,"suggestions":"384"},{"ruleId":"347","severity":1,"message":"385","line":52,"column":13,"nodeType":"349","messageId":"350","endLine":52,"endColumn":25},{"ruleId":"368","severity":1,"message":"369","line":44,"column":38,"nodeType":"370","messageId":"371","endLine":44,"endColumn":39,"suggestions":"386"},{"ruleId":"368","severity":1,"message":"373","line":44,"column":41,"nodeType":"370","messageId":"371","endLine":44,"endColumn":42,"suggestions":"387"},{"ruleId":"368","severity":1,"message":"375","line":44,"column":44,"nodeType":"370","messageId":"371","endLine":44,"endColumn":45,"suggestions":"388"},{"ruleId":"347","severity":1,"message":"381","line":3,"column":9,"nodeType":"349","messageId":"350","endLine":3,"endColumn":16},{"ruleId":"347","severity":1,"message":"389","line":1,"column":26,"nodeType":"349","messageId":"350","endLine":1,"endColumn":35},{"ruleId":"347","severity":1,"message":"356","line":3,"column":10,"nodeType":"349","messageId":"350","endLine":3,"endColumn":18},{"ruleId":"347","severity":1,"message":"390","line":3,"column":20,"nodeType":"349","messageId":"350","endLine":3,"endColumn":25},{"ruleId":"347","severity":1,"message":"391","line":18,"column":8,"nodeType":"349","messageId":"350","endLine":18,"endColumn":21},{"ruleId":"360","severity":1,"message":"392","line":26,"column":10,"nodeType":"362","endLine":26,"endColumn":12,"suggestions":"393"},{"ruleId":"394","severity":1,"message":"395","line":39,"column":17,"nodeType":"396","endLine":39,"endColumn":59},{"ruleId":"394","severity":1,"message":"395","line":45,"column":25,"nodeType":"396","endLine":45,"endColumn":183},{"ruleId":"394","severity":1,"message":"395","line":50,"column":29,"nodeType":"396","endLine":50,"endColumn":90},{"ruleId":"347","severity":1,"message":"356","line":3,"column":5,"nodeType":"349","messageId":"350","endLine":3,"endColumn":13},{"ruleId":"347","severity":1,"message":"381","line":8,"column":25,"nodeType":"349","messageId":"350","endLine":8,"endColumn":32},{"ruleId":"397","severity":1,"message":"398","line":48,"column":17,"nodeType":"349","messageId":"399","endLine":48,"endColumn":27},{"ruleId":"397","severity":1,"message":"400","line":49,"column":17,"nodeType":"349","messageId":"399","endLine":49,"endColumn":19},{"ruleId":"397","severity":1,"message":"398","line":60,"column":17,"nodeType":"349","messageId":"399","endLine":60,"endColumn":27},{"ruleId":"397","severity":1,"message":"400","line":61,"column":17,"nodeType":"349","messageId":"399","endLine":61,"endColumn":19},{"ruleId":"347","severity":1,"message":"401","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":11},{"ruleId":"347","severity":1,"message":"402","line":2,"column":10,"nodeType":"349","messageId":"350","endLine":2,"endColumn":19},{"ruleId":"347","severity":1,"message":"403","line":2,"column":21,"nodeType":"349","messageId":"350","endLine":2,"endColumn":24},{"ruleId":"347","severity":1,"message":"404","line":3,"column":9,"nodeType":"349","messageId":"350","endLine":3,"endColumn":12},{"ruleId":"347","severity":1,"message":"405","line":14,"column":8,"nodeType":"349","messageId":"350","endLine":14,"endColumn":18},{"ruleId":"347","severity":1,"message":"406","line":18,"column":12,"nodeType":"349","messageId":"350","endLine":18,"endColumn":20},{"ruleId":"347","severity":1,"message":"407","line":30,"column":11,"nodeType":"349","messageId":"350","endLine":30,"endColumn":25},{"ruleId":"394","severity":1,"message":"395","line":37,"column":13,"nodeType":"396","endLine":37,"endColumn":48},{"ruleId":"394","severity":1,"message":"395","line":41,"column":113,"nodeType":"396","endLine":41,"endColumn":126},{"ruleId":"394","severity":1,"message":"395","line":46,"column":111,"nodeType":"396","endLine":46,"endColumn":124},{"ruleId":"394","severity":1,"message":"395","line":57,"column":21,"nodeType":"396","endLine":57,"endColumn":58},{"ruleId":"408","severity":1,"message":"409","line":57,"column":58,"nodeType":"396","endLine":57,"endColumn":92},{"ruleId":"394","severity":1,"message":"395","line":79,"column":21,"nodeType":"396","endLine":79,"endColumn":57},{"ruleId":"394","severity":1,"message":"395","line":84,"column":25,"nodeType":"396","endLine":84,"endColumn":38},{"ruleId":"394","severity":1,"message":"395","line":89,"column":25,"nodeType":"396","endLine":89,"endColumn":37},{"ruleId":"394","severity":1,"message":"395","line":94,"column":25,"nodeType":"396","endLine":94,"endColumn":38},{"ruleId":"394","severity":1,"message":"395","line":104,"column":45,"nodeType":"396","endLine":104,"endColumn":88},{"ruleId":"347","severity":1,"message":"410","line":13,"column":8,"nodeType":"349","messageId":"350","endLine":13,"endColumn":12},{"ruleId":"360","severity":1,"message":"411","line":77,"column":5,"nodeType":"362","endLine":77,"endColumn":7,"suggestions":"412"},{"ruleId":"347","severity":1,"message":"413","line":82,"column":9,"nodeType":"349","messageId":"350","endLine":82,"endColumn":17},{"ruleId":"377","severity":1,"message":"378","line":155,"column":96,"nodeType":"379","messageId":"380","endLine":155,"endColumn":98},{"ruleId":"377","severity":1,"message":"378","line":155,"column":128,"nodeType":"379","messageId":"380","endLine":155,"endColumn":130},{"ruleId":"377","severity":1,"message":"414","line":171,"column":74,"nodeType":"379","messageId":"380","endLine":171,"endColumn":76},{"ruleId":"347","severity":1,"message":"415","line":8,"column":10,"nodeType":"349","messageId":"350","endLine":8,"endColumn":18},{"ruleId":"347","severity":1,"message":"416","line":9,"column":8,"nodeType":"349","messageId":"350","endLine":9,"endColumn":12},{"ruleId":"347","severity":1,"message":"417","line":10,"column":8,"nodeType":"349","messageId":"350","endLine":10,"endColumn":16},{"ruleId":"347","severity":1,"message":"418","line":12,"column":9,"nodeType":"349","messageId":"350","endLine":12,"endColumn":14},{"ruleId":"347","severity":1,"message":"419","line":15,"column":10,"nodeType":"349","messageId":"350","endLine":15,"endColumn":19},{"ruleId":"347","severity":1,"message":"420","line":16,"column":10,"nodeType":"349","messageId":"350","endLine":16,"endColumn":17},{"ruleId":"377","severity":1,"message":"414","line":219,"column":54,"nodeType":"379","messageId":"380","endLine":219,"endColumn":56},{"ruleId":"394","severity":1,"message":"421","line":279,"column":15,"nodeType":"396","endLine":280,"endColumn":57},{"ruleId":"394","severity":1,"message":"421","line":284,"column":15,"nodeType":"396","endLine":284,"endColumn":180},{"ruleId":"347","severity":1,"message":"422","line":390,"column":9,"nodeType":"349","messageId":"350","endLine":390,"endColumn":24},{"ruleId":"377","severity":1,"message":"414","line":438,"column":108,"nodeType":"379","messageId":"380","endLine":438,"endColumn":110},{"ruleId":"347","severity":1,"message":"423","line":25,"column":7,"nodeType":"349","messageId":"350","endLine":25,"endColumn":14},{"ruleId":"347","severity":1,"message":"424","line":47,"column":8,"nodeType":"349","messageId":"350","endLine":47,"endColumn":14},{"ruleId":"347","severity":1,"message":"425","line":48,"column":8,"nodeType":"349","messageId":"350","endLine":48,"endColumn":13},{"ruleId":"347","severity":1,"message":"426","line":49,"column":8,"nodeType":"349","messageId":"350","endLine":49,"endColumn":20},{"ruleId":"360","severity":1,"message":"411","line":200,"column":5,"nodeType":"362","endLine":200,"endColumn":7,"suggestions":"427"},{"ruleId":"347","severity":1,"message":"422","line":344,"column":9,"nodeType":"349","messageId":"350","endLine":344,"endColumn":24},{"ruleId":"347","severity":1,"message":"428","line":4,"column":8,"nodeType":"349","messageId":"350","endLine":4,"endColumn":13},{"ruleId":"347","severity":1,"message":"429","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":14},{"ruleId":"347","severity":1,"message":"430","line":8,"column":8,"nodeType":"349","messageId":"350","endLine":8,"endColumn":13},{"ruleId":"347","severity":1,"message":"431","line":9,"column":8,"nodeType":"349","messageId":"350","endLine":9,"endColumn":15},{"ruleId":"377","severity":1,"message":"414","line":243,"column":108,"nodeType":"379","messageId":"380","endLine":243,"endColumn":110},{"ruleId":"347","severity":1,"message":"432","line":3,"column":8,"nodeType":"349","messageId":"350","endLine":3,"endColumn":13},{"ruleId":"347","severity":1,"message":"433","line":4,"column":8,"nodeType":"349","messageId":"350","endLine":4,"endColumn":11},{"ruleId":"347","severity":1,"message":"434","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":16},{"ruleId":"347","severity":1,"message":"435","line":6,"column":8,"nodeType":"349","messageId":"350","endLine":6,"endColumn":15},{"ruleId":"347","severity":1,"message":"436","line":7,"column":8,"nodeType":"349","messageId":"350","endLine":7,"endColumn":17},{"ruleId":"347","severity":1,"message":"437","line":8,"column":8,"nodeType":"349","messageId":"350","endLine":8,"endColumn":20},{"ruleId":"347","severity":1,"message":"416","line":9,"column":8,"nodeType":"349","messageId":"350","endLine":9,"endColumn":12},{"ruleId":"347","severity":1,"message":"438","line":10,"column":8,"nodeType":"349","messageId":"350","endLine":10,"endColumn":18},{"ruleId":"347","severity":1,"message":"381","line":11,"column":25,"nodeType":"349","messageId":"350","endLine":11,"endColumn":32},{"ruleId":"347","severity":1,"message":"439","line":20,"column":18,"nodeType":"349","messageId":"350","endLine":20,"endColumn":35},{"ruleId":"347","severity":1,"message":"440","line":22,"column":8,"nodeType":"349","messageId":"350","endLine":22,"endColumn":13},{"ruleId":"377","severity":1,"message":"414","line":303,"column":47,"nodeType":"379","messageId":"380","endLine":303,"endColumn":49},{"ruleId":"377","severity":1,"message":"378","line":444,"column":93,"nodeType":"379","messageId":"380","endLine":444,"endColumn":95},{"ruleId":"377","severity":1,"message":"378","line":444,"column":121,"nodeType":"379","messageId":"380","endLine":444,"endColumn":123},{"ruleId":"377","severity":1,"message":"414","line":444,"column":167,"nodeType":"379","messageId":"380","endLine":444,"endColumn":169},{"ruleId":"377","severity":1,"message":"378","line":444,"column":192,"nodeType":"379","messageId":"380","endLine":444,"endColumn":194},{"ruleId":"377","severity":1,"message":"414","line":492,"column":21,"nodeType":"379","messageId":"380","endLine":492,"endColumn":23},{"ruleId":"441","severity":1,"message":"442","line":502,"column":39,"nodeType":"443","messageId":"444","endLine":502,"endColumn":41},{"ruleId":"347","severity":1,"message":"422","line":527,"column":11,"nodeType":"349","messageId":"350","endLine":527,"endColumn":26},{"ruleId":"347","severity":1,"message":"423","line":25,"column":9,"nodeType":"349","messageId":"350","endLine":25,"endColumn":16},{"ruleId":"360","severity":1,"message":"445","line":79,"column":9,"nodeType":"362","endLine":79,"endColumn":11,"suggestions":"446"},{"ruleId":"347","severity":1,"message":"447","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":28},{"ruleId":"347","severity":1,"message":"432","line":3,"column":8,"nodeType":"349","messageId":"350","endLine":3,"endColumn":13},{"ruleId":"347","severity":1,"message":"433","line":4,"column":8,"nodeType":"349","messageId":"350","endLine":4,"endColumn":11},{"ruleId":"347","severity":1,"message":"434","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":16},{"ruleId":"347","severity":1,"message":"435","line":6,"column":8,"nodeType":"349","messageId":"350","endLine":6,"endColumn":15},{"ruleId":"347","severity":1,"message":"436","line":7,"column":8,"nodeType":"349","messageId":"350","endLine":7,"endColumn":17},{"ruleId":"347","severity":1,"message":"437","line":8,"column":8,"nodeType":"349","messageId":"350","endLine":8,"endColumn":20},{"ruleId":"347","severity":1,"message":"416","line":9,"column":8,"nodeType":"349","messageId":"350","endLine":9,"endColumn":12},{"ruleId":"347","severity":1,"message":"438","line":10,"column":8,"nodeType":"349","messageId":"350","endLine":10,"endColumn":18},{"ruleId":"347","severity":1,"message":"381","line":11,"column":25,"nodeType":"349","messageId":"350","endLine":11,"endColumn":32},{"ruleId":"347","severity":1,"message":"448","line":13,"column":8,"nodeType":"349","messageId":"350","endLine":13,"endColumn":14},{"ruleId":"347","severity":1,"message":"449","line":14,"column":10,"nodeType":"349","messageId":"350","endLine":14,"endColumn":19},{"ruleId":"347","severity":1,"message":"430","line":17,"column":8,"nodeType":"349","messageId":"350","endLine":17,"endColumn":13},{"ruleId":"347","severity":1,"message":"429","line":19,"column":8,"nodeType":"349","messageId":"350","endLine":19,"endColumn":14},{"ruleId":"347","severity":1,"message":"450","line":20,"column":10,"nodeType":"349","messageId":"350","endLine":20,"endColumn":16},{"ruleId":"347","severity":1,"message":"439","line":20,"column":18,"nodeType":"349","messageId":"350","endLine":20,"endColumn":35},{"ruleId":"347","severity":1,"message":"415","line":21,"column":10,"nodeType":"349","messageId":"350","endLine":21,"endColumn":18},{"ruleId":"347","severity":1,"message":"440","line":22,"column":8,"nodeType":"349","messageId":"350","endLine":22,"endColumn":13},{"ruleId":"347","severity":1,"message":"451","line":25,"column":7,"nodeType":"349","messageId":"350","endLine":25,"endColumn":19},{"ruleId":"397","severity":1,"message":"452","line":191,"column":11,"nodeType":"349","messageId":"399","endLine":191,"endColumn":23},{"ruleId":"377","severity":1,"message":"378","line":195,"column":62,"nodeType":"379","messageId":"380","endLine":195,"endColumn":64},{"ruleId":"397","severity":1,"message":"453","line":253,"column":11,"nodeType":"349","messageId":"399","endLine":253,"endColumn":25},{"ruleId":"377","severity":1,"message":"378","line":257,"column":66,"nodeType":"379","messageId":"380","endLine":257,"endColumn":68},{"ruleId":"377","severity":1,"message":"414","line":385,"column":140,"nodeType":"379","messageId":"380","endLine":385,"endColumn":142},{"ruleId":"377","severity":1,"message":"414","line":437,"column":148,"nodeType":"379","messageId":"380","endLine":437,"endColumn":150},{"ruleId":"347","severity":1,"message":"454","line":3,"column":8,"nodeType":"349","messageId":"350","endLine":3,"endColumn":13},{"ruleId":"347","severity":1,"message":"455","line":10,"column":8,"nodeType":"349","messageId":"350","endLine":10,"endColumn":13},{"ruleId":"347","severity":1,"message":"440","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":13},{"ruleId":"347","severity":1,"message":"456","line":100,"column":9,"nodeType":"349","messageId":"350","endLine":100,"endColumn":13},{"ruleId":"347","severity":1,"message":"455","line":3,"column":8,"nodeType":"349","messageId":"350","endLine":3,"endColumn":13},{"ruleId":"347","severity":1,"message":"457","line":7,"column":8,"nodeType":"349","messageId":"350","endLine":7,"endColumn":14},{"ruleId":"347","severity":1,"message":"458","line":9,"column":8,"nodeType":"349","messageId":"350","endLine":9,"endColumn":16},{"ruleId":"347","severity":1,"message":"432","line":20,"column":8,"nodeType":"349","messageId":"350","endLine":20,"endColumn":13},{"ruleId":"347","severity":1,"message":"413","line":373,"column":17,"nodeType":"349","messageId":"350","endLine":373,"endColumn":25},{"ruleId":"441","severity":1,"message":"442","line":447,"column":55,"nodeType":"443","messageId":"444","endLine":447,"endColumn":57},{"ruleId":"441","severity":1,"message":"442","line":457,"column":58,"nodeType":"443","messageId":"444","endLine":457,"endColumn":60},{"ruleId":"347","severity":1,"message":"436","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":17},{"ruleId":"347","severity":1,"message":"437","line":3,"column":8,"nodeType":"349","messageId":"350","endLine":3,"endColumn":20},{"ruleId":"347","severity":1,"message":"459","line":6,"column":8,"nodeType":"349","messageId":"350","endLine":6,"endColumn":12},{"ruleId":"347","severity":1,"message":"460","line":7,"column":8,"nodeType":"349","messageId":"350","endLine":7,"endColumn":13},{"ruleId":"347","severity":1,"message":"415","line":12,"column":10,"nodeType":"349","messageId":"350","endLine":12,"endColumn":18},{"ruleId":"347","severity":1,"message":"455","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":13},{"ruleId":"347","severity":1,"message":"432","line":13,"column":8,"nodeType":"349","messageId":"350","endLine":13,"endColumn":13},{"ruleId":"347","severity":1,"message":"461","line":133,"column":11,"nodeType":"349","messageId":"350","endLine":133,"endColumn":21},{"ruleId":"347","severity":1,"message":"462","line":220,"column":13,"nodeType":"349","messageId":"350","endLine":220,"endColumn":23},{"ruleId":"347","severity":1,"message":"463","line":238,"column":13,"nodeType":"349","messageId":"350","endLine":238,"endColumn":22},{"ruleId":"347","severity":1,"message":"455","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":13},{"ruleId":"347","severity":1,"message":"464","line":12,"column":13,"nodeType":"349","messageId":"350","endLine":12,"endColumn":25},{"ruleId":"347","severity":1,"message":"465","line":13,"column":10,"nodeType":"349","messageId":"350","endLine":13,"endColumn":14},{"ruleId":"347","severity":1,"message":"413","line":66,"column":11,"nodeType":"349","messageId":"350","endLine":66,"endColumn":19},{"ruleId":"466","severity":1,"message":"467","line":280,"column":21,"nodeType":"468","endLine":280,"endColumn":32},{"ruleId":"347","severity":1,"message":"455","line":2,"column":8,"nodeType":"349","messageId":"350","endLine":2,"endColumn":13},{"ruleId":"394","severity":1,"message":"395","line":134,"column":17,"nodeType":"396","endLine":134,"endColumn":85},{"ruleId":"469","severity":1,"message":"470","line":134,"column":25,"nodeType":"370","messageId":"471","endLine":134,"endColumn":45},{"ruleId":"347","severity":1,"message":"462","line":224,"column":13,"nodeType":"349","messageId":"350","endLine":224,"endColumn":23},{"ruleId":"347","severity":1,"message":"463","line":242,"column":13,"nodeType":"349","messageId":"350","endLine":242,"endColumn":22},{"ruleId":"347","severity":1,"message":"381","line":4,"column":24,"nodeType":"349","messageId":"350","endLine":4,"endColumn":31},{"ruleId":"347","severity":1,"message":"472","line":5,"column":8,"nodeType":"349","messageId":"350","endLine":5,"endColumn":13},{"ruleId":"347","severity":1,"message":"473","line":16,"column":7,"nodeType":"349","messageId":"350","endLine":16,"endColumn":22},{"ruleId":"360","severity":1,"message":"474","line":41,"column":7,"nodeType":"362","endLine":41,"endColumn":9,"suggestions":"475"},"no-native-reassign",["476"],"no-negated-in-lhs",["477"],"@typescript-eslint/no-unused-vars","'Footer' is defined but never used.","Identifier","unusedVar","'logolocks' is defined but never used.","'heart' is defined but never used.","'lock' is defined but never used.","'door' is defined but never used.","'key' is defined but never used.","'Redirect' is defined but never used.","'NotFound' is defined but never used.","'icon' is assigned a value but never used.","'login' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'formData'. Either include it or remove the dependency array. You can also do a functional update 'setFormData(f => ...)' if you only need 'formData' in the 'setFormData' call.","ArrayExpression",["478"],"'lowerCaseLetters' is assigned a value but never used.","'upperCaseLetters' is assigned a value but never used.","'numbers' is assigned a value but never used.","'specialcharacter' is assigned a value but never used.","no-useless-escape","Unnecessary escape character: \\$.","Literal","unnecessaryEscape",["479","480"],"Unnecessary escape character: \\^.",["481","482"],"Unnecessary escape character: \\*.",["483","484"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'baseURL' is defined but never used.",["485","486"],["487","488"],["489","490"],"'reWhiteSpace' is assigned a value but never used.",["491","492"],["493","494"],["495","496"],"'useEffect' is defined but never used.","'Route' is defined but never used.","'axiosInstance' is defined but never used.","React Hook React.useEffect has missing dependencies: 'props.access' and 'props.username'. Either include them or remove the dependency array. If 'setUsername' needs the current value of 'props.username', you can also switch to useReducer instead of useState and read 'props.username' in the reducer.",["497"],"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","@typescript-eslint/no-redeclare","'props' is already defined.","redeclared","'id' is already defined.","'env' is defined but never used.","'Container' is defined but never used.","'Row' is defined but never used.","'Nav' is defined but never used.","'logouticon' is defined but never used.","'username' is assigned a value but never used.","'changepassword' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","'edit' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchDataAsync'. Either include it or remove the dependency array.",["498"],"'response' is assigned a value but never used.","Expected '===' and instead saw '=='.","'Calendar' is defined but never used.","'csv1' is defined but never used.","'shopping' is defined but never used.","'jsPDF' is defined but never used.","'autoTable' is defined but never used.","'CSVLink' is defined but never used.","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","'lastUpdatedDate' is assigned a value but never used.","'history' is assigned a value but never used.","'offset' is assigned a value but never used.","'limit' is assigned a value but never used.","'totalRecords' is assigned a value but never used.",["499"],"'viewq' is defined but never used.","'Select' is defined but never used.","'Modal' is defined but never used.","'logopay' is defined but never used.","'image' is defined but never used.","'csv' is defined but never used.","'schedule' is defined but never used.","'warning' is defined but never used.","'brokenkey' is defined but never used.","'questionmark' is defined but never used.","'removeIcon' is defined but never used.","'validateYupSchema' is defined but never used.","'edit1' is defined but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has a missing dependency: 'file'. Either include it or remove the dependency array.",["500"],"'ViewKeysGroupDetails' is defined but never used.","'cancel' is defined but never used.","'Paginator' is defined but never used.","'Formik' is defined but never used.","'customStyles' is assigned a value but never used.","'selectedKeys' is already defined.","'selectedGroups' is already defined.","'truck' is defined but never used.","'viewa' is defined but never used.","'name' is assigned a value but never used.","'dollar' is defined but never used.","'question' is defined but never used.","'tick' is defined but never used.","'cross' is defined but never used.","'quote_date' is assigned a value but never used.","'marginLeft' is assigned a value but never used.","'date' is assigned a value but never used.","'_html2canvas' is defined but never used.","'Link' is defined but never used.","jsx-a11y/scope","The scope prop can only be used on <th> elements.","JSXAttribute","no-script-url","Script URL is a form of eval.","unexpectedScriptURL","'axios' is defined but never used.","'validEmailRegex' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'props' and 'renderPayment'. Either include them or remove the dependency array.",["501"],"no-global-assign","no-unsafe-negation",{"desc":"502","fix":"503"},{"messageId":"504","fix":"505","desc":"506"},{"messageId":"507","fix":"508","desc":"509"},{"messageId":"504","fix":"510","desc":"506"},{"messageId":"507","fix":"511","desc":"509"},{"messageId":"504","fix":"512","desc":"506"},{"messageId":"507","fix":"513","desc":"509"},{"messageId":"504","fix":"514","desc":"506"},{"messageId":"507","fix":"515","desc":"509"},{"messageId":"504","fix":"516","desc":"506"},{"messageId":"507","fix":"517","desc":"509"},{"messageId":"504","fix":"518","desc":"506"},{"messageId":"507","fix":"519","desc":"509"},{"messageId":"504","fix":"520","desc":"506"},{"messageId":"507","fix":"521","desc":"509"},{"messageId":"504","fix":"522","desc":"506"},{"messageId":"507","fix":"523","desc":"509"},{"messageId":"504","fix":"524","desc":"506"},{"messageId":"507","fix":"525","desc":"509"},{"desc":"526","fix":"527"},{"desc":"528","fix":"529"},{"desc":"528","fix":"530"},{"desc":"531","fix":"532"},{"desc":"533","fix":"534"},"Update the dependencies array to be: [formData]",{"range":"535","text":"536"},"removeEscape",{"range":"537","text":"538"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"539","text":"540"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"541","text":"538"},{"range":"542","text":"540"},{"range":"543","text":"538"},{"range":"544","text":"540"},{"range":"545","text":"538"},{"range":"546","text":"540"},{"range":"547","text":"538"},{"range":"548","text":"540"},{"range":"549","text":"538"},{"range":"550","text":"540"},{"range":"551","text":"538"},{"range":"552","text":"540"},{"range":"553","text":"538"},{"range":"554","text":"540"},{"range":"555","text":"538"},{"range":"556","text":"540"},"Update the dependencies array to be: [props.access, props.username]",{"range":"557","text":"558"},"Update the dependencies array to be: [fetchDataAsync]",{"range":"559","text":"560"},{"range":"561","text":"560"},"Update the dependencies array to be: [file]",{"range":"562","text":"563"},"Update the dependencies array to be: [props, renderPayment]",{"range":"564","text":"565"},[1716,1718],"[formData]",[2324,2325],"",[2324,2324],"\\",[2327,2328],[2327,2327],[2330,2331],[2330,2330],[1558,1559],[1558,1558],[1561,1562],[1561,1561],[1564,1565],[1564,1564],[1367,1368],[1367,1367],[1370,1371],[1370,1370],[1373,1374],[1373,1373],[907,909],"[props.access, props.username]",[2624,2626],"[fetchDataAsync]",[7046,7048],[2592,2594],"[file]",[1142,1144],"[props, renderPayment]"]